!function(e){function t(t){for(var n,s,o=t[0],l=t[1],h=t[2],c=0,p=[];c<o.length;c++)s=o[c],r[s]&&p.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);p.length;)p.shift()();return i.push.apply(i,h||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={1:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var d=l;i.push([546,0]),a()}({346:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),s=a.n(i),o=a(27),l=a(17),h=a(86),d=a(3),c=a(67),p=a(41);var u={START_APP:"START_APP",UPDATE_STATE_DATA:"UPDATE_STATE_DATA"};const m=e=>({type:u.UPDATE_STATE_DATA,updateData:e}),g=p.a.SubMenu;var _,f,y=class extends r.a.Component{renderMenuItem(){let e=this.props.mainState,t=(e.defaultRouter,e.language,e.userRoles.filter(e=>!1!==e.include_in_menu));return t=t.map((t,a)=>t.children&&t.children.length>0?r.a.createElement(g,{key:t.path,title:r.a.createElement("span",null,r.a.createElement(l.a,{className:"menu_item_left_icon",type:t.icon}),r.a.createElement("span",null,t.label))},t.children.map(t=>r.a.createElement(p.a.Item,{className:"menu_item_left",onClick:()=>{if(e.defaultRouter==t.path)return!1;this.props.dispatch(m({defaultRouter:t.path}))},key:t.path},t.icon?r.a.createElement(l.a,{type:t.icon}):r.a.createElement(l.a,{type:"api"}),r.a.createElement("span",null,t.label)))):r.a.createElement(p.a.Item,{onClick:()=>{if(e.defaultRouter==t.path)return!1;this.props.dispatch(m({defaultRouter:t.path}))},key:t.path},r.a.createElement(l.a,{type:t.icon}),r.a.createElement("span",null,t.label)))}render(){let e=this.props.mainState.defaultRouter;return r.a.createElement("div",null,r.a.createElement(p.a,{defaultSelectedKeys:[e],mode:"inline",theme:"dark"},this.renderMenuItem()))}},E=a(9),b=a(12),x=a(14),S=a(19),k=a(15),v=a(13),w=a(18),A=a(24);Object.assign;function C(e,t){let a={};return t=t||"id",e.length&&e.forEach(e=>{a[e[t]]=e}),a}window.ISD_BASE_URL&&""!=window.ISD_BASE_URL||(window.ISD_BASE_URL=window.location.protocol+"//"+(_=document.location.href,null!=(f=_.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i))&&f.length>2&&"string"==typeof f[2]&&f[2].length>0?f[2]:null)+"/");const I=()=>{let e=sessionStorage.getItem("ISD_TOKEN");if(""!=e&&null!=e)return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e}},D=()=>{let e=sessionStorage.getItem("ISD_TOKEN");if(""!=e&&null!=e)return{Authorization:"Bearer "+e}},T=[{value:"0",text:"Ngừng kích hoạt"},{value:"1",text:"Kích hoạt"}],N=[{id:"0",value:"0",text:"Không duyệt"},{id:"1",value:"1",text:"Đã duyệt"},{id:"2",value:"2",text:"Chưa duyệt"}],j=[{id:"2",value:"2",text:"Chờ duyệt"},{id:"0",value:"0",text:"Không đạt"},{id:"1",value:"1",text:"Đạt"}],O={data:[],links:[]};var R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function L(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const M=x.a.Item,q=r.a.createContext(),B=x.a.create()(e=>{let t=e.form,a=(e.index,L(e,["form","index"]));return r.a.createElement(q.Provider,{value:t},r.a.createElement("tr",a))});class U extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"ranking":return r.a.createElement(w.a,{placeholder:"Chọn xếp hạng"},r.a.createElement(w.a.Option,{value:"A"},"A"),r.a.createElement(w.a.Option,{value:"B"},"B"),r.a.createElement(w.a.Option,{value:"C"},"C"),r.a.createElement(w.a.Option,{value:"D"},"D"));default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,L(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(q.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(M,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var P=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"npp/deleteNpp/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá nhà cung cấp!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá nhà cung cấp!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;new RegExp(e,"gi"),this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã NCC",dataIndex:"ma_npp",width:"10%",editable:!0,required:!0,render:e=>r.a.createElement(r.a.Fragment,null,e)},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Địa chỉ",dataIndex:"address",editable:!0,required:!0},{title:"Điện thoại",dataIndex:"phone",editable:!0},{title:"Xếp hạng",dataIndex:"ranking",editable:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(q.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=R({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới NCC rồi ...")}getDefaultFields(){return{ma_npp:"",name:"",address:"",phone:"",ranking:"A"}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=R({},e,a);fetch(ISD_BASE_URL+"npp/updateNpp",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(r,1,R({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"npp/fetchNpp",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>R({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu nhà cung cấp!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:B,cell:U}},t=this.columns.map(e=>e.editable?R({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let a=this.state.searchText,n=[...this.state.data];return a&&(n=n.map(e=>-1==`${e.ma_npp}${e.name}${e.address}${e.phone}${e.ranking}`.toLowerCase().indexOf(a.toLowerCase())?null:R({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý nhà cung cấp")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới NCC"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:n,columns:t,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},Y=a(57),F=a(47),z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Q=x.a.Item,G=w.a.Option;var V=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={confirmDirty:!1,groupUser:[]},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){let e=this.props.mainState.user,a=e&&e.id?e.id:"";t.id=a,fetch(ISD_BASE_URL+"users/updateUser",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.afterSave(e.data))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình đăng kí thành viên!")})}})}),this.handleConfirmBlur=(e=>{const t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}),this.compareToFirstPassword=((e,t,a)=>{const n=this.props.form;t&&t!==n.getFieldValue("hash")?a("Hai mật khẩu chưa khớp!"):a()}),this.validateToNextPassword=((e,t,a)=>{const n=this.props.form;t&&this.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),a()}),t}fetchGroupUser(){fetch(ISD_BASE_URL+"qlpb/fetchPb",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({groupUser:e.data}),this.props.dispatch(m({groupUser:e.data}))):console.warn(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){let e=this.props.mainState.groupUser;e&&e.length||this.fetchGroupUser()}render(){const e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};var a=this.props.mainState;let n=a.user,i=a.groupUser,s=[];return i&&i.length&&(s=i.map(e=>r.a.createElement(G,{value:e.ma_pb,key:e.ma_pb},e.ma_pb," - ",e.name))),r.a.createElement(x.a,{onSubmit:this.handleSubmit},r.a.createElement(Q,z({},t,{label:r.a.createElement("span",null,"Tên đăng nhập ",r.a.createElement(F.a,{title:"Dùng để đăng nhập hệ thống!"},r.a.createElement(l.a,{type:"question-circle-o"})))}),e("username",{initialValue:n.username,rules:[{required:!0,message:"Hãy nhập tên đăng nhập!",whitespace:!0}]})(r.a.createElement(b.a,null))),r.a.createElement(Q,z({},t,{label:"E-mail"}),e("email",{initialValue:n.email,rules:[{type:"email",message:"Email không hợp lệ!"},{required:!0,message:"Hãy nhập E-mail!"}]})(r.a.createElement(b.a,null))),n.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,z({},t,{label:"Mật khẩu mới"}),e("hash",{rules:[{required:!1,message:"Nhãy nhập mật khẩu!"},{validator:this.validateToNextPassword}]})(r.a.createElement(b.a,{type:"password"}))),r.a.createElement(Q,z({},t,{label:"Nhập lại mật khẩu mới"}),e("confirm",{rules:[{required:!1,message:"Nhập lại mật khẩu!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(b.a,{type:"password",onBlur:this.handleConfirmBlur})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,z({},t,{label:"Mật khẩu"}),e("hash",{rules:[{required:!0,message:"Nhãy nhập mật khẩu!"},{validator:this.validateToNextPassword}]})(r.a.createElement(b.a,{type:"password"}))),r.a.createElement(Q,z({},t,{label:"Nhập lại mật khẩu"}),e("confirm",{rules:[{required:!0,message:"Nhập lại mật khẩu!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(b.a,{type:"password",onBlur:this.handleConfirmBlur})))),r.a.createElement(Q,z({},t,{label:"Họ và tên"}),e("name",{initialValue:n.name})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(Q,z({},t,{label:"Mã nhân sự"}),e("ma_ns",{initialValue:n.ma_ns,rules:[{required:!0,message:"Hãy nhập mã nhân viên!"}]})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(Q,z({},t,{label:"Điện thoại"}),e("phone",{initialValue:n.phone})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(Q,z({},t,{label:"Phòng ban"}),e("group_user",{initialValue:n.group_user,rules:[{required:!1,message:"Hãy chọn phòng ban!"}]})(r.a.createElement(w.a,{placeholder:"Chọn phòng ban",onChange:e=>{console.log(e)}},s))),r.a.createElement(Q,z({},t,{label:"Tổ"}),e("to_hanh_chinh",{initialValue:n.to_hanh_chinh})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(Q,z({},t,{label:"Thông tin"}),e("description",{initialValue:n.description})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(Q,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Lưu")))}}),K=a(44);const Z="Có",J="Không";var H=class extends r.a.Component{constructor(e){super(e),this.state={data:[],permission:[],allowed_router:[],loading:!1},this.updateUserPermission=this.updateUserPermission.bind(this),this.showRouterAndPermission=this.showRouterAndPermission.bind(this),this.columns=[{title:"Tên module",dataIndex:"name",width:"40%"},{title:"Quyền xem",dataIndex:"view",width:"10%",render:(e,t)=>{if(t&&t.permission&&t.permission.view)return r.a.createElement(K.a,{onChange:e=>{this.updateUserPermission(t.permission.view,e)},checked:-1!==this.state.allowed_router.indexOf(t.permission.view),checkedChildren:Z,unCheckedChildren:J})}},{title:"Quyền thêm",dataIndex:"add",width:"10%",render:(e,t)=>{if(t&&t.permission&&t.permission.add)return r.a.createElement(K.a,{onChange:e=>{this.updateUserPermission(t.permission.add,e)},checked:-1!==this.state.allowed_router.indexOf(t.permission.add),checkedChildren:Z,unCheckedChildren:J})}},{title:"Quyền sửa",dataIndex:"edit",width:"10%",render:(e,t)=>{if(t&&t.permission&&t.permission.edit)return r.a.createElement(K.a,{onChange:e=>{this.updateUserPermission(t.permission.edit,e)},checked:-1!==this.state.allowed_router.indexOf(t.permission.edit),checkedChildren:Z,unCheckedChildren:J})}},{title:"Quyền xóa",dataIndex:"delete",width:"10%",render:(e,t)=>{if(t&&t.permission&&t.permission.delete)return r.a.createElement(K.a,{onChange:e=>{this.updateUserPermission(t.permission.delete,e)},checked:-1!==this.state.allowed_router.indexOf(t.permission.delete),checkedChildren:Z,unCheckedChildren:J})}},{title:"Bao gồm",dataIndex:"include",width:"20%",render:(e,t)=>{}}]}updateUserPermission(e,t){if(e){let a=this.props.mainState,n=a.phanquyen&&a.phanquyen.user?a.phanquyen.user.id:"";if(n){let a={user_id:n,router_name:e,allow:t,include:""};fetch(ISD_BASE_URL+"users/updatePermission",{method:"POST",headers:I(),body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(this.showRouterAndPermission(e.data),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình phân quyền!")})}}}showRouterAndPermission(e){if(e.permission&&e.roles){let t=e.permission.map(e=>e.router_name);this.setState({data:e.roles,permission:e.permission,loading:!1,allowed_router:t})}}fetchData(){let e=this.props.mainState.phanquyen,t=e.user?e.user.id:"";this.setState({loading:!0}),fetch(ISD_BASE_URL+"fetchAllRoles/"+t,{headers:I()}).then(e=>e.json()).then(e=>{e.data?this.showRouterAndPermission(e.data):(d.a.error(e.message),this.setState({loading:!1}))}).catch(e=>{this.setState({loading:!1}),d.a.error(e)})}componentDidMount(){this.fetchData()}render(){const e=this.columns;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{size:"small",loading:this.state.loading,bordered:!0,dataSource:this.state.data,scroll:{y:300},pagination:{pageSize:50},columns:e}))}},W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};x.a.Item;var X=class extends r.a.Component{constructor(e){super(e),this.cancel=(()=>{this.props.dispatch(m({user:{openUserModal:!1}}))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"users/deleteUser/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(response.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá user!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t,sortedInfo:a})}),this.cancel=this.cancel.bind(this),this.state={data:[]},this.columns=[{title:"Tên đăng nhập",dataIndex:"username",editable:!0,required:!0},{title:"Email",dataIndex:"email",editable:!0,required:!0},{title:"Mã NS",dataIndex:"ma_ns"},{title:"Họ và tên",dataIndex:"name",editable:!0,required:!1},{title:"Trạng thái",dataIndex:"status",editable:!0,render:(e,t)=>{let a=T.filter(t=>t.value==e);return r.a.createElement("span",null,a[0].text)}},{title:"Phân Quyền",dataIndex:"phan_quyen",editable:!1,required:!1,width:100,render:(e,t)=>t.id?r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phanquyen:{user:t,openModal:!0}}))},type:"primary"},"Phân quyền"):null},{title:"Actions",dataIndex:"operation",render:(e,t)=>r.a.createElement("div",{style:{minWidth:100}},r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá")))}]}addNewRow(){let e=this.getDefaultFields();this.edit(e)}getDefaultFields(){return{username:"",email:"",name:"",hash:"",status:"1",ma_ns:"",group_user:"",to_hanh_chinh:"",description:""}}edit(e){this.props.dispatch(m({user:W({},e,{openUserModal:!0})}))}fetchData(){fetch(ISD_BASE_URL+"users/fetchUsers",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>W({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu !",3),console.log(e)})}componentDidMount(){this.fetchData()}componentDidMount(){this.fetchData()}render(){const e=this.columns;let t=this.props.mainState,a=!!t.phanquyen&&t.phanquyen.openModal,n=!!t.user&&t.user.openUserModal,i=this.state.searchText,s=[...this.state.data];return i&&(s=s.map(e=>-1==`${e.username}${e.email}${e.name}${e.ma_ns}`.toLowerCase().indexOf(i.toLowerCase())?null:W({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý người dùng")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới người dùng"))))),a?r.a.createElement(Y.a,{width:"95%",style:{top:20},title:"Phân quyền người dùng",okText:"Lưu",cancelText:"Đóng",visible:a,onCancel:()=>{this.props.dispatch(m({phanquyen:W({},this.props.mainState.phanquyen,{openModal:!1})}))},onOk:()=>{},footer:null},r.a.createElement(H,{mainState:this.props.mainState,dispatch:this.props.dispatch})):null,n?r.a.createElement(Y.a,{width:"60%",style:{top:20},title:"Form thành viên",visible:n,onCancel:()=>{this.cancel()},footer:null},r.a.createElement(V,{afterSave:e=>{this.setState({data:e}),this.cancel()},mainState:this.props.mainState,dispatch:this.props.dispatch})):null,r.a.createElement(A.a,{bordered:!0,dataSource:s,columns:e,onChange:this.handleChange,expandedRowRender:e=>r.a.createElement("ul",{className:"user-extra-info"},r.a.createElement("li",null,"Họ và tên: ",r.a.createElement("b",null,e.name)),r.a.createElement("li",null,"Mã nhân sự: ",r.a.createElement("b",null,e.ma_ns)),r.a.createElement("li",null,"Điện thoại: ",r.a.createElement("b",null,e.phone)),r.a.createElement("li",null,"Tổ hành chính: ",r.a.createElement("b",null,e.to_hanh_chinh)),r.a.createElement("li",null,"Thông tin: ",r.a.createElement("b",null,e.description)),r.a.createElement("li",null,"Phòng ban: ",r.a.createElement("b",null,e.ten_phong_ban))),title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch}))))}))}},$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const ee=x.a.Item;var te=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||(this.setState({loading:!0}),this.getToken($({},t)))})}),t}getToken(e){fetch(ISD_BASE_URL+"token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.token?(sessionStorage.setItem("ISD_TOKEN",e.token),this.props.dispatch(m({showLogin:!1,userRoles:e.scopes||[],userInfo:e.userInfo}))):(d.a.error(e.message,5),this.setState({loading:!1}))}).catch(e=>{console.warn(e),d.a.error("Có lỗi trong quá trình đăng nhập!")})}render(){const e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("img",{src:"./images/logo.png"})),r.a.createElement(x.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(ee,null,e("userName",{rules:[{required:!0,message:"Nhập tên đăng nhập!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(l.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tên đăng nhập"}))),r.a.createElement(ee,null,e("password",{rules:[{required:!0,message:"Nhập mật khẩu!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(l.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Mật khẩu"}))),r.a.createElement(ee,null,r.a.createElement(v.a,{loading:this.state.loading,type:"primary",htmlType:"submit",className:"login-form-button"},"Đăng nhập"))))}});var ae=class extends r.a.Component{showUserName(){let e=this.props.mainState.userInfo;if(e)return e.name||e.username||e.email}render(){let e=this.props.mainState.ans_language;return r.a.createElement("div",{className:"admin-user-info"},r.a.createElement("span",null,e.ans_xin_chao||"Xin chào"," ",r.a.createElement("b",null,this.showUserName())),r.a.createElement(v.a,{ghost:!0,style:{marginRight:10},type:"primary",icon:"mail"},"Góp ý, phản hồi"),r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({showLogin:!0}))},type:"primary",ghost:!0},e.ans_dang_xuat||"Đăng xuất"," "))}},ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};class re extends r.a.Component{render(){return r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},className:"isd-app-loading"},r.a.createElement(l.a,{style:ne({fontSize:46,color:"#08c",width:"100%"},this.props.style),type:"loading"}))}}var ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function se(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const oe=x.a.Item,le=r.a.createContext(),he=x.a.create()(e=>{let t=e.form,a=(e.index,se(e,["form","index"]));return r.a.createElement(le.Provider,{value:t},r.a.createElement("tr",a))});class de extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"quanly":let e=this.props.quanly||[];return r.a.createElement(w.a,{style:{maxWidth:200},placeholder:"Chọn user"},e.map(e=>r.a.createElement(w.a.Option,{key:e.id,value:e.username},`${e.username} - ${e.name}`)));default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,se(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(le.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(oe,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var ce=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlkho/deleteKho/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Kho",dataIndex:"ma_kho",width:"10%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Quản lý",dataIndex:"quanly",width:120,editable:!0,required:!1},{title:"Thông tin",dataIndex:"description",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(le.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=ie({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới kho rồi ...")}getDefaultFields(){return{ma_kho:"",name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=ie({},e,a);fetch(ISD_BASE_URL+"qlkho/updateKho",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,ie({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>ie({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchQuanly(){fetch(ISD_BASE_URL+"qlkho/fetchQl",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({})),this.setState({quanly:e.data})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchData(),this.fetchQuanly()}render(){const e={body:{row:he,cell:de}};let t=(this.state||[]).quanly;const a=this.columns.map(e=>e.editable?ie({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,quanly:t})}):e);let n=this.state.searchText,i=[...this.state.data];return n&&(i=i.map(e=>-1==`${e.ma_kho}${e.name}${e.quanly}${e.description}`.toLowerCase().indexOf(n.toLowerCase())?null:ie({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý kho")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm kho mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,quanly:t,dataSource:i,columns:a,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function ue(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const me=x.a.Item,ge=r.a.createContext(),_e=x.a.create()(e=>{let t=e.form,a=(e.index,ue(e,["form","index"]));return r.a.createElement(ge.Provider,{value:t},r.a.createElement("tr",a))});class fe extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"ma_kho":let e=this.props.categories;return r.a.createElement(w.a,{style:{width:250},placeholder:"Chọn kho"},e.map(e=>r.a.createElement(w.a.Option,{key:e.id,value:e.ma_kho},e.name)));default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,ue(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(ge.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(me,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var ye=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlvtkho/deleteVtkho/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu vị trí kho!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu vị trí kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Kho",dataIndex:"ma_kho",width:"25%",editable:!0,required:!0,render:(e,t)=>{let a=e;return this.state.categoryList&&this.state.categoryList[e]&&(a=this.state.categoryList[e].name),r.a.createElement("span",null,e," - ",a)}},{title:"Tên vị trí",dataIndex:"name",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(ge.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=pe({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới vị trí kho rồi ...")}getDefaultFields(){return{ma_kho:"",name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=pe({},e,a);fetch(ISD_BASE_URL+"qlvtkho/updateVtkho",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,pe({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchCategories(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({categories:e.data})),this.setState({categoryList:C(e.data,"ma_kho")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchData(){fetch(ISD_BASE_URL+"qlvtkho/fetchVtkho",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>pe({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu vị trí kho!",3),console.log(e)})}componentDidMount(){this.fetchCategories(),this.fetchData()}render(){const e={body:{row:_e,cell:fe}};let t=this.props.mainState.categories;const a=this.columns.map(e=>e.editable?pe({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,categories:t})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý vị trí trong kho")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm vị trí kho mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row"}))}},Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function be(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const xe=x.a.Item,Se=r.a.createContext(),ke=x.a.create()(e=>{let t=e.form,a=(e.index,be(e,["form","index"]));return r.a.createElement(Se.Provider,{value:t},r.a.createElement("tr",a))});class ve extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,be(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Se.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(xe,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var we=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlcate/deleteCate/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;new RegExp(e,"gi"),this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã danh mục",dataIndex:"ma_cate",editable:!0,required:!0},{title:"Tên danh mục",dataIndex:"name",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Se.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=Ee({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới danh mục rồi ...")}getDefaultFields(){return{name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Ee({},e,a);fetch(ISD_BASE_URL+"qlcate/updateCate",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,Ee({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlcate/fetchCate",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Ee({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu danh mục!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:ke,cell:ve}},t=this.columns.map(e=>e.editable?Ee({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let a=this.state.searchText,n=[...this.state.data];return a&&(n=n.map(e=>-1==`${e.ma_cate}${e.name}${e.description}`.toLowerCase().indexOf(a.toLowerCase())?null:Ee({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý Danh mục")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:n,columns:t,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Ce(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Ie=x.a.Item,De=r.a.createContext(),Te=x.a.create()(e=>{let t=e.form,a=(e.index,Ce(e,["form","index"]));return r.a.createElement(De.Provider,{value:t},r.a.createElement("tr",a))});class Ne extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,Ce(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(De.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(Ie,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var je=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlkh/deleteKh/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu khách hàng!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu khách hàng!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;new RegExp(e,"gi"),this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Khách Hàng",dataIndex:"ma_kh",width:"10%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Số điện thoại",dataIndex:"phone",editable:!0,required:!0},{title:"Địa chỉ",dataIndex:"address",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!1},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(De.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=Ae({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới khách hàng rồi ...")}getDefaultFields(){return{ma_kh:"",name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Ae({},e,a);fetch(ISD_BASE_URL+"qlkh/updateKh",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,Ae({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlkh/fetchKh",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Ae({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu khách hàng!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:Te,cell:Ne}},t=this.columns.map(e=>e.editable?Ae({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let a=this.state.searchText,n=[...this.state.data];return a&&(n=n.map(e=>-1==`${e.ma_kh}${e.name}${e.address}${e.phone}${e.description}`.toLowerCase().indexOf(a.toLowerCase())?null:Ae({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý khách hàng")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm khách hàng mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:n,columns:t,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Re(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Le=x.a.Item,Me=r.a.createContext(),qe={headTitle:"Quản lý sản phẩm",addNewTitle:"Thêm sản phẩm mới"},Be={fetch:"product/fetch",update:"product/update",delete:"product/delete/"},Ue=x.a.create()(e=>{let t=e.form,a=(e.index,Re(e,["form","index"]));return r.a.createElement(Me.Provider,{value:t},r.a.createElement("tr",a))});class Pe extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"category_id":let e=this.props.categories;return r.a.createElement(w.a,{style:{width:250},placeholder:"Chọn danh mục"},e.map(e=>r.a.createElement(w.a.Option,{key:e.id,value:e.id},e.name)));default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,Re(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Me.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t&&("product_id"!=n||"product_id"==n&&!this.props.record.id)?r.a.createElement(Le,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var Ye=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Be.delete+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t,sortedInfo:a})}),this.state={data:[],editingKey:"",categoryList:{},newitem:0,searchText:""},this.columns=[{title:"Mã Danh mục",dataIndex:"category_id",width:"15%",editable:!0,required:!0,render:(e,t)=>{let a=e;return this.state.categoryList&&this.state.categoryList[e]&&(a=this.state.categoryList[e].name),r.a.createElement("span",null,a)}},{title:"Mã VT",dataIndex:"product_id",width:"15%",editable:!0,required:!0},{title:"Tên sản phẩm",dataIndex:"name",editable:!0,required:!0},{title:"Đơn vị",dataIndex:"unit",editable:!0},{title:"Min",dataIndex:"min",editable:!0},{title:"Max",dataIndex:"max",editable:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Me.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=Oe({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới sản phẩm rồi ...")}getDefaultFields(){return{product_id:"",category_id:"",name:"",unit:"",min:"0",max:"0"}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Oe({},e,a);fetch(ISD_BASE_URL+Be.update,{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(r,1,Oe({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchCategories(){fetch(ISD_BASE_URL+"qlcate/fetchCate",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({categories:e.data})),this.setState({categoryList:C(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchData(){fetch(ISD_BASE_URL+Be.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Oe({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}componentDidMount(){this.fetchCategories(),this.fetchData()}render(){const e={body:{row:Ue,cell:Pe}};let t=this.props.mainState.categories;const a=this.columns.map(e=>e.editable?Oe({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,categories:t})}):e);let n=this.state.searchText,i=[...this.state.data];return n&&(i=i.map(e=>-1==`${e.product_id}${e.name}`.toLowerCase().indexOf(n.toLowerCase())?null:Oe({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},qe.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},qe.addNewTitle))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:i,columns:a,onChange:this.handleChange,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm Vật tư")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Nhập mã vật tư hoặc tên vật tư",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},Fe=a(31),ze=a(8),Qe=a.n(ze),Ge=a(65),Ve=a(35),Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Ze=x.a.Item,Je=(w.a.Option,Ge.a.Group);var He=class extends r.a.Component{constructor(e){super(e),this.state={productListbyCateList:[]}}fetchData(){fetch(ISD_BASE_URL+"sx/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchProductbyCate(){fetch(ISD_BASE_URL+"sx/fetchProductByCate/19",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({productListbyCate:e.data})),this.setState({productListbyCateList:e.data})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchProductbyCate()}render(){var e=this.props.mainState;let t=e.sx,a=e.phieuAction,n=e.ans_language,i=this.state.productListbyCateList||[];t.hd||(t.hd=2);let s=t.nsx;(s=Qe()(s)).isValid()||(s=null);let o=!(!a||"view"!=a.action);return r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_number_lsx||"ans_number_lsx",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{so:e.target.value})}))},value:t.so}))),r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_cong_doan||"ans_cong_doan",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{cong_doan:e.target.value})}))},value:t.cong_doan})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_product||"ans_product",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(w.a,{defaultValue:t.ma_sp,showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{ma_sp:e})}))},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,placeholder:n.ans_choose_product||"ans_choose_product"},i.map(e=>r.a.createElement(w.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `))))),r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_co_lo||"ans_co_lo",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{co_lo:e.target.value})}))},value:t.co_lo})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_so_dang_ky||"ans_so_dang_ky",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{so_dk:e.target.value})}))},value:t.so_dk}))),r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_order||"ans_order",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{dh:e.target.value})}))},value:t.dh})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_so_lo||"ans_so_lo",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{so_lo:e.target.value})}))},value:t.so_lo}))),r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_quy_cach_dong_goi||"ans_quy_cach_dong_goi",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{qcdg:e.target.value})}))},value:t.qcdg})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_date_of_manufacture||"ans_date_of_manufacture",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(Ve.a,{defaultValue:s,onChange:e=>{e=null!=e?e.format("YYYY-MM-DD"):"",this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{nsx:e})}))},placeholder:"Chọn ngày",format:"DD/MM/YYYY"}))),r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_expiry_date||"ans_expiry_date",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(Je,{onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{hd:e.target.value})}))},disabled:o,name:"hd",defaultValue:parseInt(t.hd)},r.a.createElement(Ge.a,{value:1},n.ans_expiry_date_1yr||"ans_expiry_date_1yr"),r.a.createElement(Ge.a,{value:2},n.ans_expiry_date_2yr||"ans_expiry_date_2yr"),r.a.createElement(Ge.a,{value:3},n.ans_expiry_date_3yr||"ans_expiry_date_3yr"))))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_tttb_kltb||"ans_tttb_kltb",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{tttb_kltb:e.target.value})}))},value:t.tttb_kltb}))),r.a.createElement(E.a,{span:12},r.a.createElement(Ze,{label:n.ans_dang_bao_che||"ans_dang_bao_che",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:o,onChange:e=>{this.props.dispatch(m({sx:Ke({},this.props.mainState.sx,{dang_bao_che:e.target.value})}))},value:t.dang_bao_che})))))}},We=a(66),Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function $e(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const et=C(j),tt=x.a.Item,at=r.a.createContext(),nt={headTitle:"Nguyên liệu",addNewTitle:"Thêm"},rt={fetch:"sx/fetch",update:"sx/updateProduct",delete:"sx/deleteProduct/",changeStatus:"sx/changeStatus"},it=x.a.create()(e=>{let t=e.form,a=(e.index,$e(e,["form","index"]));return r.a.createElement(at.Provider,{value:t},r.a.createElement("tr",a))});class st extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"product_id":let e=this.props.products;return r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{let a=t.props.children.split("-");return a&&a[3]&&(a=a[3].trim()),!1},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,style:{width:200},placeholder:"Chọn VT"},e.map(e=>r.a.createElement(w.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `)));case"sl_1000":case"sl_nvl":case"price":return r.a.createElement(We.a,{formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")});case"hu_hao":return r.a.createElement(We.a,{min:0,max:100,formatter:e=>`${e}%`,parser:e=>e.replace("%","")});case"nsx":case"hd":return r.a.createElement(Ve.a,{placeholder:"Chọn ngày",format:"DD/MM/YYYY"});default:return r.a.createElement(b.a,null)}}),this.handleChange=(e=>{console.log(e)}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,$e(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(at.Consumer,null,e=>{const l=e.getFieldDecorator;let h;return s&&(h=s[n],"ngay_san_xuat"!=n&&"ngay_het_han"!=n||(h=Qe()(h)).isValid()||(h=null)),r.a.createElement("td",o,t?r.a.createElement(tt,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:h})(this.getInput())):o.children)})}}var ot=class extends r.a.Component{constructor(e){super(e),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.changeStatus=((e,t)=>{this.setState({loading:!0});let a={ids:this.state.selectedRowKeys,type:t,status:e};fetch(ISD_BASE_URL+rt.changeStatus,{method:"POST",headers:I(),body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(this.fetchSelectedProduct(),d.a.success(e.message)),this.setState({selectedRowKeys:[],loading:!1})}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.isEditing=(e=>e.key===this.props.mainState.phieuAction.editingKey),this.cancel=(e=>{this.props.dispatch(m({phieuAction:Xe({},this.props.mainState.phieuAction,{editingKey:""})}))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+rt.delete+e.id,{headers:I()}).then(e=>e.json()).then(t=>{if("error"==t.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let a=this.props.mainState.sx.products.filter(t=>t.key!=e.id);this.props.dispatch(m({sx:Xe({},this.props.mainState.sx,{products:a})})),d.a.success(t.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.props.mainState.sx.products.filter(t=>t.key!=e.key);this.props.dispatch(m({sx:Xe({},this.props.mainState.sx,{products:t})}))}}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1},this.columns=[{title:"Công đoạn",dataIndex:"cong_doan",width:200,editable:!0,required:!1},{title:"Mã maquet",dataIndex:"ma_maquet",width:200,editable:!0,required:!0},{title:"Mã NL",dataIndex:"product_id",width:"20%",editable:!0,render:(e,t)=>{let a=e,n="kg";return this.state.productList&&this.state.productList[e]&&(a=this.state.productList[e].name,n=this.state.productList[e].unit),r.a.createElement("span",null,e," - ",a," - ",n)}},{title:"SL cho 1000.000 viên/lọ/gói",dataIndex:"sl_1000",editable:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Hư hao",dataIndex:"hu_hao",width:"100",editable:!0,render:(e,t)=>`${e}%`},{title:"SL NVL cần",dataIndex:"sl_nvl",editable:!0,required:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Actions",dataIndex:"operation",width:100,render:(e,t)=>{if(this.isReadOnly())return"";const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(at.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}showCheckStatus(e){if(e){let t="info";return"2"==e&&(t="error"),"1"==e&&(t="success"),r.a.createElement(c.a,{message:et[e].text,type:t,showIcon:!0})}return r.a.createElement(c.a,{message:et[0].text,type:"info",showIcon:!0})}addNewRow(){let e=(this.props.mainState.sx||[]).products,t=this.props.mainState.phieuAction.editingKey;if(void 0!==t&&""!==t)return!1;let a=this.getDefaultFields();a=Xe({},a,{key:e.length+1}),this.props.dispatch(m({sx:Xe({},this.props.mainState.sx,{products:[...e,a]}),phieuAction:Xe({},this.props.mainState.phieuAction,{editingKey:a.key})}))}getDefaultFields(){return{ma_sx:"",ma_maquet:"",product_id:"",cong_doan:"",sl_1000:"",sl_nvl:"",hu_hao:"",status:"",create_on:""}}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}edit(e){this.props.dispatch(m({phieuAction:Xe({},this.props.mainState.phieuAction,{editingKey:e})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.props.mainState.sx.products];let r=this.props.mainState.sx.ma_sx||"";const i=n.findIndex(e=>t===e.key);if(i>-1){const e=n[i];let t=Xe({},e,a,{ma_sx:r});if(!n.id&&!r)return n.splice(i,1,Xe({},t)),this.props.dispatch(m({sx:Xe({},this.props.mainState.sx,{products:n}),phieuAction:Xe({},this.props.mainState.phieuAction,{editingKey:""})})),!1;r&&fetch(ISD_BASE_URL+rt.update,{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(i,1,Xe({},t,e.data)),this.props.dispatch(m({sx:Xe({},this.props.mainState.sx,{products:n}),phieuAction:Xe({},this.props.mainState.phieuAction,{editingKey:""})})),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchProduct(){fetch(ISD_BASE_URL+"sx/fetchProductDetailsList",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({products:e.data})),this.setState({productList:C(e.data,"product_id")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchSelectedProduct(){let e=this.props.mainState.sx.ma_sx;this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+`sx/fetchSelectedProduct/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({sx:Xe({},this.props.mainState.sx,{products:e.data})})):d.a.error(e.message),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}getStatusMenu(e){const t=j.map(t=>r.a.createElement(p.a.Item,{key:t.id},r.a.createElement("a",{onClick:()=>{this.changeStatus(t.id,e)},rel:"noopener noreferrer"},t.text)));return r.a.createElement(p.a,null,t)}componentDidMount(){var e=this.props.mainState;let t=e.products,a=e.sx;t.length||this.fetchProduct(),a.ma_sx&&this.fetchSelectedProduct()}render(){const e={body:{row:it,cell:st}};let t=this.props.mainState.products,a=this.columns.map(e=>e.editable?Xe({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,products:t})}):e);a=a.filter(e=>{if(this.props.isQA||this.props.isQC){if("operation"==e.dataIndex)return!1;if(this.props.isQC&&"qa_check"==e.dataIndex)return!1}return!0});let n=this.props.mainState.sx.products||[];const i={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},nt.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},this.isReadOnly()?null:r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},nt.addNewTitle))))),r.a.createElement(A.a,{rowSelection:i,components:e,bordered:!0,dataSource:n,columns:a,rowClassName:"editable-row",loading:this.state.loadProduct}))}},lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const ht=x.a.Item;w.a.Option,b.a.TextArea;var dt=class extends r.a.Component{constructor(e){super(e),this.pheDuyet=this.pheDuyet.bind(this),this.isNhomKHSX=this.isNhomKHSX.bind(this),this.isNhomDBCL=this.isNhomDBCL.bind(this),this.isNhomGD=this.isNhomGD.bind(this),this.state={productListbyCateList:[]}}pheDuyet(e,t){this.setState({loading:!0});let a={type:e,value:t,ma_sx:this.props.mainState.sx.ma_sx};fetch(ISD_BASE_URL+"sx/pheduyet",{method:"POST",headers:I(),body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({sx:lt({},this.props.mainState.sx,{refresh:!0},e.data)})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình phê duyệt!")})}componentDidMount(){}isNhomKHSX(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("duyet_khsx")}isNhomDBCL(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("duyet_dbcl")}isNhomGD(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("duyet_gd")}render(){var e=this.props.mainState;let t=e.sx;return e.phieuAction,r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24},r.a.createElement(ht,{label:"GHI CHÚ",labelCol:{span:24},wrapperCol:{span:24}},r.a.createElement(b.a.TextArea,{rows:4,readOnly:!1,onChange:e=>{this.props.dispatch(m({sx:lt({},this.props.mainState.sx,{note:e.target.value})}))},placeholder:"Hãy nhập ghi chú ở đây",autosize:{minRows:6},defaultValue:t.note})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{className:"align_center",span:8},r.a.createElement("label",null,"P. KHSX"),r.a.createElement("br",null),r.a.createElement(K.a,{checked:!!t.pkhsx,checkedChildren:"Đã ký",unCheckedChildren:"Chờ duyệt",onChange:e=>{this.pheDuyet("pkhsx",e)}})),r.a.createElement(E.a,{className:"align_center",span:8},"P. ĐBCL",r.a.createElement("br",null),r.a.createElement(K.a,{checked:!!t.pdbcl,checkedChildren:"Đã ký",unCheckedChildren:"Chờ duyệt",onChange:e=>{this.pheDuyet("pdbcl",e)}})),r.a.createElement(E.a,{className:"align_center",span:8},"Giám Đốc",r.a.createElement("br",null),r.a.createElement(K.a,{checked:!!t.gd,checkedChildren:"Đã ký",unCheckedChildren:"Chờ duyệt",onChange:e=>{this.pheDuyet("gd",e)}}))))}},ct=(a(404),a(403),a(402),a(344)),pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var ut=class extends n.Component{constructor(e){super(e),this.deleteTask=(e=>{e&&fetch(ISD_BASE_URL+`gantt/delete/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?(this.props.dispatch(m({showLogin:!0})),d.a.error(e.message,3)):d.a.success(e.message)}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá quy trình!",3),console.log(e)})}),this.deleteLink=(e=>{e&&fetch(ISD_BASE_URL+`gantt/deleteLink/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),this.props.dispatch(m({showLogin:!0}))):d.a.success(e.message)}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)})}),this.saveData=this.saveData.bind(this),this.getQuyTrinhId=this.getQuyTrinhId.bind(this),this.getMaSx=this.getMaSx.bind(this),this.clearAllEvents=this.clearAllEvents.bind(this),this.expandAllTask=this.expandAllTask.bind(this),this.addControlToLightBox=this.addControlToLightBox.bind(this),this.fetchUsers=this.fetchUsers.bind(this),this.todayMarker=null,this.state={loading:!1,resetEvents:!1}}setZoom(e){switch(e){case"Hours":gantt.config.scale_unit="day",gantt.config.date_scale="%d %M",gantt.config.scale_height=60,gantt.config.min_column_width=30,gantt.config.subscales=[{unit:"hour",step:1,date:"%H"}];break;case"Days":gantt.config.min_column_width=70,gantt.config.scale_unit="week",gantt.config.date_scale="#%W",gantt.config.subscales=[{unit:"day",step:1,date:"%d %M"}],gantt.config.scale_height=60;break;case"Months":gantt.config.min_column_width=70,gantt.config.scale_unit="month",gantt.config.date_scale="%F",gantt.config.scale_height=60,gantt.config.subscales=[{unit:"week",step:1,date:"#%W"}]}}expandAllTask(e){if(e){let t=[];return e.data&&(t=e.data.map(e=>pt({},e,{open:!0}))),{links:e.links,data:t}}}updateGanttDataToState(e){let t=this.expandAllTask(e)||e;this.props.dispatch(m({ganttData:t}))}fetchTasks(){let e;switch(this.setState({loading:!0}),this.props.type){case"allPlan":e=ISD_BASE_URL+"gantt/allPlan";break;case"theo_lenh_sx":let t=this.getMaSx();e=ISD_BASE_URL+"gantt/fetchTasksByMaSx/"+t;break;default:let a=this.getQuyTrinhId();e=ISD_BASE_URL+"gantt/fetchTasks/"+a}fetch(e,{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?(this.renderGantt(),d.a.warning(e.message,3)):e.data&&this.updateGanttDataToState(e.data),this.setState({loading:!1}),this.renderGantt()}).catch(e=>{this.renderGantt(),d.a.error("Có lỗi khi tải dữ liệu quy trình sản xuất!",3),console.log(e),this.setState({loading:!1})})}fetchUsers(){this.setState({loading:!0}),fetch(ISD_BASE_URL+"gantt/users",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&(this.props.dispatch(m({worker_and_users:{workers:e.data.workers,check_users:e.data.check_users,group_users:e.data.group_users}})),this.addControlToLightBox()),this.setState({loading:!1})}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu nhân sự và người phê duyệt!",3),console.log(e),this.setState({loading:!1})})}renderGantt(e){let t=this.props.mainState.ganttData;t=t||{},gantt.clearAll(),gantt.parse(t),gantt.render()}static getDerivedStateFromProps(e,t){return e.mainState.quyTrinhSx.edit.id&&e.mainState.quyTrinhSx.edit.id!==t.quyTrinhId?{quyTrinhId:e.mainState.quyTrinhSx.edit.id,resetEvents:!0}:e.mainState.sx.ma_sx&&e.mainState.sx.ma_sx!==t.ma_sx?{ma_sx:e.mainState.sx.ma_sx,resetEvents:!0}:e.mainState.refreshGantt?{resetEvents:!0}:null}componentDidUpdate(){this.state.resetEvents&&(this.clearAllEvents(),this.initGanttEvents(),this.setState({resetEvents:!1}),this.renderGantt())}saveData(e){fetch(ISD_BASE_URL+"gantt/update",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0})),this.updateGanttDataToState(e.data)):e.data&&(this.updateGanttDataToState(e.data),d.a.success(e.message)),this.renderGantt()}).catch(e=>{this.fetchTasks(),console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa quy trình!")})}saveLink(e){fetch(ISD_BASE_URL+"gantt/updateLink",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):e.data&&(this.updateGanttDataToState(e.data),d.a.success(e.message)),this.renderGantt()}).catch(e=>{this.fetchTasks(),console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình update link!")})}getQuyTrinhId(){return this.props.mainState.quyTrinhSx.edit?this.props.mainState.quyTrinhSx.edit.id:""}getMaSx(){return this.props.mainState.sx.ma_sx?this.props.mainState.sx.ma_sx:""}updateTask(e,t,a){let n={text:a.text,start_date:Qe()(a.start_date).format("YYYY-MM-DD HH:mm:ss"),duration:a.duration,parent:a.parent,progress:a.progress||0,user:a.user,check_user:a.check_user,group_user:a.group_user,note:a.note};if("theo_lenh_sx"==this.props.type){let e=this.getMaSx();n.ma_sx=e}else{let e=this.getQuyTrinhId();n.quy_trinh_id=e}"updated"==t&&(n.id=e),this.saveData(n)}updateLink(e,t,a){let n={source:a.source,target:a.target,type:a.type};if("theo_lenh_sx"==this.props.type){let e=this.getMaSx();n.ma_sx=e}else{let e=this.getQuyTrinhId();n.quy_trinh_id=e}this.saveLink(n)}clearAllEvents(){let e=this.props.mainState;e&&e.ganttEvents&&(e.ganttEvents.forEach(e=>{gantt.detachEvent(e)}),gantt.ganttEventsInitialized=!1)}initGanttEvents(){if(gantt.ganttEventsInitialized)return;gantt.ganttEventsInitialized=!0;let e=[];e.push(gantt.attachEvent("onAfterTaskAdd",(e,t)=>{this.updateTask(e,"inserted",t)})),e.push(gantt.attachEvent("onAfterTaskUpdate",(e,t)=>{this.updateTask(e,"updated",t)})),e.push(gantt.attachEvent("onAfterTaskDelete",e=>{this.deleteTask(e)})),e.push(gantt.attachEvent("onAfterLinkAdd",(e,t)=>{this.updateLink(e,"inserted",t)})),e.push(gantt.attachEvent("onAfterLinkDelete",(e,t)=>{this.deleteLink(e)})),e.push(gantt.attachEvent("onLightboxSave",function(e,t){return!!t.text||(gantt.message({type:"error",text:"Hãy nhập mô tả công việc!"}),!1)})),this.props.dispatch(m({ganttEvents:e,refreshGantt:!1}))}taskClass(){gantt.templates.task_class=function(e,t,a){let n="",r=parseFloat(a.progress)||0;return 0==r?n+=" not_started":r<.5?n+=" high":r<.8?n+=" medium":r<.9?n+=" low":1==r&&(n+=" task_done"),n+=0==a.$level?" gantt_project":""}}componentDidMount(){let e=this.props.mainState.ganttData;gantt.config.xml_date="%Y-%m-%d %H:%i:%s",gantt.config.date_grid="%d-%m-%Y",gantt.config.grid_width=450,gantt.templates.rightside_text=function(e,t,a){return"<span style='text-align:left;'>"+Math.round(100*a.progress)+"% </span>"},gantt.config.columns=[{name:"text",hide:!0,tree:!0},{name:"start_date",hide:!0,align:"center"},{name:"duration",hide:!1,align:"center"},{name:"add",hide:!1,align:"center"}],gantt.config.show_links=!0,gantt.config.readonly=!1,gantt.config.drag_move=!0,"allPlan"==this.props.type&&(gantt.config.drag_move=!1,gantt.config.readonly=!0,gantt.config.show_links=!1,gantt.config.columns=[{name:"text",hide:!0,tree:!0},{name:"start_date",hide:!0,align:"center"},{name:"duration",hide:!0,align:"center"}]),gantt.config.start_date=gantt.date.day_start(new Date),gantt.config.order_branch=!0,gantt.config.order_branch_free=!0,gantt.init(this.ganttContainer),this.addControlToLightBox(),this.taskClass(),gantt.parse(e),this.fetchTasks()}setPosition(){this.todayMarker.style.left=gantt.posFromDate(new Date("2018-08-08"))+"px"}addControlToLightBox(){let e=this.props.mainState.worker_and_users;if(e){let t=e.workers||[],a=(e.check_users,e.group_users||[]),n=[{key:"",label:"Người thực hiện"}];n=n.concat(t.map(e=>({key:e.id,label:e.ma_ns+" - "+e.name})));let r=[{key:"",label:"Phòng ban"}];r=r.concat(a.map(e=>({key:e.ma_pb,label:e.ma_pb+" - "+e.name}))),gantt.config.lightbox.sections=[{name:"description",height:38,map_to:"text",type:"textarea",focus:!0},{name:"group_user",height:25,map_to:"group_user",type:"select",options:r},{name:"user",height:25,map_to:"user",type:"select",options:n},{name:"note",height:38,map_to:"note",type:"textarea"},{name:"time",type:"duration",map_to:"auto"}],gantt.locale.labels.section_group_user="Phòng ban",gantt.locale.labels.section_user="Người thực hiện",gantt.locale.labels.section_progress="Số % hoàn thành",gantt.locale.labels.section_note="Ghi chú"}else this.fetchUsers()}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loading",style:{display:this.state.loading?"block":"none"}},r.a.createElement(ct.a,{size:"large"})),r.a.createElement("div",{ref:e=>{this.ganttContainer=e},style:{width:"100%",height:"100%"}}))}},mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var gt=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),this.validBeforeSave()&&fetch(ISD_BASE_URL+"sx/update",{method:"POST",headers:I(),body:JSON.stringify(this.props.mainState.sx)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({sx:{refresh:!0},phieuAction:{}})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.openQTSX=this.openQTSX.bind(this),this.loadQuyTrinhMau=this.loadQuyTrinhMau.bind(this)}loadQuyTrinhMau(e){let t=this.props.mainState.sx,a=t&&t.nsx?t.nsx:"",n=t&&t.ma_sx?t.ma_sx:"";n&&e&&fetch(ISD_BASE_URL+`gantt/fetchTasksFromSample/${n}/${e}/${a}`,{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({ganttData:e.data,refreshGantt:!0}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu quy trình sản xuất!",3),console.log(e)})}validBeforeSave(){return!!this.props.mainState.sx.so||(d.a.error("Mã sản xuất không được để trống"),!1)}openQTSX(e){let t={quyTrinhTheoLenh:mt({},this.props.mainState.quyTrinhTheoLenh,{showGantt:e})};e||(t.ganttData=O),this.props.dispatch(m(t))}cancel(){this.props.dispatch(m({phieuAction:mt({},this.props.mainState.phieuAction,{addNewItem:!1})}))}render(){var e=this.props.mainState;let t=e.phieuAction,a=e.quyTrinhTheoLenh,n=e.quyTrinhSx,i=e.ganttData,s=n&&n.listQuyTrinh?n.listQuyTrinh:[];return r.a.createElement("div",null,a.showGantt?r.a.createElement("div",{className:"wrap-gantt-chart"},r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quy trình sản xuất")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},i.data&&!i.data.length?r.a.createElement(w.a,{showSearch:!0,style:{minWidth:200},placeholder:"Chọn quy trình mẫu",onChange:e=>{e&&this.loadQuyTrinhMau(e)}},r.a.createElement(w.a.Option,{value:""},"Chọn quy trình mẫu"),s.map(e=>r.a.createElement(w.a.Option,{value:e.id,key:e.id},e.name))):null,r.a.createElement(v.a,{onClick:()=>this.openQTSX(!1),style:{marginLeft:10},icon:"left",type:"default"},"Quay lại form"))))),r.a.createElement(ut,{type:"theo_lenh_sx",dispatch:this.props.dispatch,mainState:this.props.mainState})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Lệnh sản xuất")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},t&&"edit"==t.action?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:this.handleSubmit,type:"primary",htmlType:"button",icon:"save"},"Lưu"),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel()},r.a.createElement(v.a,{style:{marginLeft:10},type:"danger"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:()=>this.openQTSX(!0),style:{marginRight:10},icon:"share-alt",type:"primary"},"Quy trình SX"),r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieuAction:mt({},this.props.mainState.phieuAction,{action:"edit"})}))},type:"primary",htmlType:"button",icon:"edit"},"Sửa"),r.a.createElement(v.a,{onClick:()=>this.cancel(),style:{marginLeft:10},icon:"left",type:"default"},"Quay lại")))))),r.a.createElement(He,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(ot,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(dt,{dispatch:this.props.dispatch,mainState:this.props.mainState})))}}),_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function ft(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}C(N);const yt=x.a.Item,Et=r.a.createContext(),bt={headTitle:"Quản lý sản xuất",addNewTitle:"Thêm lệnh sản xuất"},xt={fetch:"sx/fetch",delete:"sx/delete/"},St=x.a.create()(e=>{let t=e.form,a=(e.index,ft(e,["form","index"]));return r.a.createElement(Et.Provider,{value:t},r.a.createElement("tr",a))});class kt extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,ft(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Et.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(yt,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var vt=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+xt.delete+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],addNewItem:!1},this.columns=[{title:"Mã sản xuất",dataIndex:"so",editable:!1},{title:"Sản phẩm",dataIndex:"ma_sp",editable:!1},{title:"Cỡ lô",dataIndex:"co_lo",editable:!1},{title:"Số lô",dataIndex:"so_lo",editable:!1},{title:"NSX",dataIndex:"nsx",editable:!1},{title:"Phê duyệt",children:[{title:"PKHSX",dataIndex:"pkhsx",render:(e,t)=>r.a.createElement(Fe.a,{text:e?"Đã duyệt":"Chưa duyệt",status:e?"success":"error"})},{title:"PĐBCL",dataIndex:"pdbcl",render:(e,t)=>r.a.createElement(Fe.a,{text:e?"Đã duyệt":"Chưa duyệt",status:e?"success":"error"})},{title:"Giám đốc",dataIndex:"gd",render:(e,t)=>r.a.createElement(Fe.a,{text:e?"Đã duyệt":"Chưa duyệt",status:e?"success":"error"})}]},{title:"Quy trình",dataIndex:"quy_trinh",editable:!1,render:e=>r.a.createElement("div",null,r.a.createElement(l.a,{type:"form"}),"Quy trình")},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Et.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},r.a.createElement(l.a,{type:"profile"})," Chi tiết")))}}]}getDefaultFields(){return{id:"",ma_sx:"",ma:"",so:"",cong_doan:"",ma_sp:"",co_lo:"",so_lo:"",nsx:"",hd:"",dang_bao_che:"",so_dk:"",qcdg:"",dh:"",tttb_kltb:"",products:[],status:""}}addNewRow(){this.props.dispatch(m({phieuAction:_t({},this.props.mainState.phieuAction,{addNewItem:!0,action:"edit",editingKey:""}),sx:this.getDefaultFields()}))}view(e){var t=this.props.mainState;let a=t.sx,n=t.phieuAction;e&&e.ma_sx&&e.id&&this.props.dispatch(m({sx:_t({},a,e),phieuAction:_t({},n,{addNewItem:!0,action:"view"}),ganttData:O}))}fetchData(){fetch(ISD_BASE_URL+xt.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>_t({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(m({sx:_t({},this.props.mainState.sx,{refresh:!1})}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}fetchQuyTrinhMau(){fetch(ISD_BASE_URL+"quytrinhsx/fetch",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.warning(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):e.data&&this.props.dispatch(m({quyTrinhSx:_t({},this.props.mainState.quyTrinhSx,{listQuyTrinh:e.data})}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu quy trình sản xuất!",3),console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.sx.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData(),this.fetchQuyTrinhMau()}render(){let e=this.props.mainState;const t={body:{row:St,cell:kt}},a=this.columns.map(e=>e.editable?_t({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,e.phieuAction.addNewItem?r.a.createElement(gt,{dispatch:this.props.dispatch,mainState:this.props.mainState}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},bt.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},bt.addNewTitle))))),r.a.createElement(A.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row"})))}},wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const At=x.a.Item,Ct=w.a.Option,It={person:"Người giao hàng"};var Dt=class extends r.a.Component{constructor(e){super(e)}fetchData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}componentDidMount(){this.props.mainState.kho.length||this.fetchData()}render(){var e=this.props.mainState;let t=e.phieunhap,a=e.phieuAction,n=!(!a||"view"!=a.action),i=(t.tinh_trang,""),s=this.props.mainState.kho;return s.length&&(i=s.map(e=>r.a.createElement(Ct,{key:e.id,value:e.ma_kho},e.name))),r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(At,{label:"Số chứng từ",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a,{readOnly:n,onChange:e=>{this.props.dispatch(m({phieunhap:wt({},this.props.mainState.phieunhap,{so_chung_tu:e.target.value})}))},value:t.so_chung_tu}))),r.a.createElement(E.a,{span:12},r.a.createElement(At,{label:It.person,labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a,{readOnly:n,onChange:e=>{this.props.dispatch(m({phieunhap:wt({},this.props.mainState.phieunhap,{nguoi_giao_dich:e.target.value})}))},value:t.nguoi_giao_dich})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(At,{label:"Tại Kho",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(w.a,{disabled:n,onChange:e=>{this.props.dispatch(m({phieunhap:wt({},this.props.mainState.phieunhap,{ma_kho:e})}))},defaultValue:t.ma_kho,placeholder:"Chọn kho"},i))),r.a.createElement(E.a,{span:12},r.a.createElement(At,{label:"Ngày tạo",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a,{readOnly:!0,onChange:e=>{},value:t.create_on||Qe()(new Date).format("DD/MM/YYYY")})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(At,{label:"Mô tả",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieunhap:wt({},this.props.mainState.phieunhap,{note:e.target.value})}))},value:t.note}))),r.a.createElement(E.a,{span:12},r.a.createElement(At,{label:"Địa điểm",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieunhap:wt({},this.props.mainState.phieunhap,{address:e.target.value})}))},value:t.address})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},""!=t.ma_phieu?r.a.createElement(At,{label:"Lý do sửa phiếu",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieunhap:wt({},this.props.mainState.phieunhap,{editNote:e.target.value})}))},value:t.editNote})):null)))}},Tt=a(156),Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var jt=class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1,fileList:this.props.fileList},this.handleChange=(e=>{e.file.status,"done"===e.file.status||e.file.status}),t}render(){const e={action:ISD_BASE_URL+"uploadFile",onChange:this.handleChange,multiple:!1,headers:D(),name:"filename",beforeUpload:(e,t)=>{this.setState({loading:!0})},onSuccess:e=>{let t=ISD_BASE_URL+"upload/"+e.data.filename;this.setState({loading:!1,fileList:[{uid:-1,name:e.data.filename,status:"done",url:t}]}),d.a.success(e.message),this.props.onDone(e.data.filename)},onError:e=>{d.a.error(error.message||"Không upload được file!"),this.setState({loading:!1})}};return r.a.createElement(Tt.a,Nt({},e,{fileList:this.state.fileList}),r.a.createElement(v.a,{loading:this.state.loading},r.a.createElement(l.a,{type:"upload"})," Upload"))}},Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Rt=x.a.Item;var Lt=class extends r.a.Component{verifyProduct(e){let t=this.props.mainState.phieunhap.pheduyet||{};if(!t.note&&!t.file)return d.a.error("Bạn hãy nhập thông tin phê duyệt hoặc tải file đính kèm!"),!1;this.props.changeStatus(t.verifyType,t.id,e,t.note,t.file)}render(){let e=this.props.mainState.phieunhap,t=this.props.mainState.ans_language,a=e.pheduyet||{};return r.a.createElement(x.a,null,r.a.createElement(Rt,{label:t.ans_approval_content||"ans_approval_content"},r.a.createElement(b.a.TextArea,{autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieunhap:Ot({},this.props.mainState.phieunhap,{pheduyet:Ot({},this.props.mainState.phieunhap.pheduyet,{note:e.target.value})})}))},value:a.note})),r.a.createElement(Rt,{label:t.ans_attach_file_option||"ans_attach_file_option"},r.a.createElement(jt,{fileList:[],onDone:e=>{this.props.dispatch(m({phieunhap:Ot({},this.props.mainState.phieunhap,{pheduyet:Ot({},this.props.mainState.phieunhap.pheduyet,{file:e})})}))},mainState:this.props.mainState,dispatch:this.props.dispatch})),r.a.createElement(Rt,null,r.a.createElement(S.a,{title:t.ans_confirm_approval||"ans_confirm_approval",onConfirm:()=>this.verifyProduct(1)},r.a.createElement(v.a,{type:"primary",style:{marginRight:10}},r.a.createElement(l.a,{type:"check-circle"})," ",t.ans_approval||"ans_approval")),r.a.createElement(S.a,{title:t.ans_confirm_approval||"ans_confirm_approval",onConfirm:()=>this.verifyProduct(0)},r.a.createElement(v.a,{type:"danger",ghost:!0},r.a.createElement(l.a,{type:"exclamation-circle"}),t.ans_not_approval||"ans_not_approval"))))}},Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function qt(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}C(j);const Bt=x.a.Item,Ut=r.a.createContext(),Pt={headTitle:"Vật tư",addNewTitle:"Thêm vật tư"},Yt={fetch:"phieunhap/fetch",update:"phieunhap/updateProduct",delete:"phieunhap/deleteProduct/",changeStatus:"phieunhap/changeStatus"},Ft=x.a.create()(e=>{let t=e.form,a=(e.index,qt(e,["form","index"]));return r.a.createElement(Ut.Provider,{value:t},r.a.createElement("tr",a))});class zt extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"product_id":let e=this.props.products;return r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{let a=t.props.children.split("-");return a&&a[3]&&(a=a[3].trim()),console.log(a,this.props),!1},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,style:{width:200},placeholder:"Chọn VT"},e.map(e=>r.a.createElement(w.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `)));case"sl_thucnhap":case"sl_chungtu":case"price":return r.a.createElement(We.a,{formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")});case"ngay_san_xuat":case"ngay_het_han":return r.a.createElement(Ve.a,{placeholder:"Chọn ngày",format:"DD/MM/YYYY"});default:return r.a.createElement(b.a,null)}}),this.handleChange=(e=>{console.log(e)}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,qt(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Ut.Consumer,null,e=>{const l=e.getFieldDecorator;let h;return s&&(h=s[n],"ngay_san_xuat"!=n&&"ngay_het_han"!=n||(h=Qe()(h)).isValid()||(h=null)),r.a.createElement("td",o,t?r.a.createElement(Bt,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:h})(this.getInput())):o.children)})}}var Qt=class extends r.a.Component{constructor(e){super(e),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.changeStatus=((e,t,a,n,r)=>{this.setState({loading:!0});let i={id:t,type:e,status:a,note:n,file:r};fetch(ISD_BASE_URL+Yt.changeStatus,{method:"POST",headers:I(),body:JSON.stringify(i)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(this.fetchSelectedProduct(),this.closeVerifyModal(),d.a.success(e.message)),this.setState({selectedRowKeys:[],loading:!1})}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.isEditing=(e=>e.key===this.props.mainState.phieuAction.editingKey),this.cancel=(e=>{this.props.dispatch(m({phieuAction:Mt({},this.props.mainState.phieuAction,{editingKey:""})}))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Yt.delete+e.id,{headers:I()}).then(e=>e.json()).then(t=>{if("error"==t.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let a=this.props.mainState.phieunhap.products.filter(t=>t.key!=e.id);this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:a})})),d.a.success(t.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.props.mainState.phieunhap.products.filter(t=>t.key!=e.key);this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:t})}))}}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1},this.changeStatus=this.changeStatus.bind(this);let t=this.props.mainState.ans_language;this.columns=[{title:"Mã Lô",dataIndex:"ma_lo",width:120,editable:!0,required:!1},{title:"Mã VT",dataIndex:"product_id",width:150,editable:!0,required:!0},{title:"Quy cách",dataIndex:"label",width:100,editable:!0,required:!0},{title:"Đv",dataIndex:"unit",width:80,editable:!0},{title:"SL chứng từ",dataIndex:"sl_chungtu",width:150,editable:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"SL thực",dataIndex:"sl_thucnhap",width:150,editable:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Đơn giá",dataIndex:"price",width:150,editable:!0,required:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Ngày SX",dataIndex:"ngay_san_xuat",width:"200px",editable:!0,required:!1,render:(e,t)=>e?Qe()(e).format("DD/MM/YYYY"):"ans_do_not_enter"},{title:"Ngày Hết Hạn",dataIndex:"ngay_het_han",width:"200px",editable:!0,required:!1,render:(e,t)=>e?Qe()(e).format("DD/MM/YYYY"):""},{title:"Actions",dataIndex:"operation",width:150,render:(e,a)=>{if(this.isReadOnly())return"";const n=this.isEditing(a);return r.a.createElement("div",{style:{minWidth:100}},n?r.a.createElement("span",null,r.a.createElement(Ut.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,a.key),style:{marginRight:8}},r.a.createElement(l.a,{type:"save"}),t.ans_save||"ans_save"))," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(a.key)},r.a.createElement("a",{href:"javascript:;"},r.a.createElement(l.a,{type:"close"}),t.ans_cancel||"ans_cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(a.key)},r.a.createElement(l.a,{type:"edit"}),t.ans_edit||"ans_edit")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(a)},r.a.createElement("a",{href:"javascript:;"},r.a.createElement(l.a,{type:"delete"}),t.ans_delete||"ans_delete"))))}}]}addNewRow(){let e=this.props.mainState.phieunhap.products,t=this.props.mainState.phieuAction.editingKey;if(void 0!==t&&""!==t)return!1;let a=this.getDefaultFields();a=Mt({},a,{key:e.length+1}),this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:[a,...e]}),phieuAction:Mt({},this.props.mainState.phieuAction,{editingKey:a.key})}))}getDefaultFields(){return{ma_phieu:"",ma_lo:"",product_id:"",label:"",unit:"kg",sl_chungtu:"1",sl_thucnhap:"1",price:0,qc_check:"2",qa_check:"2",ngay_het_han:"",ngay_san_xuat:""}}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}edit(e){this.props.dispatch(m({phieuAction:Mt({},this.props.mainState.phieuAction,{editingKey:e})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.props.mainState.phieunhap.products];let r=this.props.mainState.phieunhap.ma_phieu||"";const i=n.findIndex(e=>t===e.key);if(i>-1){const e=n[i];let t=Mt({},e,a,{ma_phieu:r,ngay_san_xuat:a.ngay_san_xuat?a.ngay_san_xuat.format("YYYY-MM-DD"):"",ngay_het_han:a.ngay_het_han?a.ngay_het_han.format("YYYY-MM-DD"):""});if(!n.id&&!r)return n.splice(i,1,Mt({},t)),this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:n}),phieuAction:Mt({},this.props.mainState.phieuAction,{editingKey:""})})),!1;r&&fetch(ISD_BASE_URL+Yt.update,{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(i,1,Mt({},t,e.data)),this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:n}),phieuAction:Mt({},this.props.mainState.phieuAction,{editingKey:""})})),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchProduct(){fetch(ISD_BASE_URL+"phieunhap/fetchProductDetailsList",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({products:e.data})),this.setState({productList:C(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchSelectedProduct(){let e=this.props.mainState.phieunhap.ma_phieu;this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+`phieunhap/fetchSelectedProduct/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:e.data})})):(d.a.error(e.message),this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{products:[]})}))),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}closeVerifyModal(){this.props.dispatch(m({phieunhap:Mt({},this.props.mainState.phieunhap,{pheduyet:Mt({},this.props.mainState.phieunhap.phieunhap,{openModal:!1})})}))}componentDidMount(){var e=this.props.mainState;let t=e.products,a=e.phieunhap;t.length||this.fetchProduct(),a.ma_phieu&&this.fetchSelectedProduct()}render(){const e={body:{row:Ft,cell:zt}};var t=this.props.mainState;let a=t.phieuAction,n=t.phieunhap.pheduyet||{},i=this.props.mainState.products,s=this.columns.map(e=>e.editable?Mt({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required,products:i})}):e);s=s.filter(e=>!(a.editingKey&&""!=a.editingKey||1==this.props.tinh_trang)||"qa_check"!=e.dataIndex&&"qc_check"!=e.dataIndex);let o=this.props.mainState.phieunhap.products||[];const l={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},Pt.headTitle)),this.isReadOnly()?null:r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},Pt.addNewTitle))))),n.openModal?r.a.createElement(Y.a,{width:"60%",style:{top:20},title:"Form phê duyệt sản phẩm",visible:n.openModal,onCancel:()=>{this.closeVerifyModal()},onOk:()=>{},footer:null},r.a.createElement(Lt,{changeStatus:this.changeStatus,mainState:this.props.mainState,dispatch:this.props.dispatch})):null,r.a.createElement(A.a,{rowSelection:l,components:e,bordered:!0,dataSource:o,columns:s,rowClassName:"editable-row",loading:this.state.loadProduct,scroll:{x:1500}}))}},Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var Vt=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.handleSubmit=(e=>{e.preventDefault(),this.validBeforeSave()&&fetch(ISD_BASE_URL+"phieunhap/update",{method:"POST",headers:I(),body:JSON.stringify(this.props.mainState.phieunhap)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({phieunhap:{refresh:!0},phieuAction:{}})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),t}validBeforeSave(){let e=this.props.mainState.phieunhap;return e.ma_kho?e.products.length?!(""!=e.ma_phieu&&!e.editNote&&(d.a.error("Hãy nhập lý do sửa phiếu"),1)):(d.a.error("Chưa có sản phẩm nào trong phiếu này."),!1):(d.a.error("Mã kho không được để trống"),!1)}pheDuyet(e){this.setState({loading:!0});let t={value:e,ma_phieu:this.props.mainState.phieunhap.ma_phieu};fetch(ISD_BASE_URL+"phieunhap/pheduyet",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({phieunhap:Gt({},this.props.mainState.phieunhap,{refresh:!0},e.data)})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình phê duyệt!")})}cancel(){this.props.dispatch(m({phieuAction:Gt({},this.props.mainState.phieuAction,{addNewItem:!1})}))}render(){var e=this.props.mainState;let t=e.phieuAction,a=1==e.phieunhap.tinh_trang;return r.a.createElement("div",null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin phiếu nhập")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},1!=a?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{title:"Bạn chắc chắn muốn duyệt?",onConfirm:()=>this.pheDuyet(1)},r.a.createElement(v.a,{style:{marginRight:10},icon:"check-circle",type:"primary"},"Phê duyệt")),t&&"edit"==t.action?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:this.handleSubmit,type:"primary",htmlType:"button",icon:"save"},"Lưu"),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel()},r.a.createElement(v.a,{style:{marginLeft:10},type:"danger"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,this.props.isInventoryOwner?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá phiếu này?",onConfirm:()=>this.props.onDelete()},r.a.createElement(v.a,{style:{marginRight:10},icon:"close-circle",type:"danger"},"Xoá")),r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieuAction:Gt({},this.props.mainState.phieuAction,{action:"edit"})}))},type:"primary",htmlType:"button",icon:"edit"},"Sửa")):r.a.createElement(v.a,{ghost:!0,disabled:!0},r.a.createElement(Fe.a,{status:"success",text:"Đã duyệt"})))):r.a.createElement(v.a,{ghost:!0,disabled:!0},r.a.createElement(Fe.a,{status:"success",text:"Đã duyệt"})),r.a.createElement(v.a,{onClick:()=>this.cancel(),style:{marginLeft:10},icon:"left",type:"default"},"Quay lại"))))),r.a.createElement(Dt,{pheDuyet:e=>{this.pheDuyet(e)},isInventoryOwner:this.props.isInventoryOwner,dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(Qt,{tinh_trang:a,isQA:this.props.isQA,isQC:this.props.isQC,dispatch:this.props.dispatch,mainState:this.props.mainState}))}}),Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Zt(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Jt=C(N),Ht=x.a.Item,Wt=r.a.createContext(),Xt={headTitle:"Quản lý phiếu nhập",addNewTitle:"Tạo phiếu nhập mới"},$t={fetch:"phieunhap/fetch",delete:"phieunhap/delete/"},ea=x.a.create()(e=>{let t=e.form,a=(e.index,Zt(e,["form","index"]));return r.a.createElement(Wt.Provider,{value:t},r.a.createElement("tr",a))});class ta extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,Zt(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Wt.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(Ht,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var aa=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.delete=(()=>{let e=this.props.mainState.phieunhap.id;e&&fetch(ISD_BASE_URL+$t.delete+e,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.props.dispatch(m({phieunhap:{},phieuAction:Kt({},this.props.mainState.phieuAction,{addNewItem:!1})}))}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)})}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;new RegExp(e,"gi"),this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.state={data:[],addNewItem:!1},this.columns=[{title:"Mã Kho",dataIndex:"ma_kho",editable:!1},{title:"Người giao hàng",dataIndex:"nguoi_giao_dich",editable:!1},{title:"Mô tả",dataIndex:"note",editable:!1},{title:"Ngày Tạo",dataIndex:"create_on",editable:!1},{title:"Người Tạo",dataIndex:"username",render:(e,t)=>t.name||e},{title:"Tình trạng",dataIndex:"tinh_trang",editable:!1,render:(e,t)=>{let a="processing";return"0"==e&&(a="error"),"1"==e&&(a="success"),r.a.createElement(Fe.a,{text:Jt[e].text||e,status:a})}},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Wt.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},"Xem chi tiết")))}}]}getDefaultFields(){return{id:"",ma_kho:"",ma_phieu:"",nguoi_giao_dich:"",so_chung_tu:"",note:"",address:"",products:[],tinh_trang:"2"}}addNewRow(){this.props.dispatch(m({phieuAction:Kt({},this.props.mainState.phieuAction,{addNewItem:!0,action:"edit",editingKey:""}),phieunhap:this.getDefaultFields()}))}isQC(){return!0}isQA(){return!0}isInventoryOwner(){return!0}view(e){var t=this.props.mainState;let a=t.phieunhap,n=t.phieuAction;e&&e.ma_phieu&&e.id&&this.props.dispatch(m({phieunhap:Kt({},a,e),phieuAction:Kt({},n,{addNewItem:!0,action:"view"})}))}fetchData(){fetch(ISD_BASE_URL+$t.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Kt({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(m({phieunhap:Kt({},this.props.mainState.phieunhap,{refresh:!1})}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.phieunhap.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData()}render(){let e=this.props.mainState;const t={body:{row:ea,cell:ta}},a=this.columns.map(e=>e.editable?Kt({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let n=this.state.searchText,i=[...this.state.data];return n&&(i=i.map(e=>-1==`${e.ma_kho}${e.nguoi_giao_dich}${e.note}${e.create_on}${e.username}`.toLowerCase().indexOf(n.toLowerCase())?null:Kt({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,e.phieuAction.addNewItem?r.a.createElement(Vt,{onDelete:()=>this.delete(),isQA:this.isQA(),isQC:this.isQC(),isInventoryOwner:this.isInventoryOwner(),dispatch:this.props.dispatch,mainState:this.props.mainState}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},Xt.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},Xt.addNewTitle))))),r.a.createElement(A.a,{components:t,bordered:!0,dataSource:i,columns:a,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"})))}},na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const ra=x.a.Item,ia=w.a.Option,sa={person:"Người nhận hàng"};var oa=class extends r.a.Component{constructor(e){super(e)}fetchData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}componentDidMount(){this.props.mainState.kho.length||this.fetchData()}render(){var e=this.props.mainState;let t=e.phieuxuat,a=e.phieuXuatAction,n=!(!a||"view"!=a.action),i=(this.props.tinh_trang,""),s=this.props.mainState.kho;return s.length&&(i=s.map(e=>r.a.createElement(ia,{key:e.id,value:e.ma_kho},e.name))),r.a.createElement(x.a,null,r.a.createElement(ra,{label:"Số chứng từ",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:n,onChange:e=>{this.props.dispatch(m({phieuxuat:na({},this.props.mainState.phieuxuat,{so_chung_tu:e.target.value})}))},value:t.so_chung_tu})),r.a.createElement(ra,{label:sa.person,labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:n,onChange:e=>{this.props.dispatch(m({phieuxuat:na({},this.props.mainState.phieuxuat,{nguoi_giao_dich:e.target.value})}))},value:t.nguoi_giao_dich})),r.a.createElement(ra,{label:"Tại Kho",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(w.a,{disabled:n,onChange:e=>{this.props.dispatch(m({phieuxuat:na({},this.props.mainState.phieuxuat,{ma_kho:e})}))},defaultValue:t.ma_kho,placeholder:"Chọn kho"},i)),r.a.createElement(ra,{label:"Mô tả",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieuxuat:na({},this.props.mainState.phieuxuat,{note:e.target.value})}))},value:t.note})),r.a.createElement(ra,{label:"Địa điểm",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieuxuat:na({},this.props.mainState.phieuxuat,{address:e.target.value})}))},value:t.address})),""!=t.ma_phieu?r.a.createElement(ra,{label:"Lý do sửa phiếu",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieuxuat:na({},this.props.mainState.phieuxuat,{editNote:e.target.value})}))},value:t.editNote})):null,r.a.createElement(ra,{label:"Ngày tạo",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:!0,onChange:e=>{},value:t.create_on||Qe()(new Date).format("DD/MM/YYYY")})))}},la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};x.a.Item;const ha={headTitle:"Vật tư của phiếu xuất",addNewTitle:"Thêm vật tư vào phiếu xuất"},da={fetch:"phieuxuat/fetch",update:"phieuxuat/updateProduct",delete:"phieuxuat/deleteProduct/"};var ca=class extends r.a.Component{constructor(e){super(e),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.cancel=(e=>{this.props.dispatch(m({phieuXuatAction:la({},this.props.mainState.phieuXuatAction,{editingKey:""})}))}),this.delete=(e=>{let t=this.props.mainState.phieuxuat.products.filter(t=>t.product_id!=e.product_id);this.props.dispatch(m({phieuxuat:la({},this.props.mainState.phieuxuat,{products:t})}))}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1},this.updateQty=this.updateQty.bind(this),this.columns=[{title:"Mã VT",dataIndex:"product_id",width:150},{title:"Tên VT",dataIndex:"name",width:150},{title:"Số lượng thực xuất",dataIndex:"sl_thucnhap",render:(e,t)=>r.a.createElement(We.a,{value:e,onChange:e=>{if(e<0)return;let a=0;e>(a=t.sl_ton?t.sl_ton:parseFloat(t.so_luong_nhap)-parseFloat(t.sl_thucnhap))&&(d.a.error("Nhập quá số lượng tồn"),e=a),this.updateQty(t,"sl_thucnhap",e)}})},{title:"Ngày SX",dataIndex:"ngay_san_xuat",width:"200px",editable:!1,required:!0,render:(e,t)=>Qe()(e).format("DD/MM/YYYY")},{title:"Ngày Hết Hạn",dataIndex:"ngay_het_han",width:"200px",editable:!1,required:!0,render:(e,t)=>Qe()(e).format("DD/MM/YYYY")},{title:"Action",dataIndex:"delete",render:(e,t)=>this.isReadOnly()?"":r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",onConfirm:()=>this.delete(t)},r.a.createElement(v.a,{type:"danger"},"Delete"))}]}updateQty(e,t,a){let n=e.id,r=this.props.mainState.phieuxuat;if(n&&r.products&&r.products.length){let e=r.products.map(e=>(e.id==n&&(e[t]=a),e));this.props.dispatch(m({phieuxuat:la({},this.props.mainState.phieuxuat,{products:e})}))}}openProductModal(){this.props.dispatch(m({phieuXuatAction:la({},this.props.mainState.phieuXuatAction,{openModal:!0})}))}isReadOnly(){let e=this.props.mainState.phieuXuatAction;return!(!e||"view"!=e.action)}edit(e){this.props.dispatch(m({phieuXuatAction:la({},this.props.mainState.phieuXuatAction,{editingKey:e})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.props.mainState.phieuxuat.products];let r=this.props.mainState.phieuxuat.ma_phieu||"";const i=n.findIndex(e=>t===e.key);if(i>-1){const e=n[i];let t=la({},e,a,{ma_phieu:r,ngay_san_xuat:a.ngay_san_xuat.format("YYYY-MM-DD"),ngay_het_han:a.ngay_het_han.format("YYYY-MM-DD")});if(!n.id&&!r)return n.splice(i,1,la({},t)),this.props.dispatch(m({phieuxuat:la({},this.props.mainState.phieuxuat,{products:n}),phieuXuatAction:la({},this.props.mainState.phieuXuatAction,{editingKey:""})})),!1;r&&fetch(ISD_BASE_URL+da.update,{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(i,1,la({},t,e.data)),this.props.dispatch(m({phieuxuat:la({},this.props.mainState.phieuxuat,{products:n}),phieuXuatAction:la({},this.props.mainState.phieuXuatAction,{editingKey:""})})),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchSelectedProduct(){let e=this.props.mainState.phieuxuat.ma_phieu;this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+`phieuxuat/fetchSelectedProduct/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({phieuxuat:la({},this.props.mainState.phieuxuat,{products:e.data})})):(this.props.dispatch(m({phieuxuat:la({},this.props.mainState.phieuxuat,{products:[]})})),d.a.error(e.message)),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}componentDidMount(){this.props.mainState.phieuxuat.ma_phieu&&this.fetchSelectedProduct()}render(){let e=this.columns,t=this.props.mainState.phieuxuat.products||[];return this.state.selectedRowKeys,this.onSelectChange,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},ha.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},this.isReadOnly()?null:r.a.createElement(v.a,{onClick:()=>this.openProductModal(),type:"primary",icon:"plus"},ha.addNewTitle))))),r.a.createElement(A.a,{bordered:!0,dataSource:t,columns:e,rowClassName:"editable-row",loading:this.state.loadProduct}))}},pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};C(j),x.a.Item;var ua=class extends r.a.Component{constructor(e){super(e),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t})}),this.clearFilters=(()=>{this.setState({filteredInfo:null})}),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e}),this.props.onRowSelection(e)}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1,filteredInfo:null,filterDropdownVisible:!1,searchText:"",filtered:!1},this.columns=[{title:"Mã VT",dataIndex:"product_id",width:150},{title:"Tên VT",dataIndex:"name",width:200},{title:"Mã kho",dataIndex:"ma_kho",width:200},{title:"Số lượng tồn",dataIndex:"sl_thucnhap",width:150,editable:!0},{title:"Ngày Nhập Kho",dataIndex:"create_on",width:"200px",render:(e,t)=>{let a=e.split(",").map(e=>Qe()(e).format("DD/MM/YYYY"));return a.length>1?a.join(","):a}},{title:"Ngày SX",dataIndex:"ngay_san_xuat",width:"200px",editable:!0,required:!0,render:(e,t)=>Qe()(e).format("DD/MM/YYYY")},{title:"Ngày hết hạn",dataIndex:"ngay_het_han",width:"200px",editable:!0,required:!0,render:(e,t)=>Qe()(e).format("DD/MM/YYYY")}]}fetchAllProduct(){this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+"phieuxuat/fetchVerifyProducts",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({productsForExport:e.data})):d.a.error(e.message),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchAllProduct()}render(){let e=this.columns;var t=this.state;let a=t.filteredInfo,n=t.searchText;a=a||{};let i=this.props.mainState.productsForExport||[];n&&(i=i.map(e=>-1==`${e.product_id}${e.ma_kho}${e.name}`.toLowerCase().indexOf(n.toLowerCase())?null:pa({},e)).filter(e=>!!e));const s={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{size:"small",rowSelection:s,bordered:!0,dataSource:i,columns:e,loading:this.state.loadProduct,scroll:{y:250},pagination:{pageSize:50},onChange:this.handleChange,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange}))))}))}},ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var ga=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),this.validBeforeSave()&&fetch(ISD_BASE_URL+"phieuxuat/update",{method:"POST",headers:I(),body:JSON.stringify(this.props.mainState.phieuxuat)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({phieuxuat:{refresh:!0},phieuXuatAction:{}})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.state={selectedItems:[]}}validBeforeSave(){let e=this.props.mainState.phieuxuat;return e.ma_kho?e.products.length?!(""!=e.ma_phieu&&!e.editNote&&(d.a.error("Hãy nhập lý do sửa phiếu"),1)):(d.a.error("Chưa có sản phẩm nào trong phiếu này."),!1):(d.a.error("Mã kho không được để trống"),!1)}cancel(){this.props.dispatch(m({phieuXuatAction:ma({},this.props.mainState.phieuXuatAction,{addNewItem:!1})}))}pheDuyet(e){this.setState({loading:!0});let t={value:e,ma_phieu:this.props.mainState.phieuxuat.ma_phieu};fetch(ISD_BASE_URL+"phieuxuat/pheduyet",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({phieuxuat:ma({},this.props.mainState.phieuxuat,{refresh:!0},e.data)})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình phê duyệt!")})}render(){var e=this.props.mainState;let t=e.phieuXuatAction,a=1==e.phieuxuat.tinh_trang;return r.a.createElement("div",null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin phiếu xuất")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},1!=a?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{title:"Bạn chắc chắn muốn duyệt?",onConfirm:()=>this.pheDuyet(1)},r.a.createElement(v.a,{style:{marginRight:10},type:"danger",ghost:!0,disabled:a},"Phê duyệt")),t&&"edit"==t.action?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:this.handleSubmit,type:"primary",htmlType:"button",icon:"save"},"Lưu"),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel()},r.a.createElement(v.a,{style:{marginLeft:10},type:"danger"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieuXuatAction:ma({},this.props.mainState.phieuXuatAction,{action:"edit"})}))},type:"primary",htmlType:"button",icon:"edit"},"Sửa"))):r.a.createElement(v.a,{ghost:!0,disabled:!0},r.a.createElement(Fe.a,{status:"success",text:"Đã duyệt"})),r.a.createElement(v.a,{onClick:()=>this.cancel(),style:{marginLeft:10},icon:"left",type:"default"},"Quay lại"))))),r.a.createElement(Y.a,{width:"95%",title:"Chọn vật tư cho phiếu xuất",okText:"Chọn vật tư",cancelText:"Đóng",visible:t.openModal,onCancel:()=>{this.props.dispatch(m({phieuXuatAction:ma({},this.props.mainState.phieuXuatAction,{openModal:!1})}))},onOk:()=>{let e=this.props.mainState.productsForExport.filter(e=>-1!==this.state.selectedItems.indexOf(e.id)),t=this.props.mainState.phieuxuat,a=[];t.products&&t.products.length&&t.products.forEach(e=>{a.push(e.product_id)}),e=e.filter(e=>-1==a.indexOf(e.product_id)),this.props.dispatch(m({phieuXuatAction:ma({},this.props.mainState.phieuXuatAction,{openModal:!1}),phieuxuat:ma({},this.props.mainState.phieuxuat,{products:[...this.props.mainState.phieuxuat.products,...e]})}))}},r.a.createElement(ua,{onRowSelection:e=>{this.setState({selectedItems:e})},dispatch:this.props.dispatch,mainState:this.props.mainState})),r.a.createElement(oa,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(ca,{dispatch:this.props.dispatch,mainState:this.props.mainState}))}}),_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function fa(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const ya=C(N),Ea=x.a.Item,ba=r.a.createContext(),xa={headTitle:"Quản lý phiếu xuất",addNewTitle:"Thêm phiếu xuất mới"},Sa={fetch:"phieuxuat/fetch",delete:"phieuxuat/delete/"},ka=x.a.create()(e=>{let t=e.form,a=(e.index,fa(e,["form","index"]));return r.a.createElement(ba.Provider,{value:t},r.a.createElement("tr",a))});class va extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,fa(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(ba.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(Ea,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var wa=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Sa.delete+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.state={data:[],addNewItem:!1},this.columns=[{title:"Mã Kho",dataIndex:"ma_kho",editable:!1},{title:"Người nhận hàng",dataIndex:"nguoi_giao_dich",editable:!1},{title:"Lý do xuất kho",dataIndex:"note",editable:!1},{title:"Ngày Tạo",dataIndex:"create_on",editable:!1},{title:"Người Tạo",dataIndex:"username",render:(e,t)=>t.name||e},{title:"Tình trạng",dataIndex:"tinh_trang",editable:!1,render:(e,t)=>{let a="processing";return"0"==e&&(a="error"),"1"==e&&(a="success"),r.a.createElement(Fe.a,{text:ya[e].text||e,status:a})}},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(ba.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},"Xem chi tiết")))}}]}getDefaultFields(){return{id:"",ma_kho:"",ma_phieu:"",nguoi_giao_dich:"",so_chung_tu:"",type:"",note:"",address:"",products:[],tinh_trang:"2"}}addNewRow(){this.props.dispatch(m({phieuXuatAction:_a({},this.props.mainState.phieuXuatAction,{addNewItem:!0,action:"edit",editingKey:""}),phieuxuat:this.getDefaultFields()}))}view(e){var t=this.props.mainState;let a=t.phieuxuat,n=t.phieuXuatAction;e&&e.ma_phieu&&e.id&&this.props.dispatch(m({phieuxuat:_a({},a,e),phieuXuatAction:_a({},n,{addNewItem:!0,action:"view"})}))}fetchData(){fetch(ISD_BASE_URL+Sa.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>_a({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(m({phieuxuat:_a({},this.props.mainState.phieuxuat,{refresh:!1})}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.phieuxuat.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData()}render(){let e=this.props.mainState;const t={body:{row:ka,cell:va}},a=this.columns.map(e=>e.editable?_a({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let n=this.state.searchText,i=[...this.state.data];return n&&(i=i.map(e=>-1==`${e.ma_kho}${e.nguoi_giao_dich}${e.note}${e.create_on}${e.username}`.toLowerCase().indexOf(n.toLowerCase())?null:_a({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,e.phieuXuatAction.addNewItem?r.a.createElement(ga,{dispatch:this.props.dispatch,mainState:this.props.mainState}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},xa.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},xa.addNewTitle))))),r.a.createElement(A.a,{components:t,bordered:!0,dataSource:i,columns:a,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange})))),rowClassName:"editable-row"})))}},Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Ve.a.MonthPicker;const Ca=x.a.Item,Ia=w.a.Option;var Da=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={confirmDirty:!1,groupUser:[],productListbyCateList:[]},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){let e=this.props.mainState.systemOrder;t.id=e.id?e.id:"",fetch(ISD_BASE_URL+"order/updateDh",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):d.a.success(e.message)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình thêm ghi chú!")})}})}),this.handleConfirmBlur=(e=>{const t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}),this.normFile=(e=>(console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList)),t}fetchProductListbyCate(e){fetch(ISD_BASE_URL+`rnd/fetchProductByCate/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({productListbyCateList:e.data})),this.setState({productListbyCateList:e.data})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){0==(this.state.productListbyCateList||[]).length&&this.fetchProductListbyCate(19)}render(){const e=this.props.form.getFieldDecorator,t={labelCol:{},wrapperCol:{xs:{span:24},sm:{span:24}}};var a=this.props.mainState;let n=a.systemOrder,i=a.ans_language,s=a.customers,o=this.state.productListbyCateList,h=[],d=Qe()(n.date_delive);d.isValid()||(d=null),s&&s.length&&(h=s.map(e=>r.a.createElement(Ia,{value:e.ma_kh,key:e.ma_kh},e.ma_kh," - ",e.name)));let c=[];return o&&o.length&&(c=o.map(e=>r.a.createElement(Ia,{value:e.product_id,key:e.product_id},e.product_id," - ",e.name))),r.a.createElement(x.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a,{className:"ans_row_margin_10"},r.a.createElement(E.a,{span:"12"},r.a.createElement(Ca,Aa({},t,{label:r.a.createElement("span",null,i.ans_order_titles||"ans_order_titles","  ",r.a.createElement(F.a,{title:i.ans_order_titles_note||"ans_order_titles_note"},r.a.createElement(l.a,{type:"question-circle-o"})))}),e("ma_order",{initialValue:n.ma_order,rules:[{required:!0,message:i.ans_pls_enter_title||"ans_pls_enter_title",whitespace:!0}]})(r.a.createElement(b.a,{className:"ans_input_80"})))),r.a.createElement(E.a,{span:"12"},r.a.createElement(Ca,Aa({},t,{label:r.a.createElement("span",null,i.ans_customer_titles||"ans_customer_titles","  ",r.a.createElement(F.a,{title:i.ans_customer_titles_note||"ans_customer_titles_note"},r.a.createElement(l.a,{type:"question-circle-o"})))}),e("ma_kh",{initialValue:n.ma_kh,rules:[{required:!0,message:i.ans_pls_enter_title||"ans_pls_enter_title",whitespace:!0}]})(r.a.createElement(w.a,{placeholder:"Chọn khách hàng",mode:"",onChange:e=>{console.log(e)}},h))))),r.a.createElement(k.a,{className:"ans_row_margin_10"},r.a.createElement(E.a,{span:12},r.a.createElement(Ca,Aa({},{labelCol:{},wrapperCol:{xs:{span:20},sm:{span:20}}},{label:i.ans_product_name||"ans_product_name"}),e("product_id",{initialValue:n.product_id,rules:[{required:!1,message:i.ans_choose_product||"ans_choose_product"}]})(r.a.createElement(w.a,{placeholder:"Chọn sản phẩm",mode:"",onChange:e=>{console.log(e)}},c)))),r.a.createElement(E.a,{span:"12"},r.a.createElement(Ca,Aa({},t,{label:r.a.createElement("span",null,i.ans_qty_titles||"ans_qty_titles","  ",r.a.createElement(F.a,{title:i.ans_qty_titles_note||"ans_qty_titles_note"},r.a.createElement(l.a,{type:"question-circle-o"})))}),e("qty",{initialValue:n.qty,rules:[{required:!0,message:i.ans_pls_enter_title||"ans_pls_enter_title",whitespace:!0}]})(r.a.createElement(b.a,null))))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:"12"},r.a.createElement(Ca,Aa({},t,{label:r.a.createElement("span",null,i.ans_date_delive||"ans_date_delive","  ",r.a.createElement(F.a,{title:i.ans_date_delive_note||"ans_date_delive_note"},r.a.createElement(l.a,{type:"question-circle-o"})))}),r.a.createElement(Ve.a,{defaultValue:d,onChange:e=>{e=null!=e?e.format("YYYY-MM-DD"):"",this.props.dispatch(m({systemOrder:Aa({},this.props.mainState.systemOrder,{date_delive:e})}))},placeholder:"Chọn ngày",format:"DD-MM-YYYY"})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24},r.a.createElement(Ca,Aa({},t,{label:"Nội dung ghi chú cho đơn hàng"}),e("note",{initialValue:n.note})(r.a.createElement(b.a.TextArea,{style:{width:"100%",minHeight:"200px"}})))),r.a.createElement(E.a,{span:24},r.a.createElement(Ca,Aa({},t,{label:"Upload",extra:""}),e("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(Tt.a,{name:"logo",action:"/upload",listType:"picture"},r.a.createElement(v.a,null,r.a.createElement(l.a,{type:"upload"})," ",i.ans_attach_file||"ans_attach_file")))))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24},r.a.createElement(Ca,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},i.ans_send||"ans_send")))))}}),Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};x.a.Item;var Na=class extends r.a.Component{addNewRow(){let e=this.getDefaultFields();this.edit(e)}getDefaultFields(){return{name:"",description:""}}edit(e){this.props.dispatch(m({systemOrder:Ta({},e,{openModal:!0})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Ta({},e,a);fetch(ISD_BASE_URL+"order/updateDh",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,Ta({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0,this.props.dispatch(m({systemOrder:Ta({},record,{openModal:!1})})))}).catch(e=>{console.log("parsing failed",e),d.a.error(ans_language.ans_save_error||"ans_save_error")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"order/fetchDh",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Ta({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu danh mục!",3),console.log(e)})}fetchUserList(){fetch(ISD_BASE_URL+"users/fetchUsers",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({users:e.data}),this.props.dispatch(m({userlist:C(e.data,"id")}))):console.warn(e.message)}).catch(e=>{console.log(e)})}fetchCustomers(){fetch(ISD_BASE_URL+"qlkh/fetchKh",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({customers:e.data}),this.props.dispatch(m({customers:e.data}))):console.warn(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){let e=this.props.mainState;this.fetchData(),0==e.userlist.length&&this.fetchUserList(),0==e.customers.length&&this.fetchCustomers()}render(){const e=this.columns;let t=this.props.mainState,a=!!t.systemOrder&&t.systemOrder.openModal,n=t.ans_language;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},n.ans_order_main_title||"ans_order_main_title")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},n.ans_add_new||"ans_add_new"))))),a?r.a.createElement(Y.a,{width:"80%",style:{top:20},title:n.ans_add_new_order||"ans_add_new_order",visible:a,onCancel:()=>{this.props.dispatch(m({systemOrder:Ta({},this.props.mainState.systemOrder,{openModal:!1})}))},onOk:()=>{},footer:null},r.a.createElement(Da,{mainState:this.props.mainState,dispatch:this.props.dispatch})):null,r.a.createElement(A.a,{bordered:!0,dataSource:this.state.data,columns:e,rowClassName:"editable-row"}))}constructor(e){super(e),this.cancel=(e=>{}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"order/deleteDh/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0};let t=this.props.mainState.ans_language;this.props.mainState.userlist,this.columns=[{title:t.ans_date_create||"ans_date_create",dataIndex:"create_on",width:"120px",editable:!1,required:!0,render:e=>e?Qe()(e).format("DD/MM/YYYY"):""},{title:t.ans_order_id||"ans_order_id",dataIndex:"ma_order",width:"150px",editable:!0,required:!0},{title:t.ans_customer_name||"ans_customer_name",dataIndex:"ma_kh",width:"200px",editable:!0,required:!0,render:(e,t)=>r.a.createElement("div",null,e," - ",t.kh_name)},{title:t.ans_product_name||"ans_product_name",dataIndex:"product_id",width:"200px",editable:!0,required:!0,render:(e,t)=>r.a.createElement("div",null,e," - ",t.product_name)},{title:t.ans_qty||"ans_qty",dataIndex:"qty",width:"120px",editable:!0,required:!0},{title:t.ans_date_delive||"ans_date_delive",dataIndex:"date_delive",editable:!0,required:!0},{title:t.ans_status||"ans_status",dataIndex:"status",width:"150px",editable:!0,required:!0,render:e=>{let a=t.ans_pending_check||"ans_pending_check";switch(e){case"1":a=t.ans_order_checked||"ans_order_checked";break;case"2":a=t.ans_order_doing||"ans_order_doing"}return r.a.createElement("div",null,a)}},{title:t.ans_actions||"ans_actions",dataIndex:"operation",width:"100px",render:(e,a)=>r.a.createElement("div",{style:{minWidth:100}},r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(a)},r.a.createElement(l.a,{type:"edit"}),t.ans_edit||"ans_edit"))}]}},ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Oa=x.a.Item,Ra=w.a.Option;var La=x.a.create()(class extends r.a.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{if(e)return;let a={id:this.props.record.id,ma_phieu:this.props.record.ma_phieu,ma_kho:this.state.ma_kho,vi_tri_kho:t.vi_tri_kho.join(",")};this.changeProductPosition(a)})}),this.changeProductPosition=(e=>{this.setState({loading:!0}),fetch(ISD_BASE_URL+"phieunhap/changePosition",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):d.a.success(e.message),this.setState({loading:!1})}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.state={loading:!1,expandedRowRender:!0,ma_kho:this.props.record.ma_kho,vi_tri_kho:this.props.record.vi_tri_kho},this.changeInventory=this.changeInventory.bind(this)}changeInventory(e){this.setState({ma_kho:e,vi_tri_kho:""}),this.props.form.resetFields(["vi_tri_kho"])}fetchKhoData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchViTriKhoData(){fetch(ISD_BASE_URL+"qlvtkho/fetchVtkho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({vi_tri_kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu vị trí kho!",3),console.log(e)})}componentDidMount(){let e=this.props.mainState,t=e.kho||[],a=e.vi_tri_kho||[];t.length||this.fetchKhoData(),a.length||this.fetchViTriKhoData()}khoOptions(){let e=this.props.mainState.kho||[];if(e.length)return e.map(e=>r.a.createElement(Ra,{key:e.id,value:e.ma_kho},e.ma_kho," ","-"," ",e.name))}viTriKhoOptions(){let e=this.props.mainState.vi_tri_kho||[];if(e.length)return(e=e.filter(e=>e.ma_kho==this.state.ma_kho)).map(e=>r.a.createElement(Ra,{key:e.id,value:e.id},e.name))}render(){const e=this.props.form.getFieldDecorator;var t=this.state;let a=t.ma_kho,n=t.vi_tri_kho,i=[];return""!=n&&(i=n.split(",")),r.a.createElement(x.a,{onSubmit:this.handleSubmit,className:"form-cap-nhat-vi-tri"},r.a.createElement(Oa,{label:"Tại kho"},e("ma_kho",{required:!0,initialValue:a})(r.a.createElement(w.a,{onChange:this.changeInventory,placeholder:"Kho hàng"},this.khoOptions()))),r.a.createElement(Oa,{label:"Chọn vị trí trong kho"},e("vi_tri_kho",ja({},{rules:[{required:!0,message:"Hãy chọn vị trí kho"}]},{initialValue:i}))(r.a.createElement(w.a,{mode:"multiple",placeholder:"Chọn vị trí kho"},this.viTriKhoOptions()))),r.a.createElement(Oa,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(v.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Cập nhật vị trí")))}}),Ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const qa=Ve.a.RangePicker,Ba=x.a.Item,Ua=w.a.Option;const Pa=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1},this.handleSearch=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{let a=Ma({},t);if(a.ngay_san_xuat&&a.ngay_san_xuat.length){let e=a.ngay_san_xuat;a.ngay_san_xuat=[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]}if(a.ngay_het_han&&a.ngay_het_han.length){let e=a.ngay_het_han;a.ngay_het_han=[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]}this.search(a)})}),this.handleReset=(()=>{this.props.form.resetFields(),this.search()}),t}fetchProductInInventory(){fetch(ISD_BASE_URL+"tinhtrangkho/fetchProductInInventory",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({productInInventory:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchKho(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchCate(){fetch(ISD_BASE_URL+"qlcate/fetchCate",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({categories:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}search(e){this.setState({loading:!0}),this.props.loading(!0),fetch(ISD_BASE_URL+"tinhtrangkho/search",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):this.props.dispatch(m({phieunhap:Ma({},this.props.mainState.phieunhap,{products:e.data})})),this.setState({loading:!1}),this.props.loading(!1)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình tìm kiếm!"),this.setState({loading:!1}),this.props.loading(!1)})}getFields(){let e=this.props.mainState,t=e.ans_language,a=e.kho||[],n=e.categories||[],i=e.productInInventory||[];const s=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:t.ans_filterby_cateid||"ans_filterby_cateid"},s("ma_kho",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,mode:"multiple",placeholder:t.ans_pls_enter_cate_id||"ans_pls_enter_cate_id"},a.map(e=>r.a.createElement(Ua,{value:e.ma_kho,key:e.ma_kho},e.name)))))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo mã vật tư"},s("product_id",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,mode:"multiple",placeholder:"Nhập mã vật tư"},i.map(e=>r.a.createElement(Ua,{value:e.product_id,key:e.product_id},e.product_id," ","-"," ",e.name)))))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo mã lô"},s("ma_lo",{rules:[{required:!1}]})(r.a.createElement(b.a,{placeholder:"Nhập mã lô"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo ngày sản xuất"},s("ngay_san_xuat",{rules:[{required:!1}]})(r.a.createElement(qa,{placeholder:["Từ Ngày","Đến Ngày"],format:"DD/MM/YYYY"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo ngày hết hạn"},s("ngay_het_han",{rules:[{required:!1}]})(r.a.createElement(qa,{placeholder:["Từ Ngày","Đến Ngày"],format:"DD/MM/YYYY"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc sản phẩm sắp hết hạn"},s("sap_het_han",{rules:[{required:!1}]})(r.a.createElement(b.a,{placeholder:"Nhập số ngày"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo Danh mục vật tư"},s("ma_cate",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,mode:"multiple",placeholder:"Nhập mã danh mục"},n.map(e=>r.a.createElement(Ua,{value:e.id,key:e.id},e.ma_cate?e.ma_cate+" -":""," ",e.name)))))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo QC duyệt"},s("qc_check",{rules:[{required:!1}]})(r.a.createElement(w.a,{placeholder:"QC Duyệt"},j.map(e=>r.a.createElement(Ua,{value:e.id,key:e.value},e.text)))))),r.a.createElement(E.a,{span:8},r.a.createElement(Ba,{label:"Lọc theo QA duyệt"},s("qa_check",{rules:[{required:!1}]})(r.a.createElement(w.a,{placeholder:"QA Duyệt"},j.map(e=>r.a.createElement(Ua,{value:e.id,key:e.value},e.text)))))))}componentDidMount(){let e=this.props.mainState,t=e.kho||[],a=e.categories||[],n=e.productInInventory||[];t.length||this.fetchKho(),a.length||this.fetchCate(),n.length||this.fetchProductInInventory()}render(){return r.a.createElement(x.a,{className:"isd-advanced-search-form",onSubmit:this.handleSearch},r.a.createElement(k.a,{gutter:24},this.getFields()),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24,style:{textAlign:"center",marginTop:10}},r.a.createElement(v.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Tìm kiếm"),r.a.createElement(v.a,{style:{marginLeft:8},onClick:this.handleReset},"Reset bộ lọc"))))}});var Ya=Object(o.b)(e=>({mainState:e.main.present}))(Pa),Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const za=x.a.Item,Qa="qc_check";var Ga=class extends r.a.Component{verifyProduct(e){let t,a,n=this.props.mainState.phieunhap.pheduyet||{};if(n.verifyType==Qa?(t=n.qc_note,a=n.qc_file):(t=n.qa_note,a=n.qa_file),!t&&!a)return d.a.error("Bạn hãy nhập thông tin phê duyệt hoặc tải file đính kèm!"),!1;this.props.changeStatus(n.verifyType,n.id,e,t,a)}render(){let e,t,a=this.props.mainState.phieunhap,n=this.props.mainState.ans_language,i=a.pheduyet||{};return i.id&&(""!=i.qc_file&&(e=[{uid:-1,name:i.qc_file,status:"done",url:ISD_BASE_URL+"upload/"+i.qc_file}]),""!=i.qa_file&&(t=[{uid:-1,name:i.qa_file,status:"done",url:ISD_BASE_URL+"upload/"+i.qa_file}])),r.a.createElement(x.a,null,i.verifyType==Qa?r.a.createElement(r.a.Fragment,null,r.a.createElement(za,{label:n.ans_approval_content||"ans_approval_content"},r.a.createElement(b.a.TextArea,{autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieunhap:Fa({},this.props.mainState.phieunhap,{pheduyet:Fa({},this.props.mainState.phieunhap.pheduyet,{qc_note:e.target.value})})}))},value:i.qc_note})),r.a.createElement(za,{label:n.ans_attach_file_option||"ans_attach_file_option"},r.a.createElement(jt,{fileList:e||[],onDone:e=>{this.props.dispatch(m({phieunhap:Fa({},this.props.mainState.phieunhap,{pheduyet:Fa({},this.props.mainState.phieunhap.pheduyet,{qc_file:e})})}))},mainState:this.props.mainState,dispatch:this.props.dispatch}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(za,{label:n.ans_approval_content||"ans_approval_content"},r.a.createElement(b.a.TextArea,{autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({phieunhap:Fa({},this.props.mainState.phieunhap,{pheduyet:Fa({},this.props.mainState.phieunhap.pheduyet,{qa_note:e.target.value})})}))},value:i.qa_note})),r.a.createElement(za,{label:n.ans_attach_file_option||"ans_attach_file_option"},r.a.createElement(jt,{fileList:t||[],onDone:e=>{this.props.dispatch(m({phieunhap:Fa({},this.props.mainState.phieunhap,{pheduyet:Fa({},this.props.mainState.phieunhap.pheduyet,{qa_file:e})})}))},mainState:this.props.mainState,dispatch:this.props.dispatch}))),r.a.createElement(za,null,r.a.createElement(S.a,{title:n.ans_confirm_approval||"ans_confirm_approval",onConfirm:()=>this.verifyProduct(1)},r.a.createElement(v.a,{type:"primary",style:{marginRight:10}},r.a.createElement(l.a,{type:"check-circle"}),n.ans_approval||"ans_approval")),r.a.createElement(S.a,{title:n.ans_confirm_approval||"ans_confirm_approval",onConfirm:()=>this.verifyProduct(0)},r.a.createElement(v.a,{type:"danger",ghost:!0},r.a.createElement(l.a,{type:"exclamation-circle"}),n.ans_approval||"ans_not_approval"))))}},Va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Ka=C(j),Za=(x.a.Item,{headTitle:"Vật tư trong kho",addNewTitle:"Thêm vật tư vào phiếu nhập"}),Ja={changeStatus:"phieunhap/changeStatus"};var Ha=class extends r.a.Component{constructor(e){super(e),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t})}),this.clearFilters=(()=>{this.setState({filteredInfo:null})}),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.changeStatus=((e,t,a,n,r)=>{this.setState({loading:!0});let i={id:t,type:e,status:a,note:n,file:r};fetch(ISD_BASE_URL+Ja.changeStatus,{method:"POST",headers:I(),body:JSON.stringify(i)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(this.fetchAllProduct(),this.closeVerifyModal(),d.a.success(e.message)),this.setState({selectedRowKeys:[],loading:!1})}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1,filteredInfo:null,filterDropdownVisible:!1,searchText:"",filtered:!1},this.columns=[{title:"Mã VT",dataIndex:"product_id",width:150},{title:"Tên VT",dataIndex:"name",width:200},{title:"Mã Kho",dataIndex:"ma_kho",width:100},{title:"Tên Kho",dataIndex:"ten_kho",width:200},{title:"SL",dataIndex:"sl_thucnhap",width:120,editable:!0},{title:"Ngày SX",dataIndex:"ngay_san_xuat",width:"200px",editable:!0,required:!0,render:(e,t)=>Qe()(e).format("DD/MM/YYYY")},{title:"Ngày hết hạn",dataIndex:"ngay_het_han",width:"200px",editable:!0,required:!0,render:(e,t)=>Qe()(e).format("DD/MM/YYYY")},{title:"QC Duyệt",dataIndex:"qc_check",editable:!1,width:130,render:(e,t)=>{let a;switch(t.qc_check){case"1":a=r.a.createElement(Fe.a,{status:"success",text:"Đạt"});break;case"0":a=r.a.createElement(Fe.a,{status:"error",text:"Không đạt"});break;case"2":a=r.a.createElement(Fe.a,{status:"processing",text:"Phê duyệt"})}return r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieunhap:Va({},this.props.mainState.phieunhap,{pheduyet:Va({},this.props.mainState.phieunhap.pheduyet,t,{verifyType:"qc_check",openModal:!0})})}))}},a)}},{title:"QA Duyệt",dataIndex:"qa_check",editable:!1,width:130,render:(e,t)=>{let a;switch(t.qa_check){case"1":a=r.a.createElement(Fe.a,{status:"success",text:"Đạt"});break;case"0":a=r.a.createElement(Fe.a,{status:"error",text:"Không đạt"});break;case"2":a=r.a.createElement(Fe.a,{status:"processing",text:"Phê duyệt"})}return r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieunhap:Va({},this.props.mainState.phieunhap,{pheduyet:Va({},this.props.mainState.phieunhap.pheduyet,t,{verifyType:"qa_check",openModal:!0})})}))}},a)}}]}showCheckStatus(e){if(e){let t="processing";return"2"==e&&(t="error"),"1"==e&&(t="success"),r.a.createElement(Fe.a,{text:Ka[e].text,status:t})}return r.a.createElement(Fe.a,{text:Ka[0].text,status:"processing"})}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}fetchAllProduct(){this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+"tinhtrangkho/fetchAllProduct",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({phieunhap:Va({},this.props.mainState.phieunhap,{products:e.data})})):d.a.error(e.message),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}closeVerifyModal(){this.props.dispatch(m({phieunhap:Va({},this.props.mainState.phieunhap,{pheduyet:Va({},this.props.mainState.phieunhap.phieunhap,{openModal:!1})})}))}exportExcel(){let e=this.props.mainState.phieunhap,t=e.products?e.products:[];if(t.length){let e={dataset:t=t.map(e=>({"Mã SP":e.product_id,"Tên Kho":e.ten_kho,"Số lượng":e.sl_thucnhap,"Ngày sản xuất":e.ngay_san_xuat?Qe()(e.ngay_san_xuat).format("DD/MM/YYYY"):"","Ngày hết hạn":e.ngay_het_han?Qe()(e.ngay_het_han).format("DD/MM/YYYY"):"","QC Kiểm tra":1==e.qc_check?"Đạt":"Không đạt","QA Kiểm tra":1==e.qa_check?"Đạt":"Không đạt"})),title:"Tình trạng kho",filename:"Tình trạng kho"};fetch(ISD_BASE_URL+"exportExcel",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(d.a.success(e.message),e.filename&&(window.location.href=ISD_BASE_URL+`export/${e.filename}`))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình export!")})}else d.a.error("Không có dữ liệu để export!")}componentDidMount(){this.fetchAllProduct()}render(){var e=this.props.mainState;e.products;let t=e.phieunhap.pheduyet||{},a=this.columns;var n=this.state;let i=n.filteredInfo,s=n.searchText;i=i||{},a=a.map(e=>{if(e.filterable)switch(e.dataIndex){case"qc_check":return Va({},e,{filteredValue:i.qc_check||null,onFilter:(e,t)=>t.qc_check.includes(e)});case"qa_check":return Va({},e,{filteredValue:i.qa_check||null,onFilter:(e,t)=>t.qa_check.includes(e)})}return"product_id"==e.dataIndex?Va({},e,{filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown"},r.a.createElement(b.a,{ref:e=>this.searchInput=e,placeholder:"Nhập mã vật tư",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch}),r.a.createElement(v.a,{type:"primary",onClick:this.onSearch},"Tìm")),filterIcon:r.a.createElement(l.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:e=>{this.setState({filterDropdownVisible:e},()=>this.searchInput&&this.searchInput.focus())}}):e});let o=this.props.mainState.phieunhap.products||[];return s&&(o=o.map(e=>-1==`${e.product_id}`.toLowerCase().indexOf(s.toLowerCase())?null:Va({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations no-margin"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},Za.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(x.a,null,r.a.createElement(v.a,{onClick:()=>this.exportExcel(),type:"primary"}," ",r.a.createElement(l.a,{type:"file-excel"}),"Xuất Excel")))))),t.openModal?r.a.createElement(Y.a,{width:"60%",style:{top:20},title:"Form phê duyệt sản phẩm",visible:t.openModal,onCancel:()=>{this.closeVerifyModal()},onOk:()=>{},footer:null},r.a.createElement(Ga,{changeStatus:this.changeStatus,mainState:this.props.mainState,dispatch:this.props.dispatch})):null,r.a.createElement(A.a,{bordered:!0,dataSource:o,columns:a,rowClassName:"editable-row",loading:this.state.loadProduct,size:"small",onChange:this.handleChange,title:()=>r.a.createElement(Ya,{loading:e=>{this.setState({loadProduct:e})}}),expandedRowRender:e=>r.a.createElement(La,{mainState:this.props.mainState,dispatch:this.props.dispatch,record:e})}))}},Wa=a(58);var Xa=class extends r.a.Component{getProductStatus(){let e={waitingVerifyProducts:0,refundProducts:0,tempStock:0},t=this.props.mainState.phieunhap;return(t.products?t.products:[]).forEach(t=>{"0"==t.qc_check&&"1"!=t.qa_check&&(e.refundProducts+=1),t.qc_check&&"2"!=t.qc_check||(e.waitingVerifyProducts+=1),"0"==t.qc_check&&"2"==t.qa_check&&(e.waitingVerifyProducts+=1)}),e}render(){let e=this.props.mainState.phieunhap,t=this.getProductStatus();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations no-margin"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin tổng hợp")),r.a.createElement(E.a,{span:12}))),r.a.createElement("div",{style:{background:"#ECECEC",padding:"10px",marginBottom:10}},r.a.createElement(k.a,{gutter:16},r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Vật tư trong kho",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},e.products&&e.products.length?e.products.length:0))),r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Vật tư chờ duyệt",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},t.waitingVerifyProducts))),r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Vật tư chờ trả hàng",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},t.refundProducts))),r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Vật tư chưa chuyển kho",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},"0"))))))}};C(N);var $a=class extends r.a.Component{constructor(e){super(e)}componentDidMount(){}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xa,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(Ha,{dispatch:this.props.dispatch,mainState:this.props.mainState}))}},en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function tn(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const an=x.a.Item,nn=r.a.createContext(),rn=x.a.create()(e=>{let t=e.form,a=(e.index,tn(e,["form","index"]));return r.a.createElement(nn.Provider,{value:t},r.a.createElement("tr",a))});class sn extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,tn(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(nn.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(an,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var on=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlns/deleteNs/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu nhân viên!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu nhân viên!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Nhân viên",dataIndex:"ma_ns",width:"15%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Số điện thoại",dataIndex:"phone",editable:!0,required:!0},{title:"Tổ",dataIndex:"group",editable:!0,required:!0},{title:"Thông tin",dataIndex:"description",editable:!0,required:!1},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(nn.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=en({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới nhân viên rồi ...")}getDefaultFields(){return{ma_ns:"",name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=en({},e,a);fetch(ISD_BASE_URL+"qlns/updateNs",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,en({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlns/fetchNs",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>en({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu nhân viên!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:rn,cell:sn}},t=this.columns.map(e=>e.editable?en({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý nhân viên")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm nhân viên mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function hn(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const dn=x.a.Item,cn=r.a.createContext(),pn=x.a.create()(e=>{let t=e.form,a=(e.index,hn(e,["form","index"]));return r.a.createElement(cn.Provider,{value:t},r.a.createElement("tr",a))});class un extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,hn(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(cn.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(dn,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var mn=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qljobs/deleteJob/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu công việc!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu công việc!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã Công Việc",dataIndex:"ma_cv",width:"15%",editable:!0,required:!0},{title:"Diễn giải",dataIndex:"diengiai",editable:!0,required:!0},{title:"Công hệ số",dataIndex:"heso",width:"15%",editable:!0,required:!0},{title:"Sản lượng theo giờ",dataIndex:"sanluong",width:"15%",editable:!0,required:!0},{title:"Ghi chú",dataIndex:"description",editable:!0,required:!1},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(cn.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=ln({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới công việc rồi ...")}getDefaultFields(){return{ma_cv:"",diengiai:"",heso:"",sanluong:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=ln({},e,a);fetch(ISD_BASE_URL+"qljobs/updateJob",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,ln({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qljobs/fetchJob",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>ln({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu công việc!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:pn,cell:un}},t=this.columns.map(e=>e.editable?ln({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý công việc")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm công việc mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},gn=a(343);const _n=gn.a.SHOW_PARENT;var fn=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(e){super(e),this.onChange=(e=>{this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}),this.state={value:this.props.selectedRoles||[],treeData:[]}}fetchData(){fetch(ISD_BASE_URL+"qlpb/fetchGroupRoles",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({treeData:e.data}),this.props.dispatch(m({allUserRoles:e.data}))):console.warn(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){let e=this.props.mainState.allUserRoles;e?this.setState({treeData:e}):this.fetchData()}render(){const e={treeData:this.state.treeData,value:this.state.value,onChange:this.onChange,treeCheckable:!0,showCheckedStrategy:_n,searchPlaceholder:"Hãy chọn quyền",style:{width:250}};return r.a.createElement(gn.a,e)}}),yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function En(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const bn=x.a.Item,xn=r.a.createContext(),Sn=x.a.create()(e=>{let t=e.form,a=(e.index,En(e,["form","index"]));return r.a.createElement(xn.Provider,{value:t},r.a.createElement("tr",a))});class kn extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"roles":let e=[];return this.props.record&&this.props.record.roles&&""!=this.props.record.roles&&(e="string"==typeof this.props.record.roles?this.props.record.roles.split(","):this.props.record.roles),r.a.createElement(fn,{selectedRoles:e});default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,En(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(xn.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(bn,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var vn=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlpb/deletePb/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá dữ liệu phòng ban!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu phòng ban!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0},this.columns=[{title:"Mã phòng ban",dataIndex:"ma_pb",width:"15%",editable:!0,required:!0},{title:"Tên",dataIndex:"name",editable:!0,required:!0},{title:"Thông tin mô tả",dataIndex:"description",editable:!0,required:!1},{title:"Quyền",dataIndex:"roles",editable:!0,required:!1},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(xn.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=yn({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới phòng ban rồi ...")}getDefaultFields(){return{ma_pb:"",name:"",phone:"",address:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=yn({},e,a);fetch(ISD_BASE_URL+"qlpb/updatePb",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,yn({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"qlpb/fetchPb",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>yn({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu phòng ban!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:Sn,cell:kn}},t=this.columns.map(e=>e.editable?yn({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý phòng ban")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm phòng ban mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row"}))}},wn=a(155),An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Cn=Ve.a.RangePicker,In=x.a.Item,Dn=w.a.Option;const Tn=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1},this.handleSearch=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{let a=An({},t);if(a.workday&&a.workday.length){let e=a.workday;a.workday=[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]}this.search(a)})}),this.handleReset=(()=>{this.props.form.resetFields(),this.search()}),t}fetchJob(){fetch(ISD_BASE_URL+"qljobs/fetchJob",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({jobs:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchNv(){fetch(ISD_BASE_URL+"qlns/fetchNs",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({nhanviens:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}search(e){this.setState({loading:!0}),this.props.loading(!0),fetch(ISD_BASE_URL+"qlsl/search",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):this.props.onResult(e.data),this.setState({loading:!1}),this.props.loading(!1)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình tìm kiếm!"),this.setState({loading:!1}),this.props.loading(!1)})}getFields(){let e=this.props.mainState,t=e.jobs||[],a=e.nhanviens||[];const n=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{span:8},r.a.createElement(In,{label:"Lọc theo ngày"},n("workday",{rules:[{required:!1}]})(r.a.createElement(Cn,{placeholder:["Từ Ngày","Đến Ngày"],format:"DD/MM/YYYY"})))),r.a.createElement(E.a,{span:8},r.a.createElement(In,{label:"Lọc theo nhân viên"},n("ma_ns",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.join("").toLowerCase().indexOf(e.toLowerCase())>=0,mode:"multiple",placeholder:"Nhập mã nhân viên"},a.map(e=>r.a.createElement(Dn,{value:e.ma_ns,key:e.ma_ns},e.ma_ns," ","-"," ",e.name)))))),r.a.createElement(E.a,{span:8},r.a.createElement(In,{label:"Lọc theo mã công việc"},n("ma_cv",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.join("").toLowerCase().indexOf(e.toLowerCase())>=0,mode:"multiple",placeholder:"Nhập mã công việc"},t.map(e=>r.a.createElement(Dn,{value:e.ma_cv,key:e.ma_cv},e.ma_cv," - ",e.diengiai)))))))}componentDidMount(){let e=this.props.mainState,t=e.nhanviens||[],a=e.jobs||[];t.length||this.fetchNv(),a.length||this.fetchJob()}render(){return r.a.createElement(x.a,{className:"isd-advanced-search-form",onSubmit:this.handleSearch},r.a.createElement(k.a,{gutter:24},this.getFields()),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24,style:{textAlign:"center",marginTop:10}},r.a.createElement(v.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Tìm kiếm"),r.a.createElement(v.a,{style:{marginLeft:8},onClick:this.handleReset},"Xóa bộ lọc"))))}});var Nn=Object(o.b)(e=>({mainState:e.main.present}))(Tn),jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function On(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Rn=x.a.Item,Ln=r.a.createContext(),Mn=x.a.create()(e=>{let t=e.form,a=(e.index,On(e,["form","index"]));return r.a.createElement(Ln.Provider,{value:t},r.a.createElement("tr",a))});class qn extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"ma_ns":let e=this.props.khachhang||[];return r.a.createElement(w.a,{style:{maxWidth:200},placeholder:"Chọn nhân viên"},e.map(e=>r.a.createElement(w.a.Option,{key:e.id,value:e.ma_ns},`${e.ma_ns} - ${e.name}`)));case"ma_cv":let t=this.props.jobs||[];return r.a.createElement(w.a,{style:{maxWidth:200},placeholder:"Chọn công việc"},t.map(e=>r.a.createElement(w.a.Option,{key:e.id,value:e.ma_cv},`${e.ma_cv} - ${e.diengiai}  - ${e.heso}`)));case"workday":return r.a.createElement(Ve.a,{placeholder:"Chọn ngày",format:"DD-MM-YYYY"});case"timestart":case"timestop":return r.a.createElement(wn.a,{placeholder:"Chọn giờ",format:"HH:mm"});default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,On(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Ln.Consumer,null,e=>{const l=e.getFieldDecorator;let h;return s&&(h=s[n],"workday"==n?(h=Qe()(h)).isValid()||(h=null):"timestart"!=n&&"timestop"!=n||(h=Qe()(h,"HH:mm")).isValid()||(h=null)),r.a.createElement("td",o,t?r.a.createElement(Rn,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:h})(this.getInput())):o.children)})}}var Bn=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"qlsl/deleteSl/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản lượng!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản lượng!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0,jobsList:{},khachhangList:{},loading:!1},this.columns=[{title:"Ngày tạo",dataIndex:"workday",width:"18%",editable:!0,required:!0,render:(e,t)=>Qe()(e).format("DD-MM-YYYY")},{title:"Mã nhân viên",dataIndex:"ma_ns",editable:!0,required:!0,render:(e,t)=>{let a=e,n="";return this.state.khachhangList&&this.state.khachhangList[e]&&(a=this.state.khachhangList[e].name,n=this.state.khachhangList[e].ma_ns),r.a.createElement("span",null,n," - ",a)}},{title:"Mã công việc",dataIndex:"ma_cv",editable:!0,required:!0,render:(e,t)=>{let a=e,n="",i="";return this.state.jobsList&&this.state.jobsList[e]&&(a=this.state.jobsList[e].diengiai,n=this.state.jobsList[e].ma_cv,i=this.state.jobsList[e].heso),r.a.createElement("span",null,n," - ",a," - ",i)}},{title:"Giờ bắt đầu",dataIndex:"timestart",editable:!0,render:(e,t)=>Qe()(e,"HH:mm").format("HH:mm")},{title:"Giờ kết thúc",dataIndex:"timestop",editable:!0,render:(e,t)=>Qe()(e,"HH:mm").format("HH:mm")},{title:"Kết quả / sản lượng",dataIndex:"sanluong",width:"20%",editable:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Ln.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=jn({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới sản lượng rồi ...")}getDefaultFields(){return{ma_sl:"",ma_ns:"",ma_cv:"",timestart:"",timestop:"",workday:"",ca:"",sanluong:"",address:"",ot:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=jn({},e,a,{workday:a.workday.format("DD-MM-YYYY"),timestart:a.timestart.format("HH:mm"),timestop:a.timestop.format("HH:mm")});fetch(ISD_BASE_URL+"qlsl/updateSl",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(r,1,jn({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){this.setState({loading:!0}),fetch(ISD_BASE_URL+"qlsl/fetchSl",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>jn({},e,{key:t}));this.setState({data:t})}this.setState({loading:!1})}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản lượng!",3),console.log(e),this.setState({loading:!1})})}fetchNhanvien(){fetch(ISD_BASE_URL+"qlns/fetchNs",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({khachhang:e.data})),this.setState({khachhangList:C(e.data,"ma_ns")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchJobs(){fetch(ISD_BASE_URL+"qljobs/fetchJob",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({jobs:e.data})),this.setState({jobsList:C(e.data,"ma_cv")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchNhanvien(),this.fetchJobs(),this.fetchData()}render(){const e={body:{row:Mn,cell:qn}};let t=this.props.mainState.jobs,a=this.props.mainState.khachhang;this.props.mainState.data;const n=this.columns.map(e=>e.editable?jn({},e,{onCell:n=>({record:n,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(n),required:e.required,jobs:t,khachhang:a})}):e);return this.state.selectedRowKeys,this.onSelectChange,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý sản lượng hàng ngày")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:this.state.data,columns:n,loading:this.state.loading,rowClassName:"editable-row",pagination:{pageSize:20},title:()=>r.a.createElement(Nn,{onResult:e=>{this.setState({data:e})},loading:e=>{this.setState({loading:e})}})}))}},Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Pn=Ve.a.RangePicker,Yn=x.a.Item;w.a.Option;const Fn=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1},this.handleSearch=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{let a=Un({},t);if(a.ngay_san_xuat&&a.ngay_san_xuat.length){let e=a.ngay_san_xuat;a.ngay_san_xuat=[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]}if(a.ngay_het_han&&a.ngay_het_han.length){let e=a.ngay_het_han;a.ngay_het_han=[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]}this.search(a)})}),this.handleReset=(()=>{this.props.form.resetFields(),this.search()}),t}search(e){this.setState({loading:!0}),this.props.loading(!0),fetch(ISD_BASE_URL+"khvt/search",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):this.props.dispatch(m({kehoachvt:Un({},this.props.mainState.kehoachvt,{products:e.data})})),this.setState({loading:!1}),this.props.loading(!1)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình tìm kiếm!"),this.setState({loading:!1}),this.props.loading(!1)})}getFields(){this.props.mainState;const e=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{span:8},r.a.createElement(Yn,{label:"Lọc theo vật tư"},e("product_id",{rules:[{required:!1}]})(r.a.createElement(b.a,{placeholder:"Nhập mã vật tư"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Yn,{label:"Lọc theo mã kho"},e("ma_kho",{rules:[{required:!1}]})(r.a.createElement(b.a,{placeholder:"Nhập mã kho"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Yn,{label:"Lọc theo ngày hết hạn"},e("ngay_het_han",{rules:[{required:!1}]})(r.a.createElement(Pn,{placeholder:["Từ Ngày","Đến Ngày"],format:"DD/MM/YYYY"})))))}componentDidMount(){}render(){return r.a.createElement(x.a,{className:"isd-advanced-search-form",onSubmit:this.handleSearch},r.a.createElement(k.a,{gutter:24},this.getFields()),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24,style:{textAlign:"center",marginTop:10}},r.a.createElement(v.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Tìm kiếm"),r.a.createElement(v.a,{style:{marginLeft:8},onClick:this.handleReset},"Reset bộ lọc"))))}});var zn=Object(o.b)(e=>({mainState:e.main.present}))(Fn),Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};C(j),x.a.Item;const Gn={headTitle:"Kế hoạch Vật Tư dài hạn",addNewTitle:"Thêm vật tư"};var Vn=class extends r.a.Component{constructor(e){super(e),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t})}),this.clearFilters=(()=>{this.setState({filteredInfo:null})}),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1,filteredInfo:null,filterDropdownVisible:!1,searchText:"",filtered:!1},this.columns=[{title:"Mã VT",dataIndex:"product_id",width:150},{title:"Tên vật tư",dataIndex:"name"},{title:"Số lượng NVL cần",dataIndex:"sl_nvl"},{title:"Số lượng trong kho",dataIndex:"sl_thucnhap",render:(e,t)=>{let a="error";return t.sl_thucnhap&&t.sl_nvl&&parseFloat(t.sl_thucnhap)>=parseFloat(t.sl_nvl)&&(a="success"),r.a.createElement(Fe.a,{text:e||0,status:a})}},{title:"Mã Kho",dataIndex:"ma_kho"},{title:"Ngày sản xuất",dataIndex:"ngay_san_xuat",render:(e,t)=>e?Qe()(e).format("DD/MM/YYYY"):""},{title:"Ngày hết hạn",dataIndex:"ngay_het_han",render:(e,t)=>e?Qe()(e).format("DD/MM/YYYY"):""}]}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}fetchAllProduct(){this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+"khvt/fetchAllProduct",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({kehoachvt:Qn({},this.props.mainState.kehoachvt,{products:e.data})})):d.a.error(e.message),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchAllProduct()}render(){let e=this.columns;var t=this.state;let a=t.filteredInfo,n=t.searchText;a=a||{},e=e.map(e=>"product_id"==e.dataIndex?Qn({},e,{filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown"},r.a.createElement(b.a,{ref:e=>this.searchInput=e,placeholder:"Nhập mã vật tư",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch}),r.a.createElement(v.a,{type:"primary",onClick:this.onSearch},"Tìm")),filterIcon:r.a.createElement(l.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:e=>{this.setState({filterDropdownVisible:e},()=>this.searchInput&&this.searchInput.focus())}}):e);let i=this.props.mainState.kehoachvt.products||[];return n&&(i=i.map(e=>-1==e.product_id.toLowerCase().indexOf(n.toLowerCase())?null:Qn({},e)).filter(e=>!!e)),this.state.selectedRowKeys,this.onSelectChange,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations no-margin"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},Gn.headTitle)),r.a.createElement(E.a,{span:12}))),r.a.createElement(A.a,{bordered:!0,dataSource:i,columns:e,rowClassName:"editable-row",loading:this.state.loadProduct,size:"small",onChange:this.handleChange,title:()=>r.a.createElement(zn,{loading:e=>{this.setState({loadProduct:e})}})}))}};var Kn=class extends r.a.Component{getProductStatus(){let e={inStock:0,outStock:0,stock:0},t=this.props.mainState.kehoachvt,a=t.products?t.products:[],n=[];return a.forEach(t=>{t.ma_kho&&-1==n.indexOf(t.ma_kho)&&n.push(t.ma_kho),parseFloat(t.sl_thucnhap)>=parseFloat(t.sl_nvl)?e.inStock+=1:e.outStock+=1}),e.stock=n.length,e}render(){let e=this.props.mainState.kehoachvt,t=this.getProductStatus();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations no-margin"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin tổng hợp")),r.a.createElement(E.a,{span:12}))),r.a.createElement("div",{style:{background:"#ECECEC",padding:"10px",marginBottom:10}},r.a.createElement(k.a,{gutter:16},r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Tổng vật tư cần",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},e.products&&e.products.length?e.products.length:0))),r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Vật tư khả dụng",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},t.inStock))),r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Vật tư thiếu",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},t.outStock))),r.a.createElement(E.a,{span:6},r.a.createElement(Wa.a,{title:"Số kho liên quan",bordered:!1},r.a.createElement("div",{className:"isd-status-number"},t.stock))))))}};C(N);var Zn=class extends r.a.Component{constructor(e){super(e)}componentDidMount(){}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kn,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(Vn,{dispatch:this.props.dispatch,mainState:this.props.mainState}))}},Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Hn=Ve.a.RangePicker,Wn=x.a.Item,Xn=w.a.Option;const $n=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1},this.handleSearch=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{let a=Jn({},t);if(a.workday&&a.workday.length){let e=a.workday;a.workday=[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]}this.search(a)})}),this.handleReset=(()=>{this.props.form.resetFields(),this.search()}),t}fetchJob(){fetch(ISD_BASE_URL+"qljobs/fetchJob",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({jobs:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchNv(){fetch(ISD_BASE_URL+"qlns/fetchNs",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({nhanviens:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}search(e){this.setState({loading:!0}),this.props.loading(!0),fetch(ISD_BASE_URL+"cdc/search",{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):this.props.onResult(e.data),this.setState({loading:!1}),this.props.loading(!1)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình tìm kiếm!"),this.setState({loading:!1}),this.props.loading(!1)})}getFields(){let e=this.props.mainState,t=e.jobs||[],a=e.nhanviens||[];const n=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:8},r.a.createElement(Wn,{label:"Lọc theo ngày"},n("workday",{rules:[{required:!1}]})(r.a.createElement(Hn,{placeholder:["Từ Ngày","Đến Ngày"],format:"DD/MM/YYYY"})))),r.a.createElement(E.a,{span:8},r.a.createElement(Wn,{label:"Lọc theo nhân viên"},n("ma_ns",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.join("").toLowerCase().indexOf(e.toLowerCase())>=0,mode:"multiple",placeholder:"Nhập mã nhân viên"},a.map(e=>r.a.createElement(Xn,{value:e.ma_ns,key:e.ma_ns},e.ma_ns," ","-"," ",e.name)))))),r.a.createElement(E.a,{span:8},r.a.createElement(Wn,{label:"Lọc theo mã công việc"},n("ma_cv",{rules:[{required:!1}]})(r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>t.props.children.join("").toLowerCase().indexOf(e.toLowerCase())>=0,mode:"multiple",placeholder:"Nhập mã công việc"},t.map(e=>r.a.createElement(Xn,{value:e.ma_cv,key:e.ma_cv},e.ma_cv," - ",e.diengiai))))))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("div",{className:"filter_adv"},r.a.createElement(Wn,{label:"Tổng công HS 1.0"},r.a.createElement("span",{className:"cdc_result"},"999")))),r.a.createElement(E.a,{span:6},r.a.createElement("div",{className:"filter_adv"},r.a.createElement(Wn,{label:"Tổng công HS 1.2"},r.a.createElement("span",{className:"cdc_result"},"999")))),r.a.createElement(E.a,{span:6},r.a.createElement("div",{className:"filter_adv"},r.a.createElement(Wn,{label:"Tổng công HS 1.3"},r.a.createElement("span",{className:"cdc_result"},"999")))),r.a.createElement(E.a,{span:6},r.a.createElement("div",{className:"filter_adv"},r.a.createElement(Wn,{label:"Tổng công"},r.a.createElement("span",{className:"cdc_result"},"999"))))))}componentDidMount(){let e=this.props.mainState,t=e.nhanviens||[],a=e.jobs||[];t.length||this.fetchNv(),a.length||this.fetchJob()}render(){return r.a.createElement(x.a,{className:"isd-advanced-search-form",onSubmit:this.handleSearch},r.a.createElement(k.a,{gutter:24},this.getFields()),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24,style:{textAlign:"center",marginTop:10}},r.a.createElement(v.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Tìm kiếm"),r.a.createElement(v.a,{style:{marginLeft:8},onClick:this.handleReset},"Xóa bộ lọc"))))}});var er=Object(o.b)(e=>({mainState:e.main.present}))($n),tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function ar(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Ve.a.MonthPicker;const nr=x.a.Item,rr=r.a.createContext(),ir=x.a.create()(e=>{let t=e.form,a=(e.index,ar(e,["form","index"]));return r.a.createElement(rr.Provider,{value:t},r.a.createElement("tr",a))});class sr extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"ma_ns":let e=this.props.khachhang||[];return r.a.createElement(w.a,{placeholder:"Chọn nhân viên"},e.map(e=>r.a.createElement(w.a.Option,{key:e.id,value:e.id},`${e.ma_ns} - ${e.name}`)));case"workday":return r.a.createElement(Ve.a,{placeholder:"Chọn ngày",format:"DD-MM-YYYY"});case"timestart":case"timestop":return r.a.createElement(wn.a,{placeholder:"Chọn giờ",format:"HH:mm"});default:return r.a.createElement(b.a,null)}}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,ar(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(rr.Consumer,null,e=>{const l=e.getFieldDecorator;let h;return s&&(h=s[n],"workday"==n?(h=Qe()(h)).isValid()||(h=null):"timestart"!=n&&"timestop"!=n||(h=Qe()(h,"HH:mm")).isValid()||(h=null)),r.a.createElement("td",o,t?r.a.createElement(nr,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:h})(this.getInput())):o.children)})}}var or=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.state={data:[],total:[],editingKey:"",newitem:0,jobsList:{}},this.columns=[{title:"Mã nhân viên",dataIndex:"ma_ns",editable:!0,required:!0},{title:"Tên nhân viên",dataIndex:"name",editable:!0,required:!0},{title:"Sum 1.0",dataIndex:"heso1",editable:!1},{title:"Sum 1.2",dataIndex:"heso12",editable:!1},{title:"Sum 1.3",dataIndex:"heso13",editable:!1},{title:"Sum OT 1.0",dataIndex:"heso21",editable:!1},{title:"Sum OT 1.2",dataIndex:"heso22",editable:!1},{title:"Sum OT 1.3",dataIndex:"heso23",editable:!1},{title:"Tổng công",dataIndex:"tong_cong",editable:!0},{title:"Công quy đổi",dataIndex:"songay",editable:!0}]}getDefaultFields(){return{ma_sl:"",ma_ns:"",ma_cv:"",timestart:"",timestop:"",workday:"",ca:"",sanluong:"",ot:""}}fetchData(){fetch(ISD_BASE_URL+"cdc/fetchCdc",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>tr({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản lượng!",3),console.log(e)})}fetchNhanvien(){fetch(ISD_BASE_URL+"qlns/fetchNs",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({nhansu:e.data})),this.setState({nhansuList:C(e.data,"ma_ns")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchTotal(){fetch(ISD_BASE_URL+"cdc/fetchTotal",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data[0];this.setState({total:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản lượng!",3),console.log(e)})}componentDidMount(){this.fetchData(),this.fetchTotal(),this.fetchNhanvien()}render(){const e={body:{row:ir,cell:sr}};this.props.mainState.data,this.props.mainState.nhansu;const t=this.columns.map(e=>e.editable?tr({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return this.columns.map(e=>e.editable?tr({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Chuyển đổi công hàng tháng")))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:this.state.data,columns:t,rowClassName:"editable-row",title:()=>r.a.createElement(er,{onResult:e=>{this.setState({data:e})},loading:e=>{this.setState({loading:e})}})}))}};const lr=x.a.Item;w.a.Option,v.a.Group;var hr=x.a.create()(class extends r.a.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||this.props.saveData(t)})})}render(){this.props.mainState.quyTrinhSx;const e=this.props.form.getFieldDecorator;return r.a.createElement(x.a,{onSubmit:this.handleSubmit},r.a.createElement(lr,{label:"Tên quy trình",labelCol:{span:5},wrapperCol:{span:12}},e("name",{rules:[{required:!0,message:"Nhập tên quy trình!"}]})(r.a.createElement(b.a,null))),r.a.createElement(lr,{label:"Mô tả quy trình",labelCol:{span:5},wrapperCol:{span:12}},e("note",{rules:[{required:!1}]})(r.a.createElement(b.a.TextArea,{autosize:{minRows:2,maxRows:6}}))),r.a.createElement(lr,{wrapperCol:{span:12,offset:5}},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Tạo quy trình ",r.a.createElement(l.a,{type:"save"}))))}}),dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const cr={headTitle:"Quản lý quy trình sản xuất",addNewTitle:"Thêm quy trình mới"},pr={fetch:"quytrinhsx/fetch",update:"quytrinhsx/update",delete:"quytrinhsx/delete/"};var ur=class extends r.a.Component{constructor(e){super(e),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+pr.delete+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message||"Có lỗi xảy ra khi xoá quy trình sản xuất!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá quy trình sản xuất!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],addNewItem:!1,currentZoom:"Days"},this.back=this.back.bind(this),this.saveData=this.saveData.bind(this),this.columns=[{title:"Tên quy trình",dataIndex:"name",editable:!1},{title:"Mô tả",dataIndex:"note",editable:!1},{title:"Ngày Tạo",dataIndex:"create_on",editable:!1},{title:"Người Tạo",dataIndex:"username",render:(e,t)=>t.nick_name||e},{title:"Actions",dataIndex:"operation",render:(e,t)=>r.a.createElement("div",{style:{minWidth:100}},r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},"Xem chi tiết")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá")))}]}getDefaultFields(){return{id:"",name:"",note:""}}addNewRow(){this.props.dispatch(m({quyTrinhSx:dr({},this.props.mainState.quyTrinhSx,{openModal:!0})}))}view(e){this.props.mainState.quyTrinhSx,this.props.dispatch(m({quyTrinhSx:dr({},this.props.mainState.quyTrinhSx,{edit:e}),ganttData:{data:[],links:[]}}))}saveData(e){fetch(ISD_BASE_URL+pr.update,{method:"POST",headers:I(),body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),e.newRecord?(this.props.dispatch(m({quyTrinhSx:dr({},this.props.mainState.quyTrinhSx,{edit:e.newRecord,openModal:!1}),ganttData:{links:[],data:[]}})),this.fetchData()):this.back())}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa quy trình!")})}back(){this.props.dispatch(m({quyTrinhSx:dr({},this.props.mainState.quyTrinhSx,{edit:{},refresh:!0})}))}fetchData(){fetch(ISD_BASE_URL+pr.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}));else if(e.data){let t=e.data.map((e,t)=>dr({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(m({quyTrinhSx:dr({},this.props.mainState.quyTrinhSx,{refresh:!1})}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu quy trình sản xuất!",3),console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.quyTrinhSx.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData()}logTaskUpdate(e,t,a){let n=`Task ${t}: ${e} ${a&&a.text?` (${a.text})`:""}`;d.a.success(n)}logLinkUpdate(e,t,a){let n=`Link ${t}: ${e}`;a&&(n+=` ( source: ${a.source}, target: ${a.target} )`),d.a.success(n)}handleZoomChange(e){this.setState({currentZoom:e})}render(){var e=this.props;let t=e.mainState,a=e.dispatch,n=t.quyTrinhSx;const i=this.columns;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{title:"Form quy trình sản xuất",visible:n.openModal,onCancel:()=>{a(m({quyTrinhSx:dr({},t.quyTrinhSx,{openModal:!1})}))},footer:null},r.a.createElement(hr,{saveData:this.saveData,dispatch:this.props.dispatch,mainState:this.props.mainState})),n.edit&&n.edit.id?r.a.createElement("div",{className:"edit-quy-trinh"},r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{onChange:e=>{a(m({quyTrinhSx:dr({},t.quyTrinhSx,{edit:dr({},t.quyTrinhSx.edit,{name:e.target.value})})}))},value:n.edit.name})),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a.Group,null,r.a.createElement(v.a,{style:{marginRight:10},onClick:this.back,icon:"left"},"Quay lại"),r.a.createElement(v.a,{onClick:()=>{this.saveData(t.quyTrinhSx.edit)},type:"primary",icon:"save"},"Lưu thay dổi")))))),r.a.createElement("div",{className:"wrap-gantt-chart"},r.a.createElement(ut,{type:"quy_trinh_mau",mainState:this.props.mainState,dispatch:this.props.dispatch}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},cr.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},cr.addNewTitle))))),r.a.createElement(A.a,{bordered:!0,dataSource:this.state.data,columns:i,rowClassName:"editable-row"})))}};var mr=class extends n.Component{constructor(e){super(e)}render(){var e=this.props;let t=e.mainState,a=e.dispatch;return r.a.createElement("div",{className:"wrap-gantt-chart khdh"},r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Kế hoạch sản xuất dài hạn")),r.a.createElement(E.a,{span:12}))),r.a.createElement(ut,{mainState:t,dispatch:a,type:"allPlan"}))}},gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const _r=x.a.Item,fr=w.a.Option;var yr=class extends r.a.Component{constructor(e){super(e)}fetchData(){fetch(ISD_BASE_URL+"qlkho/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}componentDidMount(){this.props.mainState.kho.length||this.fetchData()}render(){var e=this.props.mainState;let t=e.kkvt,a=e.phieuAction,n=!(!a||"view"!=a.action),i=1==t.tinh_trang,s="",o=this.props.mainState.kho;return o.length&&(s=o.map(e=>r.a.createElement(fr,{key:e.id,value:e.ma_kho},e.name))),r.a.createElement(x.a,null,""!=t.ma_phieu&&this.props.isInventoryOwner?r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(_r,{label:"Trạng Thái",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(K.a,{checkedChildren:"Đã duyệt",unCheckedChildren:"Chưa duyệt",checked:i,onChange:e=>{this.props.pheDuyet(e)}}))),r.a.createElement(E.a,{span:12},r.a.createElement(_r,{label:"Lý do sửa phiếu",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({kkvt:gr({},this.props.mainState.kkvt,{editNote:e.target.value})}))},value:t.editNote})))):null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(_r,{label:"Tại Kho",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(w.a,{disabled:n,onChange:e=>{this.props.dispatch(m({kkvt:gr({},this.props.mainState.kkvt,{ma_kho:e})}))},defaultValue:t.ma_kho,placeholder:"Chọn kho"},s))),r.a.createElement(E.a,{span:12},r.a.createElement(_r,{label:"Ngày tạo",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a,{readOnly:!0,onChange:e=>{},value:t.create_on||Qe()(new Date).format("DD/MM/YYYY")})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(_r,{label:"Mô tả",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({kkvt:gr({},this.props.mainState.kkvt,{note:e.target.value})}))},value:t.note}))),r.a.createElement(E.a,{span:12},r.a.createElement(_r,{label:"Địa điểm",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(b.a.TextArea,{readOnly:n,autosize:{minRows:2,maxRows:6},onChange:e=>{this.props.dispatch(m({kkvt:gr({},this.props.mainState.kkvt,{address:e.target.value})}))},value:t.address})))))}},Er=a(117),br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function xr(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Sr=C(j),kr=x.a.Item,vr=r.a.createContext(),wr={headTitle:"Vật tư kiểm kê",addNewTitle:"Kiểm kê vật tư"},Ar={fetch:"kkvt/fetch",update:"kkvt/updateProduct",delete:"kkvt/deleteProduct/",changeStatus:"kkvt/changeStatus"},Cr=x.a.create()(e=>{let t=e.form,a=(e.index,xr(e,["form","index"]));return r.a.createElement(vr.Provider,{value:t},r.a.createElement("tr",a))});class Ir extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"product_id":let e=this.props.products;return r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{let a=t.props.children.split("-");return a&&a[3]&&(a=a[3].trim()),console.log(a,this.props),!1},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,style:{width:200},placeholder:"Chọn VT"},e.map(e=>r.a.createElement(w.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `)));case"sl_thucnhap":case"sl_chungtu":case"price":return r.a.createElement(We.a,{formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")});case"ngay_san_xuat":case"ngay_het_han":return r.a.createElement(Ve.a,{placeholder:"Chọn ngày",format:"DD/MM/YYYY"});default:return r.a.createElement(b.a,null)}}),this.handleChange=(e=>{console.log(e)}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,xr(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(vr.Consumer,null,e=>{const l=e.getFieldDecorator;let h;return s&&(h=s[n],"ngay_san_xuat"!=n&&"ngay_het_han"!=n||(h=Qe()(h)).isValid()||(h=null)),r.a.createElement("td",o,t?r.a.createElement(kr,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:h})(this.getInput())):o.children)})}}var Dr=class extends r.a.Component{constructor(e){super(e),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.changeStatus=((e,t)=>{this.setState({loading:!0});let a={ids:this.state.selectedRowKeys,type:t,status:e};fetch(ISD_BASE_URL+Ar.changeStatus,{method:"POST",headers:I(),body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(this.fetchSelectedProduct(),d.a.success(e.message)),this.setState({selectedRowKeys:[],loading:!1})}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.isEditing=(e=>e.key===this.props.mainState.phieuAction.editingKey),this.cancel=(e=>{this.props.dispatch(m({phieuAction:br({},this.props.mainState.phieuAction,{editingKey:""})}))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Ar.delete+e.id,{headers:I()}).then(e=>e.json()).then(t=>{if("error"==t.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let a=this.props.mainState.kkvt.products.filter(t=>t.key!=e.id);this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:a})})),d.a.success(t.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.props.mainState.kkvt.products.filter(t=>t.key!=e.key);this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:t})}))}}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1},this.columns=[{title:"Mã VT",dataIndex:"product_id",width:150,editable:!0,required:!0},{title:"Quy cách",dataIndex:"label",width:200,editable:!0,required:!0},{title:"ĐVT",dataIndex:"unit",width:100,editable:!0},{title:"SL tồn",dataIndex:"sl_chungtu",width:"120",editable:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"SL thực tế",dataIndex:"sl_thucnhap",width:"120",editable:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Ngày SX",dataIndex:"ngay_san_xuat",width:"200px",editable:!0,required:!1,render:(e,t)=>e?Qe()(e).format("DD/MM/YYYY"):""},{title:"Ngày Hết Hạn",dataIndex:"ngay_het_han",width:"200px",editable:!0,required:!1,render:(e,t)=>e?Qe()(e).format("DD/MM/YYYY"):""},{title:"Actions",dataIndex:"operation",width:100,render:(e,t)=>{if(this.isReadOnly())return"";const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(vr.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}showCheckStatus(e){if(e){let t="info";return"2"==e&&(t="error"),"1"==e&&(t="success"),r.a.createElement(c.a,{message:Sr[e].text,type:t,showIcon:!0})}return r.a.createElement(c.a,{message:Sr[0].text,type:"info",showIcon:!0})}addNewRow(){let e=this.props.mainState.kkvt.products,t=this.props.mainState.phieuAction.editingKey;if(void 0!==t&&""!==t)return!1;let a=this.getDefaultFields();a=br({},a,{key:e.length+1}),this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:[a,...e]}),phieuAction:br({},this.props.mainState.phieuAction,{editingKey:a.key})}))}getDefaultFields(){return{ma_phieu:"",product_id:"",label:"",ma_lo:"",unit:"kg",sl_chungtu:"1",sl_thucnhap:"1",price:0,qc_check:"0",qa_check:"0",ngay_het_han:"",ngay_san_xuat:""}}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}edit(e){this.props.dispatch(m({phieuAction:br({},this.props.mainState.phieuAction,{editingKey:e})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.props.mainState.kkvt.products];let r=this.props.mainState.kkvt.ma_phieu||"";const i=n.findIndex(e=>t===e.key);if(i>-1){const e=n[i];let t=br({},e,a,{ma_phieu:r,ngay_san_xuat:a.ngay_san_xuat?a.ngay_san_xuat.format("YYYY-MM-DD"):"",ngay_het_han:a.ngay_het_han?a.ngay_het_han.format("YYYY-MM-DD"):""});if(!n.id&&!r)return n.splice(i,1,br({},t)),this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:n}),phieuAction:br({},this.props.mainState.phieuAction,{editingKey:""})})),!1;r&&fetch(ISD_BASE_URL+Ar.update,{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(i,1,br({},t,e.data)),this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:n}),phieuAction:br({},this.props.mainState.phieuAction,{editingKey:""})})),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchProduct(){fetch(ISD_BASE_URL+"kkvt/fetchProductDetailsList",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({products:e.data})),this.setState({productList:C(e.data)})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchSelectedProduct(){let e=this.props.mainState.kkvt.ma_phieu;this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+`kkvt/fetchSelectedProduct/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:e.data})})):(d.a.error(e.message),this.props.dispatch(m({kkvt:br({},this.props.mainState.kkvt,{products:[]})}))),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}getStatusMenu(e){const t=j.map(t=>r.a.createElement(p.a.Item,{key:t.id},r.a.createElement("a",{onClick:()=>{this.changeStatus(t.id,e)},rel:"noopener noreferrer"},t?t.text:"")));return r.a.createElement(p.a,null,t)}getActionsByRoles(){var e=this.state;let t=e.selectedRowKeys,a=e.loading;const n=t.length>0;return r.a.createElement("div",{style:{marginBottom:16}},this.props.isQC?r.a.createElement(Er.a,{className:"qc_button_check",overlay:this.getStatusMenu("qc_check"),trigger:["click"],disabled:!n},r.a.createElement(v.a,{type:"primary",loading:a},"QC Phê duyệt")):null,this.props.isQA?r.a.createElement(Er.a,{className:"qc_button_check",overlay:this.getStatusMenu("qa_check"),trigger:["click"],disabled:!n},r.a.createElement(v.a,{type:"primary",loading:a},"QA Phê duyệt")):null,r.a.createElement("span",{style:{marginLeft:8}},n?`Đã chọn ${t.length} vật tư`:""))}componentDidMount(){var e=this.props.mainState;let t=e.products,a=e.kkvt;t.length||this.fetchProduct(),a.ma_phieu&&this.fetchSelectedProduct()}render(){const e={body:{row:Cr,cell:Ir}};let t=this.props.mainState.products,a=this.columns.map(e=>e.editable?br({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,products:t})}):e);a=a.filter(e=>{if(this.props.isQA||this.props.isQC){if("operation"==e.dataIndex)return!1;if(this.props.isQC&&"qa_check"==e.dataIndex)return!1}return!0});let n=this.props.mainState.kkvt.products||[];const i={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},wr.headTitle)),this.isReadOnly()?null:r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},wr.addNewTitle))))),r.a.createElement(A.a,{rowSelection:i,components:e,bordered:!0,dataSource:n,columns:a,rowClassName:"editable-row",loading:this.state.loadProduct,scroll:{x:1500}}))}},Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var Nr=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.handleSubmit=(e=>{e.preventDefault(),this.validBeforeSave()&&fetch(ISD_BASE_URL+"kkvt/update",{method:"POST",headers:I(),body:JSON.stringify(this.props.mainState.kkvt)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({kkvt:{refresh:!0},phieuAction:{}})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),t}validBeforeSave(){let e=this.props.mainState.kkvt;return e.ma_kho?e.products.length?!(""!=e.ma_phieu&&!e.editNote&&(d.a.error("Hãy nhập lý do sửa phiếu"),1)):(d.a.error("Chưa có sản phẩm nào trong phiếu này."),!1):(d.a.error("Mã kho không được để trống"),!1)}pheDuyet(e){this.setState({loading:!0});let t={value:e,ma_phieu:this.props.mainState.kkvt.ma_phieu};fetch(ISD_BASE_URL+"kkvt/pheduyet",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({kkvt:Tr({},this.props.mainState.kkvt,{refresh:!0},e.data)})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình phê duyệt!")})}cancel(){this.props.dispatch(m({phieuAction:Tr({},this.props.mainState.phieuAction,{addNewItem:!1})}))}render(){var e=this.props.mainState;let t=e.phieuAction,a=e.kkvt.tinh_trang||"";return r.a.createElement("div",null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin phiếu kiểm kê")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},t&&"edit"==t.action?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:this.handleSubmit,type:"primary",htmlType:"button",icon:"save"},"Lưu"),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel()},r.a.createElement(v.a,{style:{marginLeft:10},type:"danger"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,this.props.isInventoryOwner?r.a.createElement(r.a.Fragment,null,1==a?r.a.createElement(v.a,{onClick:()=>this.pheDuyet(0),style:{marginRight:10},icon:"exclamation-circle",type:"danger"},"Huỷ phê duyệt"):r.a.createElement(v.a,{onClick:()=>this.pheDuyet(1),style:{marginRight:10},icon:"check-circle",type:"primary"},"Phê duyệt")):null,this.props.isInventoryOwner?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá phiếu này?",onConfirm:()=>this.props.onDelete()},r.a.createElement(v.a,{style:{marginRight:10},icon:"close-circle",type:"danger"},"Xoá")),r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieuAction:Tr({},this.props.mainState.phieuAction,{action:"edit"})}))},type:"primary",htmlType:"button",icon:"edit"},"Sửa")):null,r.a.createElement(v.a,{onClick:()=>this.cancel(),style:{marginLeft:10},icon:"left",type:"default"},"Quay lại")))))),r.a.createElement(yr,{pheDuyet:e=>{this.pheDuyet(e)},isInventoryOwner:this.props.isInventoryOwner,dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(Dr,{isQA:this.props.isQA,isQC:this.props.isQC,dispatch:this.props.dispatch,mainState:this.props.mainState}))}}),jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Or(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Rr=C(N),Lr=x.a.Item,Mr=r.a.createContext(),qr={headTitle:"Quản lý kiểm kê",addNewTitle:"Tạo phiếu mới"},Br={fetch:"kkvt/fetch",delete:"kkvt/delete/"},Ur=x.a.create()(e=>{let t=e.form,a=(e.index,Or(e,["form","index"]));return r.a.createElement(Mr.Provider,{value:t},r.a.createElement("tr",a))});class Pr extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,Or(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Mr.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(Lr,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var Yr=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.delete=(()=>{let e=this.props.mainState.kkvt.id;e&&fetch(ISD_BASE_URL+Br.delete+e,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.props.dispatch(m({kkvt:{},phieuAction:jr({},this.props.mainState.phieuAction,{addNewItem:!1})}))}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)})}),this.state={data:[],addNewItem:!1},this.props.mainState.userInfo,this.columns=[{title:"Ngày Tạo",dataIndex:"create_on",editable:!1},{title:"Mã Kho",dataIndex:"ma_kho",editable:!1},{title:"Người kiểm kê",dataIndex:"create_by",editable:!1,render:(e,t)=>t.name||e},{title:"Mô tả",dataIndex:"note",editable:!1},{title:"Người Duyệt",dataIndex:"user_check"},{title:"Tình trạng",dataIndex:"tinh_trang",editable:!1,render:(e,t)=>{let a="processing";return"0"==e&&(a="error"),"1"==e&&(a="success"),r.a.createElement(Fe.a,{text:Rr[e].text||e,status:a})}},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Mr.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},"Xem chi tiết")))}}]}getDefaultFields(){return{id:"",ma_kho:"",ma_phieu:"",nguoi_giao_dich:"",so_chung_tu:"",note:"",address:"",products:[],tinh_trang:"2"}}addNewRow(){this.props.dispatch(m({phieuAction:jr({},this.props.mainState.phieuAction,{addNewItem:!0,action:"edit",editingKey:""}),kkvt:this.getDefaultFields()}))}isQC(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("nhomqc")}isQA(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("nhomqa")}isInventoryOwner(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("nhom_thu_kho")}view(e){var t=this.props.mainState;let a=t.kkvt,n=t.phieuAction;e&&e.ma_phieu&&e.id&&this.props.dispatch(m({kkvt:jr({},a,e),phieuAction:jr({},n,{addNewItem:!0,action:"view"})}))}fetchData(){fetch(ISD_BASE_URL+Br.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>jr({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(m({kkvt:jr({},this.props.mainState.kkvt,{refresh:!1})}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.kkvt.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData()}render(){let e=this.props.mainState;const t={body:{row:Ur,cell:Pr}},a=this.columns.map(e=>e.editable?jr({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,e.phieuAction.addNewItem?r.a.createElement(Nr,{onDelete:()=>this.delete(),isInventoryOwner:this.isInventoryOwner(),dispatch:this.props.dispatch,mainState:this.props.mainState}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},qr.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},qr.addNewTitle))))),r.a.createElement(A.a,{components:t,bordered:!0,dataSource:this.state.data,columns:a,rowClassName:"editable-row"})))}},Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function zr(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const Qr=x.a.Item,Gr=r.a.createContext(),Vr=x.a.create()(e=>{let t=e.form,a=(e.index,zr(e,["form","index"]));return r.a.createElement(Gr.Provider,{value:t},r.a.createElement("tr",a))});class Kr extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,zr(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Gr.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(Qr,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var Zr=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"lang/deleteLang/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t,sortedInfo:a})}),this.state={data:[],editingKey:"",newitem:0,searchText:""},this.columns=[{title:"Mã ngôn ngữ",dataIndex:"ma_text",width:"15%",editable:!0,required:!0},{title:"Việt Nam",dataIndex:"vi",editable:!0,required:!0},{title:"English",dataIndex:"en",editable:!0,required:!0},{title:"Actions",dataIndex:"operation",render:(e,t)=>{const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Gr.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},r.a.createElement(l.a,{type:"edit"}),"Sửa")))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=Fr({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới danh mục rồi ...")}getDefaultFields(){return{name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=Fr({},e,a);fetch(ISD_BASE_URL+"lang/updateLang",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,Fr({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"lang/fetchListLang",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Fr({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu danh mục!",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:Vr,cell:Kr}},t=this.columns.map(e=>e.editable?Fr({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let a=this.state.searchText,n=[...this.state.data];return a&&(n=n.map(e=>-1==`${e.ma_text}${e.vi}${e.en}`.toLowerCase().indexOf(a.toLowerCase())?null:Fr({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Quản lý Ngôn ngữ")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},"Thêm mới"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:n,columns:t,onChange:this.handleChange,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Hr=x.a.Item,Wr=w.a.Option;var Xr=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={confirmDirty:!1,groupUser:[]},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){let e=this.props.mainState.systemNote;t.id=e.id?e.id:"",fetch(ISD_BASE_URL+"note/updateNote",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):d.a.success(e.message)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình thêm ghi chú!")})}})}),this.handleConfirmBlur=(e=>{const t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}),this.normFile=(e=>(console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList)),t}fetchGroupUser(){fetch(ISD_BASE_URL+"qlpb/fetchPb",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({groupUser:e.data}),this.props.dispatch(m({groupUser:e.data}))):console.warn(e.message)}).catch(e=>{console.log(e)})}fetchUserList(){fetch(ISD_BASE_URL+"users/fetchUsers",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({userlist:e.data}),this.props.dispatch(m({userlist:e.data}))):console.warn(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){let e=this.props.mainState.groupUser;e&&e.length||this.fetchGroupUser();let t=this.props.mainState.userlist;t&&t.length||this.fetchUserList()}render(){const e=this.props.form.getFieldDecorator,t={labelCol:{},wrapperCol:{xs:{span:24},sm:{span:24}}},a={labelCol:{},wrapperCol:{xs:{span:20},sm:{span:20}}};var n=this.props.mainState;let i=n.systemNote,s=n.groupUser,o=n.ans_language,h=n.userlist,d=[],c=[];s&&s.length&&(d=s.map(e=>r.a.createElement(Wr,{value:e.ma_pb,key:e.ma_pb},e.ma_pb," - ",e.name))),h&&h.length&&(c=h.map(e=>r.a.createElement(Wr,{value:e.id,key:e.id},e.name)));let p=[];i.assign_users&&""!=i.assign_users&&(p="string"==typeof i.assign_users?i.assign_users.split(","):i.assign_users);let u=[];return i.assign_group&&""!=i.assign_group&&(u="string"==typeof i.assign_group?i.assign_group.split(","):i.assign_group),r.a.createElement(x.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:"24"},r.a.createElement(Hr,Jr({},t,{label:r.a.createElement("span",null,o.ans_note_titles||"ans_note_titles","  ",r.a.createElement(F.a,{title:o.ans_note_titles_note||"ans_note_titles_note"},r.a.createElement(l.a,{type:"question-circle-o"})))}),e("titles",{initialValue:i.titles,rules:[{required:!0,message:o.ans_pls_enter_title||"ans_pls_enter_title",whitespace:!0}]})(r.a.createElement(b.a,null)))),r.a.createElement(E.a,{span:12},r.a.createElement(Hr,Jr({},a,{label:o.ans_group_assign||"ans_group_assign"}),e("assign_group",{initialValue:u,rules:[{required:!1,message:o.ans_choose_team||"ans_choose_team"}]})(r.a.createElement(w.a,{placeholder:"Chọn phòng ban",mode:"multiple",onChange:e=>{console.log(e)}},r.a.createElement(Wr,{value:"all"},o.ans_all_team||"ans_all_team"),d)))),r.a.createElement(E.a,{span:12},r.a.createElement(Hr,Jr({},a,{label:o.ans_user_assign||"ans_user_assign"}),e("assign_users",{initialValue:p})(r.a.createElement(w.a,{placeholder:o.ans_user_assign_note||"ans_user_assign_note",mode:"multiple",onChange:e=>{console.log(e)}},r.a.createElement(Wr,{value:"all"},o.ans_assign_all_user||"ans_assign_all_user"),c))))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24},r.a.createElement(Hr,Jr({},t,{label:"Nội dung"}),e("note",{initialValue:i.note})(r.a.createElement(b.a.TextArea,{style:{width:"100%"}})))),r.a.createElement(E.a,{span:24},r.a.createElement(Hr,Jr({},t,{label:"Upload",extra:""}),e("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(Tt.a,{name:"logo",action:"/upload",listType:"picture"},r.a.createElement(v.a,null,r.a.createElement(l.a,{type:"upload"})," ",o.ans_attach_file||"ans_attach_file")))))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24},r.a.createElement(Hr,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},o.ans_send||"ans_send")))))}}),$r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};x.a.Item;var ei=class extends r.a.Component{addNewRow(){let e=this.getDefaultFields();this.edit(e)}getDefaultFields(){return{name:"",description:""}}edit(e){this.props.dispatch(m({systemNote:$r({},e,{openModal:!0})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=$r({},e,a);fetch(ISD_BASE_URL+"note/updateNote",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,$r({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0,this.props.dispatch(m({systemNote:$r({},record,{openModal:!1})})))}).catch(e=>{console.log("parsing failed",e),d.a.error(ans_language.ans_save_error||"ans_save_error")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"note/fetchNote",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>$r({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu danh mục!",3),console.log(e)})}fetchUserList(){fetch(ISD_BASE_URL+"users/fetchUsers",{headers:I()}).then(e=>e.json()).then(e=>{e.data?(this.setState({users:e.data}),this.props.dispatch(m({userlist:C(e.data,"id")}))):console.warn(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){let e=this.props.mainState;this.fetchData(),0==e.userlist.length&&this.fetchUserList()}render(){const e=this.columns;let t=this.props.mainState,a=!!t.systemNote&&t.systemNote.openModal,n=t.ans_language;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},n.ans_note_main_title||"ans_note_main_title")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},n.ans_add_new||"ans_add_new"))))),a?r.a.createElement(Y.a,{width:"80%",style:{top:20},title:n.ans_add_new_note||"ans_add_new_note",visible:a,onCancel:()=>{this.props.dispatch(m({systemNote:$r({},this.props.mainState.systemNote,{openModal:!1})}))},onOk:()=>{},footer:null},r.a.createElement(Xr,{mainState:this.props.mainState,dispatch:this.props.dispatch})):null,r.a.createElement(A.a,{bordered:!0,dataSource:this.state.data,columns:e,rowClassName:"editable-row"}))}constructor(e){super(e),this.cancel=(e=>{}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"note/deleteNote/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],editingKey:"",newitem:0};let t=this.props.mainState.ans_language;this.props.mainState.userlist,this.columns=[{title:t.ans_date_create||"ans_date_create",dataIndex:"create_on",width:"120px",editable:!1,required:!0,render:e=>e?Qe()(e).format("DD/MM/YYYY"):""},{title:t.ans_create_by||"ans_create_by",dataIndex:"name",width:150,editable:!0,required:!0,render:(e,t)=>t.name||e},{title:t.ans_titles||"ans_titles",dataIndex:"titles",width:"20%",editable:!0,required:!0},{title:t.ans_assign_user||"ans_assign_user",dataIndex:"assign_users",editable:!0,required:!0,render:e=>{let a=e?e.split(","):[],n="";return-1!==a.indexOf("all")?n=t.ans_assign_all_ppls||"ans_assign_all_ppls":a.length>1&&a.map(e=>console.log(e)),r.a.createElement("div",null,n)}},{title:t.ans_assign_group||"ans_assign_group",dataIndex:"assign_group",editable:!0,required:!0},{title:t.ans_actions||"ans_actions",dataIndex:"operation",width:"150px",render:(e,a)=>r.a.createElement("div",{style:{minWidth:100}},r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(a)},r.a.createElement(l.a,{type:"edit"}),t.ans_edit||"ans_edit")," | ",r.a.createElement(S.a,{title:t.ans_confirm_delete_alert||"ans_confirm_delete_alert",okType:"danger",onConfirm:()=>this.delete(a)},r.a.createElement("a",{href:"javascript:;"},r.a.createElement(l.a,{type:"delete"}),t.ans_delete||"ans_delete")))}]}},ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const ai=x.a.Item;w.a.Option;var ni=x.a.create()(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={confirmDirty:!1,groupUser:[]},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){if(t.hash&&t.hash!==t.confirm)return d.a.error("Mật khẩu không khớp, xin hãy nhập lại!"),!1;let e=this.props.mainState.userInfo,a=e&&e.id?e.id:"";t.id=a,fetch(ISD_BASE_URL+"users/updateUserByUser",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}));else{d.a.success(e.message);let t={userInfo:ti({},this.props.mainState.userInfo,e.data)};e.update_pass&&(t.showLogin=!0),this.props.dispatch(m(t))}}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình cập nhật thông tin!")})}})}),this.handleConfirmBlur=(e=>{const t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}),this.compareToFirstPassword=((e,t,a)=>{const n=this.props.form;t&&t!==n.getFieldValue("hash")?a("Hai mật khẩu chưa khớp!"):a()}),this.validateToNextPassword=((e,t,a)=>{const n=this.props.form;t&&this.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),a()}),t}componentDidMount(){}render(){const e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};let a=this.props.mainState.userInfo;return r.a.createElement(x.a,{onSubmit:this.handleSubmit},r.a.createElement(ai,ti({},t,{label:r.a.createElement("span",null,"Tên đăng nhập ",r.a.createElement(F.a,{title:"Dùng để đăng nhập hệ thống!"},r.a.createElement(l.a,{type:"question-circle-o"})))}),e("username",{initialValue:a.username,rules:[{required:!0,message:"Hãy nhập tên đăng nhập!",whitespace:!0}]})(r.a.createElement(b.a,{disabled:!0}))),r.a.createElement(ai,ti({},t,{label:"E-mail"}),e("email",{initialValue:a.email,rules:[{type:"email",message:"Email không hợp lệ!"},{required:!0,message:"Hãy nhập E-mail!"}]})(r.a.createElement(b.a,null))),a.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(ai,ti({},t,{label:"Mật khẩu mới"}),e("hash",{rules:[{required:!1,message:"Nhãy nhập mật khẩu!"},{validator:this.validateToNextPassword}]})(r.a.createElement(b.a,{type:"password"}))),r.a.createElement(ai,ti({},t,{label:"Nhập lại mật khẩu mới"}),e("confirm",{rules:[{required:!1,message:"Nhập lại mật khẩu!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(b.a,{type:"password",onBlur:this.handleConfirmBlur})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ai,ti({},t,{label:"Mật khẩu"}),e("hash",{rules:[{required:!0,message:"Nhãy nhập mật khẩu!"},{validator:this.validateToNextPassword}]})(r.a.createElement(b.a,{type:"password"}))),r.a.createElement(ai,ti({},t,{label:"Nhập lại mật khẩu"}),e("confirm",{rules:[{required:!0,message:"Nhập lại mật khẩu!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(b.a,{type:"password",onBlur:this.handleConfirmBlur})))),r.a.createElement(ai,ti({},t,{label:"Họ và tên"}),e("name",{initialValue:a.name})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(ai,ti({},t,{label:"Mã nhân sự"}),e("ma_ns",{initialValue:a.ma_ns})(r.a.createElement(b.a,{disabled:!0,style:{width:"100%"}}))),r.a.createElement(ai,ti({},t,{label:"Điện thoại"}),e("phone",{initialValue:a.phone})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(ai,ti({},t,{label:"Tổ"}),e("to_hanh_chinh",{initialValue:a.to_hanh_chinh})(r.a.createElement(b.a,{disabled:!0,style:{width:"100%"}}))),r.a.createElement(ai,ti({},t,{label:"Thông tin"}),e("description",{initialValue:a.description})(r.a.createElement(b.a,{style:{width:"100%"}}))),r.a.createElement(ai,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Cập nhật")))}});x.a.Item;var ri=class extends r.a.Component{constructor(e){super(e)}componentDidMount(){}render(){return this.props.mainState,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},"Thông tin cá nhân")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"})))),r.a.createElement(ni,{mainState:this.props.mainState,dispatch:this.props.dispatch}))}},ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function si(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const oi=x.a.Item,li=r.a.createContext(),hi=x.a.create()(e=>{let t=e.form,a=(e.index,si(e,["form","index"]));return r.a.createElement(li.Provider,{value:t},r.a.createElement("tr",a))});class di extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,si(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(li.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(oi,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var ci=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.cancel=(e=>{this.setState({editingKey:""}),1==this.state.newitem&&(this.state.newitem=0,this.delete(e))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+"opts/deleteOpts/"+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error(e.message,3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message),this.state.newitem=0}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá dữ liệu kho!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.onInputChange=(e=>{this.setState({searchText:e.target.value})}),this.onSearch=(()=>{const e=this.state.searchText;this.setState({filterDropdownVisible:!1,filtered:!!e})}),this.handleChange=((e,t,a)=>{this.setState({filteredInfo:t,sortedInfo:a})}),this.state={data:[],editingKey:"",newitem:0};let t=this.props.mainState.ans_language;this.columns=[{title:t.ans_config_title||"ans_config_title",dataIndex:"ma_opt",width:"15%",editable:!1,required:!0},{title:t.ans_config_default_title||"ans_config_default_title",dataIndex:"defaultconfig",editable:!1,required:!0},{title:t.ans_config_custom_title||"ans_config_custom_title",dataIndex:"config",editable:!0,required:!0},{title:t.ans_actions||"ans_actions",dataIndex:"operation",render:(e,a)=>{const n=this.isEditing(a);return r.a.createElement("div",{style:{minWidth:100}},n?r.a.createElement("span",null,r.a.createElement(li.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,a.key),style:{marginRight:8}},r.a.createElement(l.a,{type:"save"}),t.ans_save||"ans_save")),r.a.createElement(S.a,{title:t.ans_confirm_cancel||"ans_confirm_cancel",onConfirm:()=>this.cancel(a)}," | ",r.a.createElement("a",{href:"javascript:;"},r.a.createElement(l.a,{type:"close"}),t.ans_cancel||"ans_cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(a.key)},r.a.createElement(l.a,{type:"edit"}),t.ans_edit||"ans_edit")))}}]}addNewRow(){if(0==this.state.newitem){let e=this.getDefaultFields();e=ii({},e,{key:this.state.data.length+1}),this.setState({data:[e,...this.state.data],editingKey:e.key}),this.state.newitem=1}else d.a.error("Bạn đang thêm mới cấu hình rồi ...")}getDefaultFields(){return{name:"",description:""}}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.state.data],r=n.findIndex(e=>t===e.key);if(r>-1){const e=n[r];let t=ii({},e,a);fetch(ISD_BASE_URL+"opts/updateOpts",{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.error(e.message,3):(n.splice(r,1,ii({},t,e.data)),this.setState({data:n,editingKey:""}),d.a.success(e.message),this.state.newitem=0)}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchData(){fetch(ISD_BASE_URL+"opts/fetchOpts",{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>ii({},e,{key:t}));this.setState({data:t})}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu cấu hình !",3),console.log(e)})}componentDidMount(){this.fetchData()}render(){const e={body:{row:hi,cell:di}};let t=this.props.mainState.ans_language;const a=this.columns.map(e=>e.editable?ii({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);let n=this.state.searchText,i=[...this.state.data];return n&&(i=i.map(e=>-1==`${e.ma_opt}${e.defaultconfig}${e.config}`.toLowerCase().indexOf(n.toLowerCase())?null:ii({},e)).filter(e=>!!e)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},t.ans_options_title||"ans_options_title")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},t.ans_add_new||"ans_add_new"))))),r.a.createElement(A.a,{components:e,bordered:!0,dataSource:i,columns:a,onChange:this.handleChange,title:()=>r.a.createElement("div",{className:"search-form"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:6},r.a.createElement("label",null,"Tìm kiếm")),r.a.createElement(E.a,{span:12},r.a.createElement(b.a,{ref:e=>this.searchInput=e,prefix:r.a.createElement(l.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tìm kiếm",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onSearch})))),rowClassName:"editable-row"}))}},pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const ui=x.a.Item;w.a.Option,Ge.a.Group;var mi=class extends r.a.Component{constructor(e){super(e),this.state={productListbyCateList:[]}}fetchData(){fetch(ISD_BASE_URL+"rnd/fetchKho",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({kho:e.data}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu dữ liệu kho!",3),console.log(e)})}fetchProductbyCate(){fetch(ISD_BASE_URL+"rnd/fetchProductByCate/19",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({productListbyCate:e.data})),this.setState({productListbyCateList:e.data})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchDonhang(){fetch(ISD_BASE_URL+"order/fetchDh",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({orderList:e.data})),this.setState({orderList:e.data})):d.a.error(e.message)}).catch(e=>{console.log(e)})}componentDidMount(){this.fetchProductbyCate(),this.fetchDonhang()}render(){var e=this.props.mainState;let t=e.rnd,a=e.phieuAction,n=e.ans_language,i=this.state.productListbyCateList||[],s=this.state.orderList||[];t.hd||(t.hd=2);let o=t.nsx;(o=Qe()(o)).isValid()||(o=null);let l=!(!a||"view"!=a.action);return r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_number_rnd||"ans_number_rnd",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:l,onChange:e=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{ma_nc:e.target.value})}))},value:t.ma_nc}))),r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_cong_doan||"ans_cong_doan",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:l,onChange:e=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{cong_doan:e.target.value})}))},value:t.cong_doan})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_product||"ans_product",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(w.a,{defaultValue:t.ma_sp,showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{ma_sp:e})}))},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,placeholder:n.ans_choose_product||"ans_choose_product"},i.map(e=>r.a.createElement(w.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `))))),r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_co_lo||"ans_co_lo",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:l,onChange:e=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{co_lo:e.target.value})}))},value:t.co_lo}))),r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_order||"ans_order",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(w.a,{defaultValue:t.dh,showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{dh:e})}))},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,placeholder:n.ans_choose_order||"ans_choose_order"},s.map(e=>r.a.createElement(w.a.Option,{key:e.ma_order,value:e.ma_order},`${e.ma_order} - ${e.ma_kh} - ${e.qty} `))))),r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_quy_cach_dong_goi||"ans_quy_cach_dong_goi",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:l,onChange:e=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{qcdg:e.target.value})}))},value:t.qcdg})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_date_of_manufacture||"ans_date_of_manufacture",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(Ve.a,{defaultValue:o,onChange:e=>{e=null!=e?e.format("YYYY-MM-DD"):"",this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{nsx:e})}))},placeholder:"Chọn ngày",format:"DD/MM/YYYY"}))),r.a.createElement(E.a,{span:12},r.a.createElement(ui,{label:n.ans_dang_bao_che||"ans_dang_bao_che",labelCol:{span:5},wrapperCol:{span:12}},r.a.createElement(b.a,{readOnly:l,onChange:e=>{this.props.dispatch(m({rnd:pi({},this.props.mainState.rnd,{dang_bao_che:e.target.value})}))},value:t.dang_bao_che})))))}},gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function _i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}const fi=C(j),yi=x.a.Item,Ei=r.a.createContext(),bi={headTitle:"Nguyên liệu",addNewTitle:"Thêm"},xi={fetch:"rnd/fetch",update:"rnd/updateProduct",delete:"rnd/deleteProduct/",changeStatus:"rnd/changeStatus"},Si=x.a.create()(e=>{let t=e.form,a=(e.index,_i(e,["form","index"]));return r.a.createElement(Ei.Provider,{value:t},r.a.createElement("tr",a))});class ki extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>{switch(this.props.inputType){case"product_id":let e=this.props.products;return r.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",onChange:(e,t)=>{let a=t.props.children.split("-");return a&&a[3]&&(a=a[3].trim()),!1},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,style:{width:200},placeholder:"Chọn VT"},e.map(e=>r.a.createElement(w.a.Option,{key:e.product_id,value:e.product_id},`${e.product_id} - ${e.name} - ${e.unit} `)));case"sl_1000":case"sl_nvl":case"price":return r.a.createElement(We.a,{formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")});case"hu_hao":return r.a.createElement(We.a,{min:0,max:100,formatter:e=>`${e}%`,parser:e=>e.replace("%","")});case"nsx":case"hd":return r.a.createElement(Ve.a,{placeholder:"Chọn ngày",format:"DD/MM/YYYY"});default:return r.a.createElement(b.a,null)}}),this.handleChange=(e=>{console.log(e)}),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,_i(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Ei.Consumer,null,e=>{const l=e.getFieldDecorator;let h;return s&&(h=s[n],"ngay_san_xuat"!=n&&"ngay_het_han"!=n||(h=Qe()(h)).isValid()||(h=null)),r.a.createElement("td",o,t?r.a.createElement(yi,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:h})(this.getInput())):o.children)})}}var vi=class extends r.a.Component{constructor(e){super(e),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.changeStatus=((e,t)=>{this.setState({loading:!0});let a={ids:this.state.selectedRowKeys,type:t,status:e};fetch(ISD_BASE_URL+xi.changeStatus,{method:"POST",headers:I(),body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(this.fetchSelectedProduct(),d.a.success(e.message)),this.setState({selectedRowKeys:[],loading:!1})}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.isEditing=(e=>e.key===this.props.mainState.phieuAction.editingKey),this.cancel=(e=>{this.props.dispatch(m({phieuAction:gi({},this.props.mainState.phieuAction,{editingKey:""})}))}),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+xi.delete+e.id,{headers:I()}).then(e=>e.json()).then(t=>{if("error"==t.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let a=this.props.mainState.rnd.products.filter(t=>t.key!=e.id);this.props.dispatch(m({rnd:gi({},this.props.mainState.rnd,{products:a})})),d.a.success(t.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.props.mainState.rnd.products.filter(t=>t.key!=e.key);this.props.dispatch(m({rnd:gi({},this.props.mainState.rnd,{products:t})}))}}),this.state={productList:{},selectedRowKeys:[],loading:!1,loadProduct:!1},this.columns=[{title:"Công đoạn",dataIndex:"cong_doan",width:200,editable:!0,required:!1},{title:"Mã maquet",dataIndex:"ma_maquet",width:200,editable:!0,required:!0},{title:"Mã NL",dataIndex:"product_id",width:"20%",editable:!0,render:(e,t)=>{let a=e,n="kg";return this.state.productList&&this.state.productList[e]&&(a=this.state.productList[e].name,n=this.state.productList[e].unit),r.a.createElement("span",null,e," - ",a," - ",n)}},{title:"SL cho 1000.000 viên/lọ/gói",dataIndex:"sl_1000",editable:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Hư hao",dataIndex:"hu_hao",width:"100",editable:!0,render:(e,t)=>`${e}%`},{title:"SL NVL cần",dataIndex:"sl_nvl",editable:!0,required:!0,render:(e,t)=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")},{title:"Actions",dataIndex:"operation",width:100,render:(e,t)=>{if(this.isReadOnly())return"";const a=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},a?r.a.createElement("span",null,r.a.createElement(Ei.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},"Lưu")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},"Huỷ"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.edit(t.key)},"Sửa")," | ",r.a.createElement(S.a,{title:"Bạn thật sự muốn xoá?",okType:"danger",onConfirm:()=>this.delete(t)},r.a.createElement("a",{href:"javascript:;"},"Xoá"))))}}]}showCheckStatus(e){if(e){let t="info";return"2"==e&&(t="error"),"1"==e&&(t="success"),r.a.createElement(c.a,{message:fi[e].text,type:t,showIcon:!0})}return r.a.createElement(c.a,{message:fi[0].text,type:"info",showIcon:!0})}addNewRow(){let e=(this.props.mainState.rnd||[]).products,t=this.props.mainState.phieuAction.editingKey;if(void 0!==t&&""!==t)return!1;let a=this.getDefaultFields();a=gi({},a,{key:e.length+1}),this.props.dispatch(m({rnd:gi({},this.props.mainState.rnd,{products:[...e,a]}),phieuAction:gi({},this.props.mainState.phieuAction,{editingKey:a.key})}))}getDefaultFields(){return{ma_rnd:"",ma_maquet:"",product_id:"",cong_doan:"",sl_1000:"",sl_nvl:"",hu_hao:"",status:"",create_on:""}}isReadOnly(){let e=this.props.mainState.phieuAction;return!(!e||"view"!=e.action)}edit(e){this.props.dispatch(m({phieuAction:gi({},this.props.mainState.phieuAction,{editingKey:e})}))}save(e,t){e.validateFields((e,a)=>{if(e)return;const n=[...this.props.mainState.rnd.products];let r=this.props.mainState.rnd.ma_rnd||"";const i=n.findIndex(e=>t===e.key);if(i>-1){const e=n[i];let t=gi({},e,a,{ma_rnd:r});if(!n.id&&!r)return n.splice(i,1,gi({},t)),this.props.dispatch(m({rnd:gi({},this.props.mainState.rnd,{products:n}),phieuAction:gi({},this.props.mainState.phieuAction,{editingKey:""})})),!1;r&&fetch(ISD_BASE_URL+xi.update,{method:"POST",headers:I(),body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(n.splice(i,1,gi({},t,e.data)),this.props.dispatch(m({rnd:gi({},this.props.mainState.rnd,{products:n}),phieuAction:gi({},this.props.mainState.phieuAction,{editingKey:""})})),d.a.success(e.message))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}else n.push(data),this.setState({data:n,editingKey:""})})}fetchProduct(){fetch(ISD_BASE_URL+"rnd/fetchProductDetailsList",{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({products:e.data})),this.setState({productList:C(e.data,"product_id")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}fetchSelectedProduct(){let e=this.props.mainState.rnd.ma_rnd;this.setState({loadProduct:!0}),fetch(ISD_BASE_URL+`rnd/fetchSelectedProduct/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&this.props.dispatch(m({rnd:gi({},this.props.mainState.rnd,{products:e.data})})):d.a.error(e.message),this.setState({loadProduct:!1})}).catch(e=>{console.log(e)})}getStatusMenu(e){const t=j.map(t=>r.a.createElement(p.a.Item,{key:t.id},r.a.createElement("a",{onClick:()=>{this.changeStatus(t.id,e)},rel:"noopener noreferrer"},t.text)));return r.a.createElement(p.a,null,t)}componentDidMount(){var e=this.props.mainState;let t=e.products,a=e.rnd;t.length||this.fetchProduct(),a.ma_rnd&&this.fetchSelectedProduct()}render(){const e={body:{row:Si,cell:ki}};let t=this.props.mainState.products,a=this.columns.map(e=>e.editable?gi({},e,{onCell:a=>({record:a,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(a),required:e.required,products:t})}):e);a=a.filter(e=>{if(this.props.isQA||this.props.isQC){if("operation"==e.dataIndex)return!1;if(this.props.isQC&&"qa_check"==e.dataIndex)return!1}return!0});let n=this.props.mainState.rnd.products||[];const i={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},bi.headTitle)),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},this.isReadOnly()?null:r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},bi.addNewTitle))))),r.a.createElement(A.a,{rowSelection:i,components:e,bordered:!0,dataSource:n,columns:a,rowClassName:"editable-row",loading:this.state.loadProduct}))}},wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const Ai=x.a.Item;w.a.Option,b.a.TextArea;var Ci=class extends r.a.Component{constructor(e){super(e),this.pheDuyet=this.pheDuyet.bind(this),this.isNhomRND=this.isNhomRND.bind(this),this.isNhomDBCL=this.isNhomDBCL.bind(this),this.isNhomGD=this.isNhomGD.bind(this),this.state={productListbyCateList:[]}}pheDuyet(e,t){this.setState({loading:!0});let a={type:e,value:t,ma_rnd:this.props.mainState.rnd.ma_rnd};fetch(ISD_BASE_URL+"rnd/pheduyet",{method:"POST",headers:I(),body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({rnd:wi({},this.props.mainState.rnd,{refresh:!0},e.data)})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình phê duyệt!")})}componentDidMount(){}isNhomRND(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("duyet_rnd")}isNhomDBCL(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("duyet_dbcl")}isNhomGD(){let e=this.props.mainState.userInfo;return-1!==(e.roles?e.roles.split(","):[]).indexOf("duyet_gd")}render(){var e=this.props.mainState;let t=e.rnd,a=(e.phieuAction,e.ans_language);return r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(E.a,{span:24},r.a.createElement(Ai,{label:a.ans_note||"ans_note",labelCol:{span:24},wrapperCol:{span:24}},r.a.createElement(b.a.TextArea,{rows:4,readOnly:!1,onChange:e=>{this.props.dispatch(m({rnd:wi({},this.props.mainState.rnd,{note:e.target.value})}))},placeholder:a.ans_add_note_here||"ans_add_note_here",autosize:{minRows:6},defaultValue:t.note})))),r.a.createElement(k.a,null,r.a.createElement(E.a,{className:"align_center",span:8},r.a.createElement("label",null,"P. RND"),r.a.createElement("br",null),r.a.createElement(K.a,{checked:!!t.pkhsx,checkedChildren:"Đã ký",unCheckedChildren:"Chờ duyệt",onChange:e=>{this.pheDuyet("pkhsx",e)}})),r.a.createElement(E.a,{className:"align_center",span:8},"P. ĐBCL",r.a.createElement("br",null),r.a.createElement(K.a,{checked:!!t.pdbcl,checkedChildren:"Đã ký",unCheckedChildren:"Chờ duyệt",onChange:e=>{this.pheDuyet("pdbcl",e)}})),r.a.createElement(E.a,{className:"align_center",span:8},"Giám Đốc",r.a.createElement("br",null),r.a.createElement(K.a,{checked:!!t.gd,checkedChildren:"Đã ký",unCheckedChildren:"Chờ duyệt",onChange:e=>{this.pheDuyet("gd",e)}}))))}},Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var Di=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),this.validBeforeSave()&&fetch(ISD_BASE_URL+"rnd/update",{method:"POST",headers:I(),body:JSON.stringify(this.props.mainState.rnd)}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.error(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):(d.a.success(e.message),this.props.dispatch(m({rnd:{refresh:!0},phieuAction:{}})))}).catch(e=>{console.log("parsing failed",e),d.a.error("Có lỗi xảy ra trong quá trình lưu hoặc chỉnh sửa!")})}),this.openQTSX=this.openQTSX.bind(this),this.loadQuyTrinhMau=this.loadQuyTrinhMau.bind(this)}loadQuyTrinhMau(e){let t=this.props.mainState.rnd,a=t&&t.nsx?t.nsx:"",n=t&&t.ma_rnd?t.ma_rnd:"";n&&e&&fetch(ISD_BASE_URL+`gantt/fetchTasksFromSample/${n}/${e}/${a}`,{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?d.a.warning(e.message,3):e.data&&this.props.dispatch(m({ganttData:e.data,refreshGantt:!0}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu quy trình sản xuất!",3),console.log(e)})}validBeforeSave(){return!!this.props.mainState.rnd.ma_nc||(d.a.error("Mã nghiên cứu không được để trống"),!1)}openQTSX(e){let t={quyTrinhTheoLenh:Ii({},this.props.mainState.quyTrinhTheoLenh,{showGantt:e})};e||(t.ganttData=O),this.props.dispatch(m(t))}cancel(){this.props.dispatch(m({phieuAction:Ii({},this.props.mainState.phieuAction,{addNewItem:!1})}))}render(){var e=this.props.mainState;let t=e.phieuAction,a=e.quyTrinhTheoLenh,n=e.quyTrinhSx,i=e.ganttData,s=e.ans_language,o=n&&n.listQuyTrinh?n.listQuyTrinh:[];return r.a.createElement("div",null,a.showGantt?r.a.createElement("div",{className:"wrap-gantt-chart"},r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},s.ans_quy_trinh_san_xuat||"ans_quy_trinh_san_xuat")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},i.data&&!i.data.length?r.a.createElement(w.a,{showSearch:!0,style:{minWidth:200},placeholder:s.ans_chon_quy_trinh_san_xuat||"ans_chon_quy_trinh_san_xuat",onChange:e=>{e&&this.loadQuyTrinhMau(e)}},r.a.createElement(w.a.Option,{value:""},s.ans_chon_quy_trinh_san_xuat||"ans_chon_quy_trinh_san_xuat"),o.map(e=>r.a.createElement(w.a.Option,{value:e.id,key:e.id},e.name))):null,r.a.createElement(v.a,{onClick:()=>this.openQTSX(!1),style:{marginLeft:10},icon:"left",type:"default"},s.ans_back||"ans_back"))))),r.a.createElement(ut,{type:"theo_lenh_sx",dispatch:this.props.dispatch,mainState:this.props.mainState})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},s.ans_rnd_title||"ans_rnd_title")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},t&&"edit"==t.action?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:this.handleSubmit,type:"primary",htmlType:"button",icon:"save"},s.ans_save||"ans_save"),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel()},r.a.createElement(v.a,{style:{marginLeft:10},type:"danger"},s.ans_cancel||"ans_cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:()=>this.openQTSX(!0),style:{marginRight:10},icon:"share-alt",type:"primary"},s.ans_quy_trinh_san_xuat||"ans_quy_trinh_san_xuat"),r.a.createElement(v.a,{onClick:()=>{this.props.dispatch(m({phieuAction:Ii({},this.props.mainState.phieuAction,{action:"edit"})}))},type:"primary",htmlType:"button",icon:"edit"},s.ans_edit||"ans_edit"),r.a.createElement(v.a,{onClick:()=>this.cancel(),style:{marginLeft:10},icon:"left",type:"default"},s.ans_cancel||"ans_cancel")))))),r.a.createElement(mi,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(vi,{dispatch:this.props.dispatch,mainState:this.props.mainState}),r.a.createElement(Ci,{dispatch:this.props.dispatch,mainState:this.props.mainState})))}}),Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function Ni(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}C(N);const ji=x.a.Item,Oi=r.a.createContext(),Ri={fetch:"rnd/fetchRnd",delete:"rnd/delete/"},Li=x.a.create()(e=>{let t=e.form,a=(e.index,Ni(e,["form","index"]));return r.a.createElement(Oi.Provider,{value:t},r.a.createElement("tr",a))});class Mi extends r.a.Component{constructor(...e){var t;return t=super(...e),this.getInput=(()=>(this.props.inputType,r.a.createElement(b.a,null))),t}render(){var e=this.props;const t=e.editing,a=e.required,n=e.dataIndex,i=e.title,s=(e.inputType,e.record),o=(e.index,Ni(e,["editing","required","dataIndex","title","inputType","record","index"]));return r.a.createElement(Oi.Consumer,null,e=>{const l=e.getFieldDecorator;return r.a.createElement("td",o,t?r.a.createElement(ji,{style:{margin:0}},l(n,{rules:[{required:a,message:`Hãy nhập dữ liệu ô ${i}!`}],initialValue:s[n]})(this.getInput())):o.children)})}}var qi=class extends r.a.Component{constructor(e){super(e),this.isEditing=(e=>e.key===this.state.editingKey),this.delete=(e=>{if(e.id)fetch(ISD_BASE_URL+Ri.delete+e.id,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3);else{let t=this.state.data.filter(t=>t.id!=e.data);this.setState({data:t}),d.a.success(e.message)}}).catch(e=>{d.a.error("Có lỗi xảy ra khi xoá sản phẩm!",3),console.log(e)});else if(e.key){let t=this.state.data.filter(t=>t.key!=e.key);this.setState({data:t})}}),this.state={data:[],addNewItem:!1,productListbyCateList:[]};let t=this.state.productListbyCateList;console.log(t);let a=this.props.mainState.ans_language;this.columns=[{title:a.ans_rnd_id||"ans_rnd_id",dataIndex:"ma_nc",editable:!1},{title:a.ans_order||"ans_order",dataIndex:"dh",editable:!1},{title:a.ans_product||"ans_product",dataIndex:"ma_sp",editable:!1},{title:a.ans_co_lo||"ans_co_lo",dataIndex:"co_lo",editable:!1},{title:a.ans_date_create||"ans_date_create",dataIndex:"create_on",editable:!1},{title:a.ans_approval_title||"ans_approval_title",children:[{title:a.ans_manager||"ans_manager",dataIndex:"pkhsx",render:(e,t)=>r.a.createElement(Fe.a,{text:e?a.ans_approved||"ans_approved":a.ans_unapproved||"ans_unapproved",status:e?"success":"error"})},{title:a.ans_quality_assurance||"ans_quality_assurance",dataIndex:"pdbcl",render:(e,t)=>r.a.createElement(Fe.a,{text:e?a.ans_approved||"ans_approved":a.ans_unapproved||"ans_unapproved",status:e?"success":"error"})},{title:a.ans_director||"ans_director",dataIndex:"gd",render:(e,t)=>r.a.createElement(Fe.a,{text:e?a.ans_approved||"ans_approved":a.ans_unapproved||"ans_unapproved",status:e?"success":"error"})}]},{title:a.ans_actions||"ans_actions",dataIndex:"operation",render:(e,t)=>{const n=this.isEditing(t);return r.a.createElement("div",{style:{minWidth:100}},n?r.a.createElement("span",null,r.a.createElement(Oi.Consumer,null,e=>r.a.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.key),style:{marginRight:8}},r.a.createElement(l.a,{type:"save"}),a.ans_save||"ans_save")),r.a.createElement(S.a,{title:"Bạn thật sự muốn huỷ?",onConfirm:()=>this.cancel(t.key)},r.a.createElement("a",{href:"javascript:;"},r.a.createElement(l.a,{type:"cancel"}),a.ans_cancel||"ans_cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"javascript:;",onClick:()=>this.view(t)},r.a.createElement(l.a,{type:"profile"}),a.ans_detail||"ans_detail")))}}]}getDefaultFields(){return{id:"",ma_rnd:"",ma_nc:"",orderid:"",product_id:"",user_id:"",create_on:"",create_by:"",so_lo:"",nsx:"",hd:"",dang_bao_che:"",so_dk:"",qcdg:"",dh:"",tttb_kltb:"",products:[],status:""}}addNewRow(){this.props.dispatch(m({phieuAction:Ti({},this.props.mainState.phieuAction,{addNewItem:!0,action:"edit",editingKey:""}),rnd:this.getDefaultFields()}))}view(e){var t=this.props.mainState;let a=t.rnd,n=t.phieuAction;e&&e.ma_rnd&&e.id&&this.props.dispatch(m({rnd:Ti({},a,e),phieuAction:Ti({},n,{addNewItem:!0,action:"view"}),ganttData:O}))}fetchData(){fetch(ISD_BASE_URL+Ri.fetch,{headers:I()}).then(e=>e.json()).then(e=>{if("error"==e.status)d.a.warning(e.message,3);else if(e.data){let t=e.data.map((e,t)=>Ti({},e,{key:t}));this.setState({data:t,dataUpToDate:!0}),this.props.dispatch(m({sx:Ti({},this.props.mainState.sx,{refresh:!1})}))}}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu sản phẩm!",3),console.log(e)})}fetchQuyTrinhMau(){fetch(ISD_BASE_URL+"rnd/fetchRnd",{headers:I()}).then(e=>e.json()).then(e=>{"error"==e.status?(d.a.warning(e.message,3),e.show_login&&this.props.dispatch(m({showLogin:!0}))):e.data&&this.props.dispatch(m({quyTrinhSx:Ti({},this.props.mainState.quyTrinhSx,{listQuyTrinh:e.data})}))}).catch(e=>{d.a.error("Có lỗi khi tải dữ liệu quy trình sản xuất!",3),console.log(e)})}fetchProductListbyCate(e){fetch(ISD_BASE_URL+`rnd/fetchProductByCate/${e}`,{headers:I()}).then(e=>e.json()).then(e=>{e.data?e.data&&(this.props.dispatch(m({productListbyCateList:C(e.data,"product_id")})),this.setState({productListbyCateList:C(e.data,"product_id")})):d.a.error(e.message)}).catch(e=>{console.log(e)})}static getDerivedStateFromProps(e,t){return e.mainState.sx.refresh?{dataUpToDate:null}:null}componentDidUpdate(){null===this.state.dataUpToDate&&this.fetchData()}componentDidMount(){this.fetchData(),this.fetchQuyTrinhMau(),0==(this.state.productListbyCateList||[]).length&&this.fetchProductListbyCate(19)}render(){let e=this.props.mainState,t=e.ans_language;const a={body:{row:Li,cell:Mi}},n=this.columns.map(e=>e.editable?Ti({},e,{onCell:t=>({record:t,inputType:e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),required:e.required})}):e);return r.a.createElement(r.a.Fragment,null,e.phieuAction.addNewItem?r.a.createElement(Di,{dispatch:this.props.dispatch,mainState:this.props.mainState}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-operations"},r.a.createElement(k.a,null,r.a.createElement(E.a,{span:12},r.a.createElement("h2",{className:"head-title"},t.ans_rnd_title||"ans_rnd_title")),r.a.createElement(E.a,{span:12},r.a.createElement("div",{className:"action-btns"},r.a.createElement(v.a,{onClick:()=>this.addNewRow(),type:"primary",icon:"plus"},t.ans_add_new||"ans_add_new"))))),r.a.createElement(A.a,{components:a,bordered:!0,dataSource:this.state.data,columns:n,rowClassName:"editable-row"})))}};const Bi=h.a.Header,Ui=h.a.Sider;h.a.Content;var Pi=Object(o.b)(e=>({mainState:e.main.present}))(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={collapsed:!1,logged:!1,loading:!0},this.toggle=(()=>{this.setState({collapsed:!this.state.collapsed})}),t}componentWillMount(){let e=this.props.mainState;if(e.userInfo)this.props.dispatch(m({defaultRouter:e.defaultRouter}));else{let e=sessionStorage.getItem("ISD_TOKEN");""!=e&&null!=e?fetch(ISD_BASE_URL+"fetchRoles",{headers:I()}).then(e=>e.json()).then(e=>{if(e.userInfo){let t="";e.scopes[0]&&e.scopes[0].children&&e.scopes[0].children.length&&(t=e.scopes[0].children[0].path?e.scopes[0].children[0].path:""),this.props.dispatch(m({showLogin:!1,userRoles:e.scopes,userInfo:e.userInfo}))}else"error"==e.status&&d.a.error(e.message,3);this.setState({loading:!1})}).catch(e=>{console.warn(e),this.setState({loading:!1})}):this.setState({loading:!1})}0==e.ans_language.length&&fetch(ISD_BASE_URL+"fetchLang",{headers:I()}).then(e=>e.json()).then(e=>{"success"==e.status?this.props.dispatch(m({ans_language:e.data})):"error"==e.status&&d.a.error(e.message,3),this.setState({loading:!1})}).catch(e=>{console.warn(e),this.setState({loading:!1})})}renderContent(e){var t=this.props;let a=t.dispatch,n=t.mainState;switch(e){case"qldh":return r.a.createElement(Na,{dispatch:a,mainState:n});case"npp":return r.a.createElement(P,{dispatch:a,mainState:n});case"qluser":return r.a.createElement(X,{dispatch:a,mainState:n});case"qlkho":return r.a.createElement(ce,{dispatch:a});case"qlvtkho":return r.a.createElement(ye,{mainState:n,dispatch:a});case"qlsx":return r.a.createElement(vt,{mainState:n,dispatch:a});case"qlcate":return r.a.createElement(we,{dispatch:a});case"product":return r.a.createElement(Ye,{dispatch:a,mainState:n});case"qlkh":return r.a.createElement(je,{dispatch:a});case"qlphieunhap":return r.a.createElement(aa,{dispatch:a,mainState:n});case"qlphieuxuat":return r.a.createElement(wa,{dispatch:a,mainState:n});case"tinhtrangkho":return r.a.createElement($a,{dispatch:a,mainState:n});case"qlns":return r.a.createElement(on,{dispatch:a,mainState:n});case"qljobs":return r.a.createElement(mn,{dispatch:a,mainState:n});case"qlsl":return r.a.createElement(Bn,{dispatch:a,mainState:n});case"cdc":return r.a.createElement(or,{dispatch:a,mainState:n});case"quy_trinh_sx":return r.a.createElement(ur,{dispatch:a,mainState:n});case"khsx_daihan":return r.a.createElement(mr,{dispatch:a,mainState:n});case"qlpb":return r.a.createElement(vn,{dispatch:a,mainState:n});case"khvt":return r.a.createElement(Zn,{dispatch:a,mainState:n});case"kkvt":return r.a.createElement(Yr,{dispatch:a,mainState:n});case"lang":return r.a.createElement(Zr,{dispatch:a,mainState:n});case"note":return r.a.createElement(ei,{dispatch:a,mainState:n});case"options":return r.a.createElement(ci,{dispatch:a,mainState:n});case"rnd":return r.a.createElement(qi,{dispatch:a,mainState:n});case"my_info":return r.a.createElement(ri,{dispatch:a,mainState:n})}}render(){if(this.state.loading)return r.a.createElement(re,null);if(this.props.mainState.showLogin)return r.a.createElement(te,{dispatch:this.props.dispatch});let e=this.props.mainState.defaultRouter,t=this.props.mainState.ans_language;return r.a.createElement(h.a,null,r.a.createElement(Ui,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},r.a.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"10px 0"},className:"logo"},r.a.createElement("img",{style:{width:"50%"},src:"./images/logo.png"})),r.a.createElement(y,{mainState:this.props.mainState,dispatch:this.props.dispatch})),r.a.createElement(h.a,null,r.a.createElement(Bi,{style:{background:"#fff",padding:0}},r.a.createElement(l.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),r.a.createElement(ae,{mainState:this.props.mainState,dispatch:this.props.dispatch})),r.a.createElement("div",{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},e?this.renderContent(e):r.a.createElement(c.a,{message:t.sorry_role_not_valid,type:"info",showIcon:!0}))))}}),Yi=a(160),Fi=a(153),zi=a.n(Fi),Qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};let Gi,Vi={showLogin:!0,defaultRouter:"qlphieuxuat",customers:[],userRoles:[],userlist:[],categories:[],kho:[],products:[],productsForExport:[],phieunhap:{nguoi_giao_dich:"",ma_kho:"",note:"",editNote:"",address:"",products:[],editingKey:""},kehoachvt:{},sx:{ma_sx:"",so:"",ma:"",cong_doan:"",ma_sp:"",co_lo:"",so_lo:"",nsx:"",hd:"",so_dk:"",dang_bao_che:"",qcdg:"",dh:"",tttb_kltb:"",note:"",pkhsx:"",pdbcl:"",gd:"",products:[]},rnd:{ma_rnd:"",ma_nc:"",orderid:"",cong_doan:"",ma_sp:"",co_lo:"",so_lo:"",nsx:"",hd:"",dang_bao_che:"",qcdg:"",dh:"",tttb_kltb:"",note:"",products:[]},phieuAction:{addNewItem:!1,action:"view"},kkvt:{ma_phieu:"",ma_kho:"",note:"",editNote:"",address:"",products:[],editingKey:""},phieuxuat:{nguoi_giao_dich:"",ma_kho:"",note:"",editNote:"",address:"",products:[],editingKey:""},phieuXuatAction:{addNewItem:!1,action:"view",openModal:!1},quyTrinhSx:{openModal:!1,edit:{}},ganttData:{data:[],links:[]},notes:[],ans_language:[],defaultLang:"vi",ganttEvents:[],quyTrinhTheoLenh:{showGantt:!1},user:{openUserModal:!1},systemOrder:{openModal:!1},systemNote:{openModal:!1}};var Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};let Zi={sidebar:{open:!1,columnId:null},notify:{open:!0,message:"Hahah",header:"Heheh",type:"success"},savePanel:{open:!1},saveDesignNow:!1};var Ji=a(327),Hi=a.n(Ji);let Wi=[u.UPDATE_STATE_DATA];var Xi=Object(Yi.b)({main:Hi()((e=Vi,t)=>{switch(t.type){case u.START_APP:return Gi=zi()(e),Gi=Qi({},Gi,t.defaultProps);case u.UPDATE_STATE_DATA:let a;return Gi=zi()(e),t.updateData&&t.updateData.showLogin&&sessionStorage.setItem("ISD_TOKEN",""),t.updateData&&t.updateData.defaultRouter&&(a={phieuAction:Qi({},Gi.phieuAction,{addNewItem:!1}),ganttData:Vi.ganttData,quyTrinhSx:Vi.quyTrinhSx,quyTrinhTheoLenh:Vi.quyTrinhTheoLenh,phieunhap:Vi.phieunhap,phieuxuat:Vi.phieuxuat,phieuXuatAction:Vi.phieuXuatAction,productsForExport:Vi.productsForExport,sx:Vi.sx}),Gi=Qi({},Gi,a,t.updateData)}return e},{filter:(e,t,a)=>-1!==Wi.indexOf(e.type),limit:100}),ui:(e=Zi,t)=>{switch(t.type){case u.UPDATE_UI:return Ki({},e,t.updateData);case u.TOGGLE_SAVE:return Ki({},e,{savePanel:{open:t.open}});case u.SAVE_DESIGN_NOW:return Ki({},e,{saveDesignNow:t.confirm||!1})}return e}});const $i=Object(Yi.c)(Xi);$i.close=(()=>$i.dispatch(END));var es=$i;const ts=document.getElementById("isd_app");s.a.render(r.a.createElement(o.a,{store:es},r.a.createElement(Pi,null)),ts)},401:function(e,t,a){(e.exports=a(400)()).push([e.i,'.gantt_grid{background-color:#d6d6d6}.gantt_grid_scale .gantt_grid_head_cell{border-top:none!important;border-right:1px solid #4f4f4f!important;border-left:1px solid #5b5b5b!important}.gantt_popup_title{background-color:#4f4f4f;background-size:5px 5px;background-size:4px 4px;background-position:0 0,2px 2px;background-image:linear-gradient(45deg,hsla(0,0%,100%,.05) 25%,transparent 0,transparent 75%,hsla(0,0%,100%,.05) 0,hsla(0,0%,100%,.05)),linear-gradient(45deg,hsla(0,0%,100%,.05) 25%,transparent 0,transparent 75%,hsla(0,0%,100%,.05) 0,hsla(0,0%,100%,.05));color:#e1e1e1;font-size:14px}.gantt_grid_data .gantt_row,.gantt_grid_data .gantt_row.odd{background-color:#dbdbdb;border-top:1px solid #f6f6f6;border-bottom:1px solid #bababa}.gantt_grid_data .gantt_row .gantt_cell,.gantt_grid_data .gantt_row.odd .gantt_cell{border-right:none}.gridHoverStyle{border-top:1px solid #ededed;background-color:#ededed}.gridSelection{border-top-color:#fff087}.gridSelection,.timelineSelection{background-color:#fff3a1}.gantt_cell .gantt_tree_icon.gantt_folder_closed,.gantt_cell .gantt_tree_icon.gantt_folder_open{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAPCAYAAAACsSQRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODhBMDIwQzhDRUI3MTFFMjg4RUJDNUMzQkZEREM2RDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODhBMDIwQzlDRUI3MTFFMjg4RUJDNUMzQkZEREM2RDIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OEEwMjBDNkNFQjcxMUUyODhFQkM1QzNCRkREQzZEMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OEEwMjBDN0NFQjcxMUUyODhFQkM1QzNCRkREQzZEMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PntuzoIAAACySURBVHjaYmTAAjo6Ov4z4AAVFRWM6GJM6ALt7e0OUCYjFowsDwfIEjDbDRgZGSf8//8fUzEj4wGgeAGQeQFJ+CIj0IALQEl9BjIB0NADTJQYAHWdAxMDFQBVDGEB+ukgxYYAcQNSzCCnh4NY0o89VkOAAbMfV5gBNR0AytuDXAs01AEUxbhcwoAj1c4HaUTi9wMNwWnb/0ERO0xA/z6k0IyP4NgBGpRApgEfgHgBQIABAAcyQOF3e6FiAAAAAElFTkSuQmCC)}.gantt_cell .gantt_tree_icon.gantt_file{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkQ2NjJFM0ZDRUI3MTFFMkFGNzc4M0YxNUM2NzkwMTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkQ2NjJFNDBDRUI3MTFFMkFGNzc4M0YxNUM2NzkwMTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRDY2MkUzRENFQjcxMUUyQUY3NzgzRjE1QzY3OTAxMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRDY2MkUzRUNFQjcxMUUyQUY3NzgzRjE1QzY3OTAxMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhnnqLUAAAExSURBVHjanFPtUcMwDI28AB0BJkg6AWEEJqAbxPxLJkh+phuUDdiAbtAwAYxAJ0jf60k51ecWDt3pZFtPn5akSKjv+3uIBlyLSMW3eZ4niD1423Xdt8dLYjzCqCluEJyNcPJq9+CMJzMGaAtet20rZJ7Bb+eIIhHYw0UGLvIRwBoRplx04CrgWModgwAXhTXj8Usjr73xMAwzJbNInBwU/8ASoqV9LbInYqwc2tJBrZdd8XcaVT4GpFOa52topL1Ks9CGVuGXL/vU40fqZPlGA7E5GX1NvQ7U4sSw1AWdMNIm07CfxIn1K6rcB2sI5yCXhXPyjPO7fuOLNfNikAAi+OnWILEUYFfLICWjXGptO12cyRk20G+sduiq/y7TOXJ2G906R13n0n0nmz2m63wSYAB0aMIyVTQbywAAAABJRU5ErkJggg==)}.chartHeaderBg{background-color:#dbdbdb}.gantt_task .gantt_task_scale .gantt_scale_cell{border-left:1px solid #f6f6f6;border-right:1px solid #bababa;color:#494949;font-size:14px}.taskProgressStyle{border-right:1px solid #1cb3fb;box-shadow:inset -1px 0 0 1px #04a1eb}.gantt_task_line{background-size:4px 4px;background-image:linear-gradient(135deg,hsla(0,0%,100%,.2) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 75%,transparent 0,transparent);background-image:-moz-linear-gradient(0deg,transparent,transparent)}.gantt_task_line .gantt_task_content{text-align:left;font-weight:700;padding:0 8px;box-sizing:border-box}.gantt_task_link .gantt_link_arrow_right{border-width:5px;margin-top:-2px}.gantt_task_link .gantt_link_arrow_left{border-width:5px;margin-left:-3px;margin-top:-2px}.gantt_task_link .gantt_link_arrow_down,.gantt_task_link .gantt_link_arrow_up{border-width:5px}.gantt_task_line .gantt_task_progress_drag{bottom:-4px;height:10px;margin-left:-8px;width:16px}.gantt_row.gantt_project,.gantt_row.odd.gantt_project{background-color:#edffef}.gantt_task_row.gantt_project,.gantt_task_row.odd.gantt_project{background-color:#f5fff6}.gantt_task_line.gantt_project{background-color:#65c16f;border:1px solid #3c9445}.gantt_task_line.gantt_project .gantt_task_progress{background-color:#46ad51;border-right:1px solid #5abc65;box-shadow:inset -1px 0 0 1px #45a94f}.gantt_cal_light{background-color:#fff;border:none!important}.gantt_cal_light .gantt_cal_lsection{color:#959595}.gantt_cal_light .gantt_cal_larea{border-bottom:none}.gantt_cal_light .gantt_cal_ltitle{background-color:#4f4f4f;background-size:5px 5px;background-size:4px 4px;background-position:0 0,2px 2px;background-image:linear-gradient(45deg,hsla(0,0%,100%,.05) 25%,transparent 0,transparent 75%,hsla(0,0%,100%,.05) 0,hsla(0,0%,100%,.05)),linear-gradient(45deg,hsla(0,0%,100%,.05) 25%,transparent 0,transparent 75%,hsla(0,0%,100%,.05) 0,hsla(0,0%,100%,.05));font-size:14px;color:#e1e1e1;position:relative;padding-top:12px;padding-bottom:12px;font-weight:400}.gantt_cal_light .gantt_cal_ltitle .gantt_title{font-size:13px}.gantt_cal_light .gantt_btn_set{margin:5px 10px}.buttonBg{background:#fff}.gantt_btn_set.gantt_save_btn_set{background:#46ad51;text-shadow:0 -1px 0 #307738;color:#fff}.gantt_btn_set.gantt_delete_btn_set{margin-left:0;text-shadow:0 -1px 0 #6f6f6f;background:#ec8e00;text-shadow:0 -1px 0 #a60;color:#fff}.gantt_cal_light_wide{padding-left:0!important;padding-right:0!important}.gantt_cal_light_wide .gantt_cal_larea{border-left:none!important;border-right:none!important}.gantt_cal_ltitle .gantt_cancel_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAMCAYAAABbayygAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYLEgAjh/DRnAAAAMdJREFUGNN1kcsNwjAQRF9iCkgJdJCUkBJQpDkDFUALdBAqAM6WQglQAlxzSglQgAUH1tIKgS9ezzztz0Vd18QYW0lXfpzsFeM49sAGOEpaf0FHYAnsS6evYoy9g3qDAB6Flb4BtYk568Huu6RmBhBCaFNKV4MPrso9hNAClABd1z2ABfB00BNYmEf5NeTrT/wBh2GogDNQOa8CzuZ9QOuvccPkgZqU0gXA7xFgL2nr1pP1ne/xlCEAi0/5nfc4lzT9+cK5pOkNX8hRT8hMyVwAAAAASUVORK5CYII=);width:30px;top:0;right:0;background-position:6px 12px;background-repeat:no-repeat;position:absolute;height:100%}.gantt_popup_button.gantt_ok_button{background:#46ad51;text-shadow:0 -1px 0 #307738;color:#fff;font-weight:700}.gantt_popup_button.gantt_cancel_button{font-weight:700}.gantt_popup_shadow{box-shadow:3px 3px 3px rgba(0,0,0,.07)}.gantt_qi_big_icon.icon_edit{color:#454544}.gantt_qi_big_icon.icon_delete{text-shadow:0 -1px 0 #6f6f6f;background:#ec8e00;text-shadow:0 -1px 0 #a60;color:#fff;font-weight:700}.gantt_tooltip{box-shadow:3px 3px 3px rgba(0,0,0,.07);border-left:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);font-size:8pt;color:#494949}.gantt_container,.gantt_tooltip{background-color:#fff;font-family:Arial}.gantt_container{font-size:13px;border:1px solid #bababa;position:relative;white-space:nowrap;overflow-x:hidden;overflow-y:hidden}.gantt_task_scroll{overflow-x:scroll}.gantt_grid,.gantt_task{position:relative;overflow-x:hidden;overflow-y:hidden;display:inline-block;vertical-align:top}.gantt_grid_scale,.gantt_task_scale{color:#494949;font-size:12px;border-bottom:1px solid #bababa;box-sizing:border-box}.gantt_grid_scale{background-color:#4f4f4f;background-size:5px 5px;background-size:4px 4px;background-position:0 0,2px 2px;background-image:linear-gradient(45deg,hsla(0,0%,100%,.05) 25%,transparent 0,transparent 75%,hsla(0,0%,100%,.05) 0,hsla(0,0%,100%,.05)),linear-gradient(45deg,hsla(0,0%,100%,.05) 25%,transparent 0,transparent 75%,hsla(0,0%,100%,.05) 0,hsla(0,0%,100%,.05));color:#e1e1e1;font-size:14px}.gantt_task_scale,.gantt_task_vscroll{background-color:#dbdbdb}.gantt_scale_line{box-sizing:border-box;-moz-box-sizing:border-box;border-top:1px solid #bababa}.gantt_scale_line:first-child{border-top:none}.gantt_grid_head_cell{display:inline-block;vertical-align:top;border-right:1px solid #bababa;text-align:center;position:relative;cursor:default;height:100%;box-sizing:border-box;-moz-box-sizing:border-box;line-height:33px;-moz-user-select:-moz-none;-webkit-user-select:none;user-select:none;overflow:hidden}.gantt_scale_line{clear:both}.gantt_grid_data{width:100%;overflow:hidden;position:relative}.gantt_row{position:relative;-webkit-user-select:none;-moz-user-select:none;-moz-user-select:-moz-none}.gantt_add,.gantt_grid_head_add{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYHCygkHejN0gAAAD1JREFUOMtjtN15mYESwIJLwvHo6v/I/P3WoYzY1DExUAiGgQGMtjsvYwQYsWC/dSjjcAmD0YREo0AkFgAASgkTQxnJ6ggAAAAASUVORK5CYII=);background-position:50%;background-repeat:no-repeat;cursor:pointer;position:relative;-moz-opacity:.3;opacity:.3}.gantt_grid_head_cell.gantt_grid_head_add{-moz-opacity:.6;opacity:.6;top:0}.gantt_grid_head_cell.gantt_grid_head_add:hover{-moz-opacity:1;opacity:1}.gantt_grid_data .gantt_row.odd:hover,.gantt_grid_data .gantt_row:hover{border-top:1px solid #ededed;background-color:#ededed}.gantt_grid_data .gantt_row.odd:hover .gantt_add,.gantt_grid_data .gantt_row:hover .gantt_add{-moz-opacity:1;opacity:1}.gantt_row,.gantt_task_row{border-bottom:1px solid #ebebeb;background-color:#fff}.gantt_row.odd,.gantt_task_row.odd{background-color:#fff}.gantt_cell,.gantt_grid_head_cell,.gantt_row,.gantt_scale_cell,.gantt_task_cell,.gantt_task_row{box-sizing:border-box;-moz-box-sizing:border-box}.gantt_grid_head_cell,.gantt_scale_cell{line-height:inherit}.gantt_grid_scale .gantt_grid_column_resize_wrap{cursor:col-resize;position:absolute;width:13px;margin-left:-7px}.gantt_grid_column_resize_wrap .gantt_grid_column_resize{background-color:#bababa;height:100%;width:1px;margin:0 auto}.gantt_drag_marker.gantt_grid_resize_area{background-color:hsla(0,0%,91%,.5);border-left:1px solid #bababa;border-right:1px solid #bababa;height:100%;width:100%;box-sizing:border-box}.gantt_cell{display:inline-block;vertical-align:top;border-right:1px solid #ebebeb;padding-left:6px;padding-right:6px;height:100%;overflow:hidden;white-space:nowrap;font-size:13px}.gantt_grid_data .gantt_last_cell,.gantt_grid_scale .gantt_last_cell,.gantt_task .gantt_task_scale .gantt_scale_cell.gantt_last_cell,.gantt_task_bg .gantt_last_cell{border-right-width:0}.gantt_task .gantt_task_scale .gantt_scale_cell.gantt_last_cell{border-right-width:1px}.gantt_task_bg{overflow:hidden}.gantt_scale_cell{display:inline-block;white-space:nowrap;overflow:hidden;border-right:1px solid #bababa;text-align:center;height:100%}.gantt_task_cell{display:inline-block;height:100%;border-right:1px solid #ebebeb}.gantt_layout_cell.gantt_ver_scroll{width:0;background-color:transparent;height:1px;overflow-x:hidden;overflow-y:scroll;position:absolute;right:0;z-index:1}.gantt_ver_scroll>div{width:1px;height:1px}.gantt_hor_scroll{height:0;background-color:transparent;width:100%;clear:both;overflow-x:scroll;overflow-y:hidden}.gantt_layout_cell .gantt_hor_scroll{position:absolute}.gantt_hor_scroll>div{width:5000px;height:1px}.gantt_tree_indent{width:15px;height:100%;display:inline-block}.gantt_tree_content,.gantt_tree_icon{vertical-align:top}.gantt_tree_icon{width:28px;background-repeat:no-repeat;background-position:50%}.gantt_tree_content,.gantt_tree_icon{height:100%;display:inline-block}.gantt_tree_icon.gantt_open{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAW0lEQVQ4T2NkoBJgpJI5DEPEoGnTpv0n5OWsrCwU32B4DWQIuiJshqKro7tBIK+iWEquiyg2CFugg102YC6CRRjFXsOZnMj1GoaBBA2CBSTFKZuQAbjkB1/uBwBrVFUTxDarVwAAAABJRU5ErkJggg==);width:18px;cursor:pointer}.gantt_tree_icon.gantt_close{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAASElEQVQ4T2NkoBJgpJI5DEPEoGnTpv0n5OWsrCwU32B4DWQIuiJshqKrG8EGYQt0cHCMhhFqYiMrHcECkuKUTcgAXPKDL/cDAMbOURO+6QJ7AAAAAElFTkSuQmCC);width:18px;cursor:pointer}.gantt_tree_icon.gantt_blank{width:18px}.gantt_tree_icon.gantt_folder_open{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAs0lEQVQ4T62T0Q2EIBBEpQlzuaaMsQoqooqLsSljbMLLmMxmUXBR4U+Qt7Mzi2sqLVeJ00SgEMKWAnvvzYLyAyHfT5sU2fXDJSwCAXK8MI0/UTkva7IIFJsg3NSwnKdFoKtAWOQ1CN7CEqeTotE5L7QyJhmBcklZM4ZgTiAr3iOU3kD93ppO5SkMjB1EeXdBWoSkRql3YeIRe+cGvktS056JR9wsmeBUkujCfNXWCPC8GugPqn5ii/hV+FoAAAAASUVORK5CYII=)}.gantt_tree_icon.gantt_folder_closed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAfElEQVQ4T2NkoBJgpJI5DCgGTZ8+/T82gzMzMwlaCFcAM0RKQgyrI/0Dg/EahmIQyBB0DRvXr4W78tmLV1gtAbmYoEEgnciG4QpTogzCFyEwSyg2CBS2oCAZNQh3cA+hMAJ5AlcKxuVBlOgnNgVjMwyUrQjmamKLGaoZBAAOTFyLnFFW4wAAAABJRU5ErkJggg==)}.gantt_tree_icon.gantt_file{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAeElEQVQ4T2NkoBJgRDZn+vTp/wmZm5mZiaIHph7DICkJMUJmMfgHBmMYhtUgbAo3rl+L4lp0NUQbBPI2umuRDaPIIFAYwAyjv0HoMQALM5JdhG4QLMxGDcKdyIdoGIE89OzFK4KZF5Rl8EY/QROQFGA1iBQD0NUCAJVjcxO0naAQAAAAAElFTkSuQmCC)}.gantt_grid_head_cell .gantt_sort{position:absolute;right:5px;top:8px;width:7px;height:13px;background-repeat:no-repeat;background-position:50%}.gantt_grid_head_cell .gantt_sort.gantt_asc{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAANCAYAAABlyXS1AAAARUlEQVR42mNgQAL1/VP/M2ADIIntF2/9x1AAlrh0C47hCmA60DFYwX88gIFGwNDY5D8uDFbg7hvwHx2jmIBTAlkB0e4BAEjlaNtBWJPnAAAAAElFTkSuQmCC)}.gantt_grid_head_cell .gantt_sort.gantt_desc{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAANCAYAAABlyXS1AAAARUlEQVR4nGNgQAKGxib/GbABkIS7b8B/DAUwCRiGK0CXwFBAb1DfP/U/LszwHwi2X7qFgUEArBtdAVwCBmAKMCSQFSDzAWXXaOHsXeqkAAAAAElFTkSuQmCC)}.gantt_inserted,.gantt_updated{font-weight:700}.gantt_deleted{text-decoration:line-through}.gantt_invalid{background-color:#ffe0e0}.gantt_error{color:red}.gantt_status{right:1px;padding:5px 10px;background:hsla(0,0%,61%,.1);position:absolute;top:1px;transition:opacity .2s;opacity:0}.gantt_status.gantt_status_visible{opacity:1}#gantt_ajax_dots span{transition:opacity .2s;background-repeat:no-repeat;opacity:0}#gantt_ajax_dots span.gantt_dot_visible{opacity:1}.gantt_message_area{position:fixed;right:5px;width:250px;z-index:6}.gantt-info{min-width:120px;padding:4px 4px 4px 20px;font-family:Arial;z-index:8;margin:5px;margin-bottom:10px;transition:all .5s ease}.gantt-info.hidden{height:0;padding:0;border-width:0;margin:0;overflow:hidden}.gantt_modal_box{overflow:hidden;display:inline-block;min-width:250px;width:250px;text-align:center;position:fixed;z-index:11;box-shadow:3px 3px 3px rgba(0,0,0,.07);font-family:Arial;border-radius:6px;border:1px solid #bababa;background:#fff}.gantt_popup_title{border-top-left-radius:6px;border-top-right-radius:6px;border-width:0}.gantt_button,.gantt_popup_button{border:1px solid #bababa;height:30px;line-height:30px;display:inline-block;margin:0 5px;border-radius:4px;background:#fff}.gantt-info,.gantt_button,.gantt_popup_button{user-select:none;-webkit-user-select:none;-moz-user-select:-moz-none;cursor:pointer}.gantt_popup_text{overflow:hidden}.gantt_popup_controls{border-radius:6px;padding:10px}.gantt_popup_button{min-width:100px}div.dhx_modal_cover{background-color:#000;cursor:default;filter:progid: DXImageTransform.Microsoft.Alpha(opacity=20);opacity:.2;position:fixed;z-index:10;left:0;top:0;width:100%;height:100%;border:none;zoom:1}.gantt-info img,.gantt_modal_box img{float:left;margin-right:20px}.gantt-alert-error,.gantt-confirm-error{border:1px solid red}.gantt_button input,.gantt_popup_button div{border-radius:4px;font-size:14px;box-sizing:content-box;padding:0;margin:0;vertical-align:top}.gantt_popup_title{border-bottom:1px solid #bababa;height:40px;line-height:40px;font-size:20px}.gantt_popup_text{margin:15px 15px 5px;font-size:14px;color:#000;min-height:30px;border-radius:6px}.gantt-error,.gantt-info{font-size:14px;color:#000;box-shadow:3px 3px 3px rgba(0,0,0,.07);padding:0;background-color:#fff;border-radius:3px;border:1px solid #fff}.gantt-info div{padding:5px 10px;background-color:#fff;border-radius:3px;border:1px solid #bababa}.gantt-error{background-color:#d81b1b;border:1px solid #ff3c3c}.gantt-error div{background-color:#d81b1b;border:1px solid #940000;color:#fff}.gantt-warning{background-color:#f57c00;border:1px solid #ffa242}.gantt-warning div{background-color:#f57c00;border:1px solid #845030;color:#fff}.gantt_data_area div,.gantt_grid div{-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.gantt_data_area{position:relative;overflow-x:hidden;overflow-y:hidden;-moz-user-select:-moz-none;-webkit-user-select:none;user-select:none}.gantt_links_area{position:absolute;left:0;top:0}.gantt_side_content,.gantt_task_content,.gantt_task_progress{line-height:inherit;overflow:hidden;height:100%}.gantt_task_content{font-size:13px;color:#fff;width:100%;top:0;cursor:pointer;position:absolute;white-space:nowrap;text-align:center}.gantt_task_progress{text-align:center;z-index:0;background:#04a4f0;border-right:1px solid #1cb3fb;box-shadow:inset -1px 0 0 1px #04a1eb}.gantt_task_progress_wrapper{border-radius:inherit;position:relative;width:100%;height:100%;overflow:hidden}.gantt_task_line{border-radius:2px;position:absolute;box-sizing:border-box;background-color:#17b2fb;border:1px solid #049ae1;-webkit-user-select:none;-moz-user-select:none;-moz-user-select:-moz-none}.gantt_task_line.gantt_drag_move div{cursor:move}.gantt_touch_move,.gantt_touch_progress .gantt_touch_resize{transform:scale(1.02,1.1);transform-origin:50%}.gantt_touch_progress .gantt_task_progress_drag,.gantt_touch_resize .gantt_task_drag{transform:scaleY(1.3);transform-origin:50%}.gantt_side_content{position:absolute;white-space:nowrap;color:#6e6e6e;top:0;font-size:11px;font-size:12px}.gantt_side_content.gantt_left{right:100%;padding-right:20px}.gantt_side_content.gantt_right{left:100%;padding-left:20px}.gantt_side_content.gantt_link_crossing{bottom:8.75px;top:auto}.gantt_link_arrow,.gantt_task_link .gantt_line_wrapper{position:absolute;cursor:pointer}.gantt_line_wrapper div{background-color:#ffa011}.gantt_task_link:hover .gantt_line_wrapper div{box-shadow:0 0 5px 0 #ffa011}.gantt_task_link div.gantt_link_arrow{background-color:transparent;border-style:solid;width:0;height:0}.gantt_link_control{position:absolute;width:20px;top:0}.gantt_link_control div{display:none;cursor:pointer;box-sizing:border-box;position:relative;top:50%;margin-top:-7.5px;vertical-align:middle;border:1px solid #929292;border-radius:6.5px;height:13px;width:13px;background-color:#f0f0f0}.gantt_link_control.task_right div.gantt_link_point{margin-left:7px}.gantt_link_control div:hover{background-color:#fff}.gantt_link_control.task_left{left:-20px}.gantt_link_control.task_right{right:-20px}.gantt_link_target .gantt_link_control div,.gantt_task_line.gantt_drag_move .gantt_link_control div,.gantt_task_line.gantt_drag_move .gantt_task_drag,.gantt_task_line.gantt_drag_move .gantt_task_progress_drag,.gantt_task_line.gantt_drag_progress .gantt_link_control div,.gantt_task_line.gantt_drag_progress .gantt_task_drag,.gantt_task_line.gantt_drag_progress .gantt_task_progress_drag,.gantt_task_line.gantt_drag_resize .gantt_link_control div,.gantt_task_line.gantt_drag_resize .gantt_task_drag,.gantt_task_line.gantt_drag_resize .gantt_task_progress_drag,.gantt_task_line.gantt_selected .gantt_link_control div,.gantt_task_line.gantt_selected .gantt_task_drag,.gantt_task_line.gantt_selected .gantt_task_progress_drag,.gantt_task_line:hover .gantt_link_control div,.gantt_task_line:hover .gantt_task_drag,.gantt_task_line:hover .gantt_task_progress_drag{display:block}.gantt_link_source,.gantt_link_target{box-shadow:0 0 3px #04a4f0}.gantt_link_target.link_finish_allow,.gantt_link_target.link_start_allow{box-shadow:0 0 3px #ffbf5e}.gantt_link_target.link_finish_deny,.gantt_link_target.link_start_deny{box-shadow:0 0 3px #e87e7b}.link_finish_allow .gantt_link_control.task_end_date div,.link_start_allow .gantt_link_control.task_start_date div{background-color:#ffbf5e;border-color:#ffa011}.link_finish_deny .gantt_link_control.task_end_date div,.link_start_deny .gantt_link_control.task_start_date div{background-color:#e87e7b;border-color:#dd3e3a}.gantt_link_arrow_right{border-width:2.5px 0 2.5px 5px;border-top-color:transparent!important;border-right-color:transparent!important;border-bottom-color:transparent!important;border-left-color:#ffa011;margin-top:-1px}.gantt_link_arrow_left{border-width:2.5px 5px 2.5px 0;margin-top:-1px;border-top-color:transparent!important;border-right-color:#ffa011;border-bottom-color:transparent!important;border-left-color:transparent!important}.gantt_link_arrow_up{border-width:0 2.5px 5px;border-color:transparent transparent #ffa011;border-top-color:transparent!important;border-right-color:transparent!important;border-bottom-color:#ffa011;border-left-color:transparent!important}.gantt_link_arrow_down{border-width:2.5px 5px 0 2.5px;border-top-color:#ffa011;border-right-color:transparent!important;border-bottom-color:transparent!important;border-left-color:transparent!important}.gantt_task_drag,.gantt_task_progress_drag{cursor:ew-resize;display:none;position:absolute}.gantt_task_drag.task_right{cursor:e-resize}.gantt_task_drag.task_left{cursor:w-resize}.gantt_task_drag{height:100%;width:8px;z-index:1;top:-1px}.gantt_task_drag.task_left{left:-7px}.gantt_task_drag.task_right{right:-7px}.gantt_task_progress_drag{height:8px;width:8px;bottom:-4px;margin-left:-4px;background-position:bottom;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkY3Rjk0RUVDMkYzMTFFMkI1OThEQTA3ODU0OTkzMEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkY3Rjk0RUZDMkYzMTFFMkI1OThEQTA3ODU0OTkzMEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRjdGOTRFQ0MyRjMxMUUyQjU5OERBMDc4NTQ5OTMwQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyRjdGOTRFREMyRjMxMUUyQjU5OERBMDc4NTQ5OTMwQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PobPBzIAAADkSURBVHjaYpk2bRoDDsAExL1QdjEQ/8OmiAWHZk4gXqymqhQM4ty6fU8OSMUA8XdiDBAB4k0a6iqWRga6EKcwMQXduHlnL5DpB8Rv0J2JDFSA+JiOtgZcMwiA2CAxkBxUDVYDLEAKgIpV9XQ0MZwFEgPJAZnHoWpRDAgC4n2W5saiQKfjClQGkBxQDciL+6B6wAbkA/EqJwdrTkUFOQZCAKQGpBbIXA3SCzJggo+XK7OEuBgDsQCkFqgHrBfsBT5eHgZSAUwP2IBfv36TbABMDygdtK1Zv6UESLORaAbIhG6AAAMAKN8wE24DXWcAAAAASUVORK5CYII=);background-repeat:no-repeat;z-index:1}.gantt_task_progress_drag:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq0lEQVQoz6WMsQnCABBFXyII9rqB7qDNZQdtsoWirmAltpnh0BkUfhOHEqLNiaAJIeZ19+//lxRFQR3ungKnOHd5nld1vbRhPALOkjaSNsAlsnaBu4+Bq6TVO5O0BK7xaxa4+xQoJS2+i5GV0fkVuPs8xjMaiN89uh+Buy+Bm6QJLUgaA7fYkJjZGjhJGtCBLMsqYIuZPf/FzJ4pPektSMzsAOyBYcftAzi+ANj8gShpeTzJAAAAAElFTkSuQmCC)}.gantt_link_tooltip{box-shadow:3px 3px 3px #888;background-color:#fff;border-left:1px dotted #cecece;border-top:1px dotted #cecece;font-family:Tahoma;font-size:8pt;color:#444;padding:6px;line-height:20px}.gantt_link_direction{height:0;border:0 none #ffa011;border-bottom-style:dashed;border-bottom-width:2px;transform-origin:0 0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0;z-index:2;margin-left:1px;position:absolute}.gantt_grid_data .gantt_row.gantt_selected,.gantt_grid_data .gantt_row.odd.gantt_selected{background-color:#fff3a1;border-top-color:#fff087}.gantt_task_row.gantt_selected{background-color:#fff3a1}.gantt_task_row.gantt_selected .gantt_task_cell{border-right-color:#ffec6e}.gantt_task_line.gantt_selected{box-shadow:0 0 5px #04a4f0}.gantt_task_line.gantt_project.gantt_selected{box-shadow:0 0 5px #46ad51}.gantt_task_line.gantt_milestone{visibility:hidden;background-color:#db7dc5;border:0 solid #cd49ae;box-sizing:content-box;-moz-box-sizing:content-box}.gantt_task_line.gantt_milestone div{visibility:visible}.gantt_task_line.gantt_milestone .gantt_task_content{background:inherit;border:inherit;border-width:1px;border-radius:inherit;box-sizing:border-box;-moz-box-sizing:border-box;transform:rotate(45deg)}.gantt_task_line.gantt_task_inline_color{border-color:#999}.gantt_task_line.gantt_task_inline_color .gantt_task_progress{background-color:#363636;opacity:.2}.gantt_task_line.gantt_task_inline_color.gantt_project.gantt_selected,.gantt_task_line.gantt_task_inline_color.gantt_selected{box-shadow:0 0 5px #999}.gantt_task_link.gantt_link_inline_color:hover .gantt_line_wrapper div{box-shadow:0 0 5px 0 #999}.gantt_critical_task{background-color:#e63030;border-color:#9d3a3a}.gantt_critical_task .gantt_task_progress{background-color:rgba(0,0,0,.4)}.gantt_critical_link .gantt_line_wrapper>div{background-color:#e63030}.gantt_critical_link .gantt_link_arrow{border-color:#e63030}.gantt_btn_set:focus,.gantt_cell:focus,.gantt_grid_head_cell:focus,.gantt_popup_button:focus,.gantt_qi_big_icon:focus,.gantt_row:focus{box-shadow:inset 0 0 1px 1px #4d90fe}.gantt_split_parent{opacity:.1;pointer-events:none}.gantt_unselectable,.gantt_unselectable div{-webkit-user-select:none;-moz-user-select:none;-moz-user-select:-moz-none}.gantt_cal_light{-webkit-tap-highlight-color:transparent;border-radius:6px;font-family:Arial;font-size:13px;border:1px solid #bababa;color:#494949;font-size:12px;position:absolute;z-index:9;width:550px;height:250px;box-shadow:3px 3px 3px rgba(0,0,0,.07)}.gantt_cal_light_wide{width:650px}.gantt_cal_light select{font-family:Arial;border:1px solid #bababa;font-size:13px;padding:2px;margin:0}.gantt_cal_ltitle{padding:7px 10px;overflow:hidden;-webkit-border-top-left-radius:6px;-webkit-border-bottom-left-radius:0;-webkit-border-top-right-radius:6px;-webkit-border-bottom-right-radius:0;-moz-border-radius-topleft:6px;-moz-border-radius-bottomleft:0;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:0;border-top-left-radius:6px;border-bottom-left-radius:0;border-top-right-radius:6px;border-bottom-right-radius:0}.gantt_cal_ltitle,.gantt_cal_ltitle span{white-space:nowrap}.gantt_cal_lsection{color:#727272;font-weight:700;padding:12px 0 5px 10px}.gantt_cal_lsection .gantt_fullday{float:right;margin-right:5px;font-size:12px;font-weight:400;line-height:20px;vertical-align:top;cursor:pointer}.gantt_cal_lsection{font-size:13px}.gantt_cal_ltext{padding:2px 10px;overflow:hidden}.gantt_cal_ltext textarea{overflow-y:auto;overflow-x:hidden;font-family:Arial;font-size:13px;box-sizing:border-box;border:1px solid #bababa;height:100%;width:100%;outline:none!important;resize:none}.gantt_time{font-weight:700}.gantt_cal_light .gantt_title{padding-left:10px}.gantt_cal_larea{border:1px solid #bababa;border-left:none;border-right:none;background-color:#fff;overflow:hidden;height:1px}.gantt_btn_set{margin:10px 7px 5px 10px;padding:5px 15px 5px 10px;float:left;border-radius:4px;border:0 solid #bababa;height:32px;font-weight:700;background:#fff;box-sizing:border-box;cursor:pointer}.gantt_btn_set div{float:left;font-size:13px;height:22px;line-height:22px;background-repeat:no-repeat;vertical-align:middle}.gantt_save_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAPCAYAAAACsSQRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTBBQUI0RDhDRUJEMTFFMjhFM0ZENTlERUM1OEQzRTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTBBQUI0RDlDRUJEMTFFMjhFM0ZENTlERUM1OEQzRTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMEFBQjRENkNFQkQxMUUyOEUzRkQ1OURFQzU4RDNFNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMEFBQjREN0NFQkQxMUUyOEUzRkQ1OURFQzU4RDNFNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjdPZV0AAACtSURBVHjanJPbDYUgEESvtwJKoQRLoRNL0RK0ArUCS9AOpAMclDVkw0s2mQ9XcpwJY2OM+VWMgDQ9/CsAEtoh9W6skw+S0Akd5hl1J6kADJBwADs9j9MmIszQ5GJo793qf2nwLUYc0E7xONbaBmloZKAsgCCLW0p2qCsBEEQ6F33gcBbg304I1JYA+BWHQFlAqCcclAXEykaguQSQaiyBVEmbm8RfLFgzo3MJMACZSGxiH8QaMAAAAABJRU5ErkJggg==);margin-top:2px;width:21px}.gantt_cancel_btn{margin-top:2px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDkzMDA3MzlDMzA0MTFFMjg2QTVFMzFEQzgwRkJERDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDkzMDA3M0FDMzA0MTFFMjg2QTVFMzFEQzgwRkJERDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowOTMwMDczN0MzMDQxMUUyODZBNUUzMURDODBGQkRENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowOTMwMDczOEMzMDQxMUUyODZBNUUzMURDODBGQkRENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmYuYOUAAAEdSURBVHjaYvz//z8DJYAFXWDlypU8QKoIiD2A2AwqfAqIdwBxX3h4+Bdk9YzILgBqtgdS84FYEYeF94E4EWjIQZgAE5LmQCB1AKoZZKMPEAtAMYh9GSp3AKjWD8UFQAEhIPshEIOc3wHENUBb/qJ57SyQMoJyPwKxElDNO1gYFEE17wMKVmIJlzNQzeegrjaA6qmBecEbSvfh0GwMxGeBhoPoemQ9MAO0kEIbl2YTqPAFKK2IbMB3AjabYIkRZmQD7kNpMyI0G0PpO8gGbIUFJj7NQDk2INWIrIcJKfBAKcwJqvkcDs0TgFgXGo19KCkRmpDWQdWDEk0NUoCBoq0FqhkE/IEWbKJKUmZEz43QzFSKIzN1481M5ACAAAMAlfl/lCwRpagAAAAASUVORK5CYII=);width:20px}.gantt_delete_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzQzRjMxM0NDRUJEMTFFMjlCNDZDQzhFQUM0ODRCMEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzQzRjMxM0RDRUJEMTFFMjlCNDZDQzhFQUM0ODRCMEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNDNGMzEzQUNFQkQxMUUyOUI0NkNDOEVBQzQ4NEIwQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDNDNGMzEzQkNFQkQxMUUyOUI0NkNDOEVBQzQ4NEIwQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoU+5FoAAACMSURBVHja7JPdDYAgDIQLE+gmjuAIbOIKjMRIbAAb1BZLUozgz7OXfIbWKxeCAiKCwmNfXnsNP5S4mIkMrSYiEaY2LOFloO6QVF1JamPGc2IvpaeSbqXY4LkOLwU6OTyvgzBasxwnBnivYOGj/sEXg27gbd/JpWZiOf0pV7Anlq9UGqs07hTFC7sAAwCbSNs8SyqFMAAAAABJRU5ErkJggg==);margin-top:2px;width:20px}.gantt_cal_cover{width:100%;height:100%;position:absolute;z-index:8;top:0;left:0;background-color:#000;opacity:.1;filter:progid: DXImageTransform.Microsoft.Alpha(opacity=10)}.gantt_custom_button{padding:0 3px;font-family:Arial;font-size:13px;font-weight:400;margin-right:10px;margin-top:-5px;cursor:pointer;float:right;height:21px;width:90px;border:1px solid #cecece;text-align:center;border-radius:4px}.gantt_custom_button div{cursor:pointer;float:none;height:21px;line-height:21px;vertical-align:middle}.gantt_custom_button div:first-child{display:none}.gantt_cal_light_wide{width:580px;padding:2px 4px}.gantt_cal_light_wide .gantt_cal_larea{box-sizing:border-box;border:1px solid #bababa}.gantt_cal_light_wide .gantt_cal_lsection{border:0;float:left;text-align:right;width:80px;height:20px;padding:5px 10px 0 0}.gantt_cal_light_wide .gantt_wrap_section{position:relative;padding:10px 0;overflow:hidden;border-bottom:1px solid #ebebeb}.gantt_cal_light_wide .gantt_section_time{overflow:hidden;padding-top:2px!important;padding-right:0;height:20px!important}.gantt_cal_light_wide .gantt_cal_ltext{padding-right:0}.gantt_cal_light_wide .gantt_cal_larea{padding:0 10px;width:100%}.gantt_cal_light_wide .gantt_section_time{background:transparent}.gantt_cal_light_wide .gantt_cal_checkbox label{padding-left:0}.gantt_cal_light_wide .gantt_cal_lsection .gantt_fullday{float:none;margin-right:0;font-weight:700;cursor:pointer}.gantt_cal_light_wide .gantt_custom_button{position:absolute;top:0;right:0;margin-top:2px}.gantt_cal_light_wide .gantt_repeat_right{margin-right:55px}.gantt_cal_light_wide.gantt_cal_light_full{width:738px}.gantt_cal_wide_checkbox input{margin-top:8px;margin-left:14px}.gantt_cal_light input{font-size:13px}.gantt_section_time{background-color:#fff;white-space:nowrap;padding:2px 10px 5px;padding-top:2px!important}.gantt_section_time .gantt_time_selects{float:left;height:25px}.gantt_section_time .gantt_time_selects select{height:23px;padding:2px;border:1px solid #bababa}.gantt_duration{width:100px;height:23px;float:left;white-space:nowrap;margin-left:20px;line-height:23px}.gantt_duration .gantt_duration_dec,.gantt_duration .gantt_duration_inc,.gantt_duration .gantt_duration_value{box-sizing:border-box;text-align:center;vertical-align:top;height:100%;border:1px solid #bababa}.gantt_duration .gantt_duration_value{width:40px;padding:3px 4px;border-left-width:0;border-right-width:0}.gantt_duration .gantt_duration_dec,.gantt_duration .gantt_duration_inc{width:20px;padding:1px;padding-bottom:1px;background:#fff}.gantt_duration .gantt_duration_dec{-moz-border-top-left-radius:4px;-moz-border-bottom-left-radius:4px;-webkit-border-top-left-radius:4px;-webkit-border-bottom-left-radius:4px;border-top-left-radius:4px;border-bottom-left-radius:4px}.gantt_duration .gantt_duration_inc{margin-right:4px;-moz-border-top-right-radius:4px;-moz-border-bottom-right-radius:4px;-webkit-border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px}.gantt_cal_quick_info{border:1px solid #bababa;border-radius:6px;position:absolute;z-index:4;box-shadow:3px 3px 3px rgba(0,0,0,.07);background-color:#fff;width:300px;transition:left .5s ease,right .5s;-moz-transition:left .5s ease,right .5s;-webkit-transition:left .5s ease,right .5s;-o-transition:left .5s ease,right .5s}.gantt_no_animate{transition:none;-moz-transition:none;-webkit-transition:none;-o-transition:none}.gantt_cal_quick_info.gantt_qi_left .gantt_qi_big_icon{float:right}.gantt_cal_qi_title{-webkit-border-top-left-radius:6px;-webkit-border-bottom-left-radius:0;-webkit-border-top-right-radius:6px;-webkit-border-bottom-right-radius:0;-moz-border-radius-topleft:6px;-moz-border-radius-bottomleft:0;-moz-border-radius-topright:6px;-moz-border-radius-bottomright:0;border-top-left-radius:6px;border-bottom-left-radius:0;border-top-right-radius:6px;border-bottom-right-radius:0;padding:5px 0 8px 12px;color:#494949;background-color:#dbdbdb;border-bottom:1px solid #bababa}.gantt_cal_qi_tdate{font-size:14px;font-weight:700}.gantt_cal_qi_tcontent{font-size:13px}.gantt_cal_qi_content{padding:16px 8px;font-size:13px;color:#494949;overflow:hidden}.gantt_cal_qi_controls{-webkit-border-top-left-radius:0;-webkit-border-bottom-left-radius:6px;-webkit-border-top-right-radius:0;-webkit-border-bottom-right-radius:6px;-moz-border-radius-topleft:0;-moz-border-radius-bottomleft:6px;-moz-border-radius-topright:0;-moz-border-radius-bottomright:6px;border-top-left-radius:0;border-bottom-left-radius:6px;border-top-right-radius:0;border-bottom-right-radius:6px;padding-left:7px}.gantt_cal_qi_controls .gantt_menu_icon{margin-top:6px;background-repeat:no-repeat}.gantt_cal_qi_controls .gantt_menu_icon.icon_edit{width:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3QYFCjI5ZQj5bAAAAFNJREFUOMvt0zEOACAIA0DkwTymH8bJTRTKZGJXyaWEKPKTCQAH4Ls37cItcDUzsxHNDLZNhCq7Gt1wh9ErV7EjyGAhyGLphlnsClWuS32rn0czAV+vNGrM/LBtAAAAAElFTkSuQmCC)}.gantt_cal_qi_controls .gantt_menu_icon.icon_delete{width:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzQzRjMxM0NDRUJEMTFFMjlCNDZDQzhFQUM0ODRCMEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzQzRjMxM0RDRUJEMTFFMjlCNDZDQzhFQUM0ODRCMEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNDNGMzEzQUNFQkQxMUUyOUI0NkNDOEVBQzQ4NEIwQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDNDNGMzEzQkNFQkQxMUUyOUI0NkNDOEVBQzQ4NEIwQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoU+5FoAAACMSURBVHja7JPdDYAgDIQLE+gmjuAIbOIKjMRIbAAb1BZLUozgz7OXfIbWKxeCAiKCwmNfXnsNP5S4mIkMrSYiEaY2LOFloO6QVF1JamPGc2IvpaeSbqXY4LkOLwU6OTyvgzBasxwnBnivYOGj/sEXg27gbd/JpWZiOf0pV7Anlq9UGqs07hTFC7sAAwCbSNs8SyqFMAAAAABJRU5ErkJggg==)}.gantt_qi_big_icon{font-size:13px;border-radius:4px;font-weight:700;background:#fff;margin:5px 9px 8px 0;min-width:60px;line-height:32px;vertical-align:middle;padding:0 10px 0 5px;cursor:pointer;border:1px solid #bababa}.gantt_cal_qi_controls div{float:left;height:32px;text-align:center;line-height:32px}.gantt_tooltip{padding:10px;position:absolute;z-index:3}.gantt_marker{height:100%;width:2px;top:0;position:absolute;text-align:center;background-color:rgba(255,0,0,.4);box-sizing:border-box}.gantt_marker .gantt_marker_content{padding:5px;background:inherit;color:#fff;position:absolute;font-size:12px;line-height:12px;opacity:.8}.gantt_marker_area{position:absolute;top:0;left:0}.gantt_resource_marker{position:absolute;text-align:center;font-size:14px;color:#fff}.gantt_resource_marker_ok{background:rgba(78,208,134,.75)}.gantt_resource_marker_overtime{background:hsla(0,100%,76%,.69)}.gantt_grid_editor_placeholder{position:absolute}.gantt_grid_editor_placeholder>div,.gantt_grid_editor_placeholder input,.gantt_grid_editor_placeholder select{width:100%;height:100%;box-sizing:border-box}.gantt_row_placeholder div{opacity:.5}.gantt_row_placeholder .gantt_add,.gantt_row_placeholder .gantt_file{display:none}.gantt_layout_content{width:100%;overflow:auto;box-sizing:border-box}.gantt_layout_cell{position:relative;box-sizing:border-box}.gantt_layout_cell>.gantt_layout_header{background:#33aae8;color:#fff;font-size:17px;padding:5px 10px;box-sizing:border-box}.gantt_layout_header.collapsed_x{background:#a9a9a9}.gantt_layout_header.collapsed_x .gantt_header_arrow:before{content:"\\21E7"}.gantt_layout_header.collapsed_y{background:#a9a9a9}.gantt_layout_header.collapsed_y .gantt_header_arrow:before{content:"\\21E9"}.gantt_layout_header{cursor:pointer}.gantt_layout_header .gantt_header_arrow{float:right;text-align:right}.gantt_layout_header .gantt_header_arrow:before{content:"\\21E6"}.gantt_layout_header.vertical .gantt_header_arrow:before{content:"\\21E7"}.gantt_layout_outer_scroll_vertical .gantt_layout_content{overflow-y:hidden}.gantt_layout_outer_scroll_horizontal .gantt_layout_content{overflow-x:hidden}.gantt_layout_x>.gantt_layout_cell{display:inline-block;vertical-align:top}.gantt_layout_x{white-space:nowrap}.gantt_resizing{opacity:.7;background:#f2f2f2}.gantt_layout_cell_border_right.gantt_resizer{overflow:visible;border-right:0}.gantt_resizer{cursor:e-resize;position:relative}.gantt_resizer_y{cursor:n-resize}.gantt_resizer_stick{background:#33aae8;z-index:7;position:absolute;top:0;width:100%}.gantt_resizer_x .gantt_resizer_x{position:absolute;width:20px;height:100%;margin-left:-10px;top:0;left:0;z-index:1}.gantt_resizer_y .gantt_resizer_y{position:absolute;height:20px;width:100%;top:-10px;left:0;z-index:1}.gantt_resizer_error{background:#cd5c5c!important}.gantt_layout_cell_border_left{border-left:1px solid #bababa}.gantt_layout_cell_border_right{border-right:1px solid #bababa}.gantt_layout_cell_border_top{border-top:1px solid #bababa}.gantt_layout_cell_border_bottom{border-bottom:1px solid #bababa}.gantt_layout_cell_border_transparent{border-color:transparent}.gantt_window{position:absolute;top:50%;left:50%;z-index:12;background:#fff}.gantt_window_content{position:relative}.gantt_window_content_header{background:#39c;color:#fff;height:33px;padding:10px 10px 0;border-bottom:2px solid #fff;position:relative}.gantt_window_content_header_text{padding-left:10%}.gantt_window_content_header_buttons{position:absolute;top:10px;right:10px}.gantt_window_content_header_buttons:hover{color:#000;cursor:pointer}.gantt_window_content_resizer{position:absolute;width:15px;height:15px;bottom:0;line-height:15px;right:-1px;text-align:center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAMAAAAMCGV4AAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAABZJREFUeAFjIAUwUshlpJDLSIhLGAAACQ4AFk79JaMAAAAASUVORK5CYII=);cursor:nw-resize;z-index:5}.gantt_window_content_frame{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.1);z-index:7}.gantt_window_drag{cursor:pointer!important}.gantt_window_resizing{overflow:visible}.gantt_window_resizing_body{overflow:hidden!important}.gantt_window_modal{background:rgba(0,0,0,.1);z-index:7;top:0;left:0;width:100%;height:100%;position:fixed}.gantt_cal_light,.gantt_cal_quick_info,.gantt_container,.gantt_message_area,.gantt_modal_box,.gantt_tooltip{text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.gantt_noselect{-moz-user-select:-moz-none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.gantt_drag_marker{position:absolute;top:-1000px;left:-1000px;font-family:Arial;font-size:13px}.gantt_drag_marker .gantt_tree_icon.gantt_blank,.gantt_drag_marker .gantt_tree_icon.gantt_close,.gantt_drag_marker .gantt_tree_icon.gantt_open,.gantt_drag_marker .gantt_tree_indent{display:none}.gantt_drag_marker,.gantt_drag_marker .gantt_row.odd{background-color:#fff}.gantt_drag_marker .gantt_row{border-left:1px solid #d2d2d2;border-top:1px solid #d2d2d2}.gantt_drag_marker .gantt_cell{border-color:#d2d2d2}.gantt_row.gantt_over,.gantt_task_row.gantt_over{background-color:#0070fe}.gantt_row.gantt_transparent .gantt_cell{opacity:.7}.gantt_task_row.gantt_transparent{background-color:#dbf3fe}.gantt_popup_button.gantt_delete_button{background:#46ad51;text-shadow:0 -1px 0 #307738;color:#fff;font-weight:700}',""])},402:function(e,t,a){var n=a(401);"string"==typeof n&&(n=[[e.i,n,""]]);a(399)(n,{});n.locals&&(e.exports=n.locals)},403:function(e,t){
/*
@license

dhtmlxGantt v.5.2.0 Standard
This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.

(c) Dinamenta, UAB.

*/
!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/codebase/",a(a.s=173)}({173:function(e,t){gantt.locale={date:{month_full:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],month_short:["/01","/02","/03","/ 04","/ 05","/ 06","/ 07","/ 08","/ 09","/ 10","/ 11","/ 12"],day_full:["Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7","Chủ nhật"],day_short:["Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7","Chủ nhật"]},labels:{new_task:"Nhiệm vụ",dhx_cal_today_button:"Hôm nay",day_tab:"Theo Ngày",week_tab:"Theo Tuần",month_tab:"Theo Tháng",new_event:"Thêm sự kiện",icon_save:"Lưu",icon_cancel:"Huỷ",icon_details:"Chi tiết",icon_edit:"Chỉnh sửa",icon_delete:"Xoá",confirm_closing:"",confirm_deleting:"Bạn thật sự muốn xoá công việc này?",section_description:"Mô tả công việc",section_time:"Thời gian thực hiện",section_type:"Kiểu",column_wbs:"Mục lục",column_text:"Tên công việc",column_start_date:"Bắt đầu",column_duration:"Số ngày",column_add:"",link:"Liên kết",confirm_link_deleting:"Bạn thật sự muốn xoá liên kết này?",link_start:"(Bắt đầu)",link_end:"(Kết thúc)",type_task:"Công việc",type_project:"Dự án",type_milestone:"Milestone",minutes:"Phút",hours:"Giờ",days:"Ngày",weeks:"Tuần",months:"Tháng",years:"Năm",message_ok:"OK",message_cancel:"Huỷ"}}}})},411:function(e,t,a){var n={"./af":297,"./af.js":297,"./ar":296,"./ar-dz":295,"./ar-dz.js":295,"./ar-kw":294,"./ar-kw.js":294,"./ar-ly":293,"./ar-ly.js":293,"./ar-ma":292,"./ar-ma.js":292,"./ar-sa":291,"./ar-sa.js":291,"./ar-tn":290,"./ar-tn.js":290,"./ar.js":296,"./az":289,"./az.js":289,"./be":288,"./be.js":288,"./bg":287,"./bg.js":287,"./bm":286,"./bm.js":286,"./bn":285,"./bn.js":285,"./bo":284,"./bo.js":284,"./br":283,"./br.js":283,"./bs":282,"./bs.js":282,"./ca":281,"./ca.js":281,"./cs":280,"./cs.js":280,"./cv":279,"./cv.js":279,"./cy":278,"./cy.js":278,"./da":277,"./da.js":277,"./de":276,"./de-at":275,"./de-at.js":275,"./de-ch":274,"./de-ch.js":274,"./de.js":276,"./dv":273,"./dv.js":273,"./el":272,"./el.js":272,"./en-au":271,"./en-au.js":271,"./en-ca":270,"./en-ca.js":270,"./en-gb":269,"./en-gb.js":269,"./en-ie":268,"./en-ie.js":268,"./en-il":267,"./en-il.js":267,"./en-nz":266,"./en-nz.js":266,"./eo":265,"./eo.js":265,"./es":264,"./es-do":263,"./es-do.js":263,"./es-us":262,"./es-us.js":262,"./es.js":264,"./et":261,"./et.js":261,"./eu":260,"./eu.js":260,"./fa":259,"./fa.js":259,"./fi":258,"./fi.js":258,"./fo":257,"./fo.js":257,"./fr":256,"./fr-ca":255,"./fr-ca.js":255,"./fr-ch":254,"./fr-ch.js":254,"./fr.js":256,"./fy":253,"./fy.js":253,"./gd":252,"./gd.js":252,"./gl":251,"./gl.js":251,"./gom-latn":250,"./gom-latn.js":250,"./gu":249,"./gu.js":249,"./he":248,"./he.js":248,"./hi":247,"./hi.js":247,"./hr":246,"./hr.js":246,"./hu":245,"./hu.js":245,"./hy-am":244,"./hy-am.js":244,"./id":243,"./id.js":243,"./is":242,"./is.js":242,"./it":241,"./it.js":241,"./ja":240,"./ja.js":240,"./jv":239,"./jv.js":239,"./ka":238,"./ka.js":238,"./kk":237,"./kk.js":237,"./km":236,"./km.js":236,"./kn":235,"./kn.js":235,"./ko":234,"./ko.js":234,"./ky":233,"./ky.js":233,"./lb":232,"./lb.js":232,"./lo":231,"./lo.js":231,"./lt":230,"./lt.js":230,"./lv":229,"./lv.js":229,"./me":228,"./me.js":228,"./mi":227,"./mi.js":227,"./mk":226,"./mk.js":226,"./ml":225,"./ml.js":225,"./mn":224,"./mn.js":224,"./mr":223,"./mr.js":223,"./ms":222,"./ms-my":221,"./ms-my.js":221,"./ms.js":222,"./mt":220,"./mt.js":220,"./my":219,"./my.js":219,"./nb":218,"./nb.js":218,"./ne":217,"./ne.js":217,"./nl":216,"./nl-be":215,"./nl-be.js":215,"./nl.js":216,"./nn":214,"./nn.js":214,"./pa-in":213,"./pa-in.js":213,"./pl":212,"./pl.js":212,"./pt":211,"./pt-br":210,"./pt-br.js":210,"./pt.js":211,"./ro":209,"./ro.js":209,"./ru":208,"./ru.js":208,"./sd":207,"./sd.js":207,"./se":206,"./se.js":206,"./si":205,"./si.js":205,"./sk":204,"./sk.js":204,"./sl":203,"./sl.js":203,"./sq":202,"./sq.js":202,"./sr":201,"./sr-cyrl":200,"./sr-cyrl.js":200,"./sr.js":201,"./ss":199,"./ss.js":199,"./sv":198,"./sv.js":198,"./sw":197,"./sw.js":197,"./ta":196,"./ta.js":196,"./te":195,"./te.js":195,"./tet":194,"./tet.js":194,"./tg":193,"./tg.js":193,"./th":192,"./th.js":192,"./tl-ph":191,"./tl-ph.js":191,"./tlh":190,"./tlh.js":190,"./tr":189,"./tr.js":189,"./tzl":188,"./tzl.js":188,"./tzm":187,"./tzm-latn":186,"./tzm-latn.js":186,"./tzm.js":187,"./ug-cn":185,"./ug-cn.js":185,"./uk":184,"./uk.js":184,"./ur":183,"./ur.js":183,"./uz":182,"./uz-latn":181,"./uz-latn.js":181,"./uz.js":182,"./vi":180,"./vi.js":180,"./x-pseudo":179,"./x-pseudo.js":179,"./yo":178,"./yo.js":178,"./zh-cn":177,"./zh-cn.js":177,"./zh-hk":176,"./zh-hk.js":176,"./zh-tw":175,"./zh-tw.js":175};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error('Cannot find module "'+e+'".');throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=411},546:function(e,t,a){e.exports=a(346)}});